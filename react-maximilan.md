[TOC]  


- [React - The Complete Guide (incl Hooks, React Router, Redux)](#react---the-complete-guide-incl-hooks-react-router-redux)
  - [1. Getting Started](#1-getting-started)
    - [1. Introduction](#1-introduction)
    - [2. What is React](#2-what-is-react)
    - [2.1 components-learning-card.pdf.pdf](#21-components-learning-cardpdfpdf)
    - [3. Real-World SPAs & React Web Apps](#3-real-world-spas--react-web-apps)
    - [4. Writing our First React Code](#4-writing-our-first-react-code)
    - [5. Why Should we Choose React](#5-why-should-we-choose-react)
    - [6. React Alternatives](#6-react-alternatives)
    - [7. Understanding Single Page Applications and Multi Page Applications](#7-understanding-single-page-applications-and-multi-page-applications)
    - [8. Course Outline](#8-course-outline)
    - [9. How to get the Most out of This Course](#9-how-to-get-the-most-out-of-this-course)
    - [10. Useful Resources & Links.html](#10-useful-resources--linkshtml)
  - [2. Refreshing Next Generation JavaScript (Optional)](#2-refreshing-next-generation-javascript-optional)
    - [1. Module Introduction](#1-module-introduction)
    - [2. Understanding let and const](#2-understanding-let-and-const)
    - [3. Arrow Functions](#3-arrow-functions)
    - [4. Exports and Imports](#4-exports-and-imports)
    - [5. Understanding Classes](#5-understanding-classes)
    - [6. Classes, Properties and Methods](#6-classes-properties-and-methods)
    - [7. The Spread & Rest Operator](#7-the-spread--rest-operator)
    - [8. Destructuring](#8-destructuring)
    - [9. Reference and Primitive Types Refresher](#9-reference-and-primitive-types-refresher)
    - [10. Refreshing Array Functions](#10-refreshing-array-functions)
    - [11. Wrap Up](#11-wrap-up)
    - [12. Next-Gen JavaScript - Summary.html](#12-next-gen-javascript---summaryhtml)
      - [**let & const**](#let--const)
      - [**ES6 Arrow Functions**](#es6-arrow-functions)
      - [**Exports & Imports**](#exports--imports)
      - [**Classes**](#classes)
      - [**Spread & Rest Operator**](#spread--rest-operator)
      - [**Destructuring**](#destructuring)
    - [12.1 next-gen-js-summary.pdf.pdf](#121-next-gen-js-summarypdfpdf)
    - [13. JS Array Functions.html](#13-js-array-functionshtml)
  - [3. Understanding the Base Features & Syntax](#3-understanding-the-base-features--syntax)
    - [1. Module Introduction](#1-module-introduction-1)
    - [2. The Build Workflow](#2-the-build-workflow)
    - [3. Using Create React App](#3-using-create-react-app)
    - [4. Understanding the Folder Structure](#4-understanding-the-folder-structure)
    - [4.1 ide-setup.pdf.pdf](#41-ide-setuppdfpdf)
    - [5. Understanding Component Basics](#5-understanding-component-basics)
    - [5.1 components-learning-card.pdf.pdf](#51-components-learning-cardpdfpdf)
    - [6. Understanding JSX](#6-understanding-jsx)
    - [7. JSX Restrictions](#7-jsx-restrictions)
    - [8. Creating a Functional Component](#8-creating-a-functional-component)
    - [9. Components & JSX Cheat Sheet.html](#9-components--jsx-cheat-sheethtml)
    - [9.1 components.pdf.pdf](#91-componentspdfpdf)
    - [10. Working with Components & Re-Using Them](#10-working-with-components--re-using-them)
    - [11. Outputting Dynamic Content](#11-outputting-dynamic-content)
    - [12. Working with Props](#12-working-with-props)
    - [12.1 props-learning-card.pdf.pdf](#121-props-learning-cardpdfpdf)
    - [13. Understanding the Children Property](#13-understanding-the-children-property)
    - [14. Understanding & Using State](#14-understanding--using-state)
    - [15. Props & State.html](#15-props--statehtml)
    - [15.1 props&state.pdf.pdf](#151-propsstatepdfpdf)
    - [16. Handling Events with Methods](#16-handling-events-with-methods)
    - [17. To Which Events Can You Listen.html](#17-to-which-events-can-you-listenhtml)
    - [Clipboard Events](#clipboard-events)
    - [Composition Events](#composition-events)
    - [Keyboard Events](#keyboard-events)
    - [Focus Events](#focus-events)
    - [Form Events](#form-events)
    - [Mouse Events](#mouse-events)
    - [Selection Events](#selection-events)
    - [Touch Events](#touch-events)
    - [UI Events](#ui-events)
    - [Wheel Events](#wheel-events)
    - [Media Events](#media-events)
    - [Image Events](#image-events)
    - [Animation Events](#animation-events)
    - [Transition Events](#transition-events)
    - [Other Events](#other-events)
    - [18. Manipulating the State](#18-manipulating-the-state)
    - [18.1 state-learning-card.pdf.pdf](#181-state-learning-cardpdfpdf)
    - [19. Function Components Naming.html](#19-function-components-naminghtml)
    - [20. Using the useState() Hook for State Manipulation](#20-using-the-usestate-hook-for-state-manipulation)
    - [20.3 usestate-learning-card.pdf.pdf](#203-usestate-learning-cardpdfpdf)
    - [21. Stateless vs Stateful Components](#21-stateless-vs-stateful-components)
    - [22. Passing Method References Between Components](#22-passing-method-references-between-components)
    - [23. Adding Two Way Binding](#23-adding-two-way-binding)
    - [24. Adding Styling with Stylesheets](#24-adding-styling-with-stylesheets)
    - [25. Working with Inline Styles](#25-working-with-inline-styles)
    - [26. Time to Practice - The Base Syntax.html](#26-time-to-practice---the-base-syntaxhtml)
    - [27. [OPTIONAL] Assignment Solution](#27-optional-assignment-solution)
    - [28. Useful Resources & Links.html](#28-useful-resources--linkshtml)
  - [4. Working with Lists and Conditionals](#4-working-with-lists-and-conditionals)
    - [1. Module Introduction](#1-module-introduction-2)
    - [2. Rendering Content Conditionally](#2-rendering-content-conditionally)
    - [2.1 jsx-conditionals-learning-card.pdf.pdf](#21-jsx-conditionals-learning-cardpdfpdf)
    - [3. Handling Dynamic Content The JavaScript Way](#3-handling-dynamic-content-the-javascript-way)
    - [4. Outputting Lists (Intro)](#4-outputting-lists-intro)
    - [5. Outputting Lists](#5-outputting-lists)
    - [5.1 jsx-lists-learning-card.pdf.pdf](#51-jsx-lists-learning-cardpdfpdf)
    - [6. Lists & State](#6-lists--state)
    - [7. Updating State Immutably](#7-updating-state-immutably)
    - [8. Lists & Keys](#8-lists--keys)
    - [9. Flexible Lists](#9-flexible-lists)
    - [10. Wrap Up](#10-wrap-up)
    - [11. Time to Practice - Lists & Conditionals.html](#11-time-to-practice---lists--conditionalshtml)
    - [12. [OPTIONAL] Assignment Solution](#12-optional-assignment-solution)
    - [13. Useful Resources & Links.html](#13-useful-resources--linkshtml)
  - [5. Styling React Components & Elements](#5-styling-react-components--elements)
    - [1. Module Introduction](#1-module-introduction-3)
    - [2. Outlining the Problem Set](#2-outlining-the-problem-set)
    - [3. Setting Styles Dynamically](#3-setting-styles-dynamically)
    - [4. Setting Class Names Dynamically](#4-setting-class-names-dynamically)
    - [5. Adding and Using Radium](#5-adding-and-using-radium)
    - [6. Using Radium for Media Queries](#6-using-radium-for-media-queries)
    - [7. MUST READ Enabling CSS Modules.html](#7-must-read-enabling-css-moduleshtml)
    - [8. Enabling & Using CSS Modules](#8-enabling--using-css-modules)
    - [8.1 css-modules-learning-card.pdf.pdf](#81-css-modules-learning-cardpdfpdf)
    - [9. More on CSS Modules.html](#9-more-on-css-moduleshtml)
    - [10. Adding Pseudo Selectors](#10-adding-pseudo-selectors)
    - [11. Working with Media Queries](#11-working-with-media-queries)
    - [12. Useful Resources & Links.html](#12-useful-resources--linkshtml)
  - [6. Debugging React Apps](#6-debugging-react-apps)
    - [1. Module Introduction](#1-module-introduction-4)
    - [2. Understanding Error Messages](#2-understanding-error-messages)
    - [3. Finding Logical Errors by using Dev Tools & Sourcemaps](#3-finding-logical-errors-by-using-dev-tools--sourcemaps)
    - [4. Working with the React Developer Tools](#4-working-with-the-react-developer-tools)
    - [5. Using Error Boundaries (React 16+)](#5-using-error-boundaries-react-16)
    - [6. Wrap Up](#6-wrap-up)
    - [7. Useful Resources & Links.html](#7-useful-resources--linkshtml)
  - [7. Diving Deeper into Components & React Internals](#7-diving-deeper-into-components--react-internals)
    - [1. Module Introduction](#1-module-introduction-5)
    - [2. A Better Project Structure](#2-a-better-project-structure)
    - [3. Splitting an App Into Components](#3-splitting-an-app-into-components)
    - [4. Comparing Stateless and Stateful Components](#4-comparing-stateless-and-stateful-components)
    - [5. Class-based vs Functional Components](#5-class-based-vs-functional-components)
    - [6. class Component Lifecycle Overview](#6-class-component-lifecycle-overview)
    - [7. Component Creation Lifecycle in Action](#7-component-creation-lifecycle-in-action)
    - [7.1 lifecycle-creation-learning-card.pdf.pdf](#71-lifecycle-creation-learning-cardpdfpdf)
    - [8. Component Update Lifecycle (for props Changes)](#8-component-update-lifecycle-for-props-changes)
    - [8.1 lifecycle-update-external-learning-card.pdf.pdf](#81-lifecycle-update-external-learning-cardpdfpdf)
    - [9. Component Update Lifecycle (for state Changes)](#9-component-update-lifecycle-for-state-changes)
    - [10. Using useEffect() in Functional Components](#10-using-useeffect-in-functional-components)
    - [11. Controlling the useEffect() Behavior](#11-controlling-the-useeffect-behavior)
    - [12. Cleaning up with Lifecycle Hooks & useEffect()](#12-cleaning-up-with-lifecycle-hooks--useeffect)
    - [13. Cleanup Work with useEffect() - Ex](#13-cleanup-work-with-useeffect---ex)
    - [14. Using shouldComponentUpdate for Optimization](#14-using-shouldcomponentupdate-for-optimization)
    - [14.1 Reference vs Primitive Types.html](#141-reference-vs-primitive-typeshtml)
    - [15. Optimizing Functional Components with React.memo()](#15-optimizing-functional-components-with-reactmemo)
    - [16. When should you optimize](#16-when-should-you-optimize)
    - [17. PureComponents instead of shouldComponentUpdate](#17-purecomponents-instead-of-shouldcomponentupdate)
    - [18. How React Updates the DOM](#18-how-react-updates-the-dom)
    - [19. Rendering Adjacent JSX Elements](#19-rendering-adjacent-jsx-elements)
    - [19.1 react-adjacent-jsx.pdf.pdf](#191-react-adjacent-jsxpdfpdf)
    - [20. Windows Users Must Read.html](#20-windows-users-must-readhtml)
      - [**1) Problems when unzipping the attached file:**](#1-problems-when-unzipping-the-attached-file)
      - [**2) Problems with the creation of an Aux folder and/ or file:**](#2-problems-with-the-creation-of-an-aux-folder-and-or-file)
    - [21. Using React.Fragment](#21-using-reactfragment)
    - [22. Higher Order Components (HOC) - Introduction](#22-higher-order-components-hoc---introduction)
    - [23. Another Form of HOCs](#23-another-form-of-hocs)
    - [24. Passing Unknown Props](#24-passing-unknown-props)
    - [25. Setting State Correctly](#25-setting-state-correctly)
    - [26. Using PropTypes](#26-using-proptypes)
    - [27. Using Refs](#27-using-refs)
    - [28. Refs with React Hooks](#28-refs-with-react-hooks)
    - [29. Understanding Prop Chain Problems](#29-understanding-prop-chain-problems)
    - [30. Using the Context API](#30-using-the-context-api)
    - [31. contextType & useContext()](#31-contexttype--usecontext)
    - [32. Wrap Up](#32-wrap-up)
    - [33. Useful Resources & Links.html](#33-useful-resources--linkshtml)
    - [34. MUST READ Legacy Lectures.html](#34-must-read-legacy-lectureshtml)
    - [35. [LEGACY] Splitting an App Into Components](#35-legacy-splitting-an-app-into-components)
    - [36. [LEGACY] Comparing Stateless and Stateful Components](#36-legacy-comparing-stateless-and-stateful-components)
    - [37. [LEGACY] Understanding the Component Lifecycle](#37-legacy-understanding-the-component-lifecycle)
    - [38. [LEGACY] Converting Stateless to Stateful Components](#38-legacy-converting-stateless-to-stateful-components)
    - [39. [LEGACY] Component Creation Lifecycle in Action](#39-legacy-component-creation-lifecycle-in-action)
    - [39.1 lifecycle-creation-learning-card.pdf.pdf](#391-lifecycle-creation-learning-cardpdfpdf)
    - [40. [LEGACY] componentWillUnmount().html](#40-legacy-componentwillunmounthtml)
    - [41. [LEGACY] Component Updating Lifecycle Hooks](#41-legacy-component-updating-lifecycle-hooks)
    - [42. [LEGACY] Component Updating Lifecycle in Action](#42-legacy-component-updating-lifecycle-in-action)
    - [42.1 lifecycle-update-external-learning-card.pdf.pdf](#421-lifecycle-update-external-learning-cardpdfpdf)
    - [43. [LEGACY] Updating Lifecycle Hooks (Triggered by State Changes)](#43-legacy-updating-lifecycle-hooks-triggered-by-state-changes)
    - [43.1 lifecycle-update-internal-learning-card.pdf.pdf](#431-lifecycle-update-internal-learning-cardpdfpdf)
    - [44. [LEGACY] Performance Gains with PureComponents](#44-legacy-performance-gains-with-purecomponents)
    - [45. [LEGACY] How React Updates the App & Component Tree](#45-legacy-how-react-updates-the-app--component-tree)
    - [46. [LEGACY] Understanding React's DOM Updating Strategy](#46-legacy-understanding-reacts-dom-updating-strategy)
    - [47. [LEGACY] Windows Users Must Read - File Downloads.html](#47-legacy-windows-users-must-read---file-downloadshtml)
      - [**1) Problems when unzipping the attached file:**](#1-problems-when-unzipping-the-attached-file-1)
      - [**2) Problems with the creation of an Aux folder and/ or file:**](#2-problems-with-the-creation-of-an-aux-folder-and-or-file-1)
    - [48. [LEGACY] Returning Adjacent Elements (React 16+)](#48-legacy-returning-adjacent-elements-react-16)
    - [49. [LEGACY] React 16.2 Feature Fragments.html](#49-legacy-react-162-feature-fragmentshtml)
    - [50. [LEGACY] Understanding Higher Order Components (HOCs)](#50-legacy-understanding-higher-order-components-hocs)
    - [51. [LEGACY] A Different Approach to HOCs](#51-legacy-a-different-approach-to-hocs)
    - [52. [LEGACY] Passing Unknown Props](#52-legacy-passing-unknown-props)
    - [53. [LEGACY] Using setState Correctly](#53-legacy-using-setstate-correctly)
    - [54. [LEGACY] Validating Props](#54-legacy-validating-props)
    - [55. [LEGACY] Available PropTypes.html](#55-legacy-available-proptypeshtml)
    - [Requiring Single Child](#requiring-single-child)
    - [Default Prop Values](#default-prop-values)
    - [56. [LEGACY] Using References (ref)](#56-legacy-using-references-ref)
    - [57. [LEGACY] More on the React ref API (16.3)](#57-legacy-more-on-the-react-ref-api-163)
    - [58. [LEGACY] The Context API (React 16.3)](#58-legacy-the-context-api-react-163)
    - [59. [LEGACY] More on the Context API (16.6)](#59-legacy-more-on-the-context-api-166)
    - [60. [LEGACY] Updated Lifecycle Hooks (React 16.3)](#60-legacy-updated-lifecycle-hooks-react-163)
    - [61. [LEGACY] The memo Method (16.4)](#61-legacy-the-memo-method-164)
    - [62. [LEGACY] Wrap Up](#62-legacy-wrap-up)
    - [63. [LEGACY] Useful Resources & Links.html](#63-legacy-useful-resources--linkshtml)
  - [8. A Real App The Burger Builder (Basic Version)](#8-a-real-app-the-burger-builder-basic-version)
    - [1. About React Hooks.html](#1-about-react-hookshtml)
    - [2. Module Introduction](#2-module-introduction)
    - [3. Planning an App in React - Core Steps](#3-planning-an-app-in-react---core-steps)
    - [4. Planning our App - Layout and Component Tree](#4-planning-our-app---layout-and-component-tree)
    - [5. Planning the State](#5-planning-the-state)
    - [6. Setting up the Project](#6-setting-up-the-project)
    - [7. Creating a Layout Component](#7-creating-a-layout-component)
    - [8. Starting Implementation of The Burger Builder Container](#8-starting-implementation-of-the-burger-builder-container)
    - [9. Adding a Dynamic Ingredient Component](#9-adding-a-dynamic-ingredient-component)
    - [10. Adding Prop Type Validation](#10-adding-prop-type-validation)
    - [11. Starting the Burger Component](#11-starting-the-burger-component)
    - [12. Outputting Burger Ingredients Dynamically](#12-outputting-burger-ingredients-dynamically)
    - [13. Calculating the Ingredient Sum Dynamically](#13-calculating-the-ingredient-sum-dynamically)
    - [14. Adding the Build Control Component](#14-adding-the-build-control-component)
    - [15. Outputting Multiple Build Controls](#15-outputting-multiple-build-controls)
    - [16. Connecting State to Build Controls](#16-connecting-state-to-build-controls)
    - [17. Removing Ingredients Safely](#17-removing-ingredients-safely)
    - [18. Displaying and Updating the Burger Price](#18-displaying-and-updating-the-burger-price)
    - [19. Adding the Order Button](#19-adding-the-order-button)
    - [20. Creating the Order Summary Modal](#20-creating-the-order-summary-modal)
    - [21. Showing & Hiding the Modal (with Animation!)](#21-showing--hiding-the-modal-with-animation)
    - [22. Implementing the Backdrop Component](#22-implementing-the-backdrop-component)
    - [23. Adding a Custom Button Component](#23-adding-a-custom-button-component)
    - [24. Implementing the Button Component](#24-implementing-the-button-component)
    - [25. Adding the Price to the Order Summary](#25-adding-the-price-to-the-order-summary)
    - [26. Adding a Toolbar](#26-adding-a-toolbar)
    - [27. Using a Logo in our Application](#27-using-a-logo-in-our-application)
    - [28. Adding Reusable Navigation Items](#28-adding-reusable-navigation-items)
    - [29. Creating a Responsive Sidedrawer](#29-creating-a-responsive-sidedrawer)
    - [30. Working on Responsive Adjustments](#30-working-on-responsive-adjustments)
    - [31. More about Responsive Adjustments](#31-more-about-responsive-adjustments)
    - [32. Reusing the Backdrop](#32-reusing-the-backdrop)
    - [33. Adding a Sidedrawer Toggle Button](#33-adding-a-sidedrawer-toggle-button)
    - [34. Adding a Hamburger Icon](#34-adding-a-hamburger-icon)
    - [35. Improving the App - Introduction](#35-improving-the-app---introduction)
    - [36. Prop Type Validation](#36-prop-type-validation)
    - [37. Improving Performance](#37-improving-performance)
    - [38. Using Component Lifecycle Methods](#38-using-component-lifecycle-methods)
    - [39. Changing the Folder Structure](#39-changing-the-folder-structure)
    - [40. Wrap Up](#40-wrap-up)
    - [41. Useful Resources & Links.html](#41-useful-resources--linkshtml)
  - [9. Reaching out to the Web (Http Ajax)](#9-reaching-out-to-the-web-http-ajax)
    - [1. Module Introduction](#1-module-introduction-6)
    - [](#)
    - [2. Understanding Http Requests in React](#2-understanding-http-requests-in-react)
    - [3. Understanding our Project and Introducing Axios](#3-understanding-our-project-and-introducing-axios)
    - [4. Creating a Http Request to GET Data](#4-creating-a-http-request-to-get-data)
    - [5. Rendering Fetched Data to the Screen](#5-rendering-fetched-data-to-the-screen)
    - [6. Transforming Data](#6-transforming-data)
    - [7. Making a Post Selectable](#7-making-a-post-selectable)
    - [8. Fetching Data on Update (without Creating Infinite Loops)](#8-fetching-data-on-update-without-creating-infinite-loops)
    - [9. POSTing Data to the Server](#9-posting-data-to-the-server)
    - [10. Sending a DELETE Request](#10-sending-a-delete-request)
    - [11. Fixing a Bug](#11-fixing-a-bug)
    - [12. Handling Errors Locally](#12-handling-errors-locally)
    - [13. Adding Interceptors to Execute Code Globally](#13-adding-interceptors-to-execute-code-globally)
    - [14. Removing Interceptors.html](#14-removing-interceptorshtml)
    - [15. Setting a Default Global Configuration for Axios](#15-setting-a-default-global-configuration-for-axios)
    - [16. Creating and Using Axios Instances](#16-creating-and-using-axios-instances)
    - [17. Wrap Up](#17-wrap-up)
    - [18. Useful Resources & Links.html](#18-useful-resources--linkshtml)
  - [10. Burger Builder Project Accessing a Server](#10-burger-builder-project-accessing-a-server)
    - [1. Module Introduction](#1-module-introduction-7)
    - [2. Firebase & The Right Database.html](#2-firebase--the-right-databasehtml)
    - [3. Creating the Firebase Project](#3-creating-the-firebase-project)
    - [4. Creating the Axios Instance](#4-creating-the-axios-instance)
    - [5. Sending a POST Request](#5-sending-a-post-request)
    - [6. Displaying a Spinner while Sending a Request](#6-displaying-a-spinner-while-sending-a-request)
    - [7. Handling Errors](#7-handling-errors)
    - [8. Retrieving Data from the Backend](#8-retrieving-data-from-the-backend)
    - [9. Removing Old Interceptors](#9-removing-old-interceptors)
    - [10. Useful Resources & Links.html](#10-useful-resources--linkshtml-1)
  - [11. Multi-Page-Feeling in a Single-Page-App Routing](#11-multi-page-feeling-in-a-single-page-app-routing)
    - [1. Module Introduction](#1-module-introduction-8)
    - [2. Routing and SPAs](#2-routing-and-spas)
    - [3. Setting Up Links](#3-setting-up-links)
    - [4. Setting Up the Router Package](#4-setting-up-the-router-package)
    - [5. react-router vs react-router-dom.html](#5-react-router-vs-react-router-domhtml)
    - [6. Preparing the Project For Routing](#6-preparing-the-project-for-routing)
    - [7. Setting Up and Rendering Routes](#7-setting-up-and-rendering-routes)
    - [8. Rendering Components for Routes](#8-rendering-components-for-routes)
    - [9. Switching Between Pages](#9-switching-between-pages)
    - [10. Using Links to Switch Pages](#10-using-links-to-switch-pages)
    - [11. Using Routing-Related Props](#11-using-routing-related-props)
    - [12. The withRouter HOC & Route Props](#12-the-withrouter-hoc--route-props)
    - [13. Absolute vs Relative Paths](#13-absolute-vs-relative-paths)
    - [14. Absolute vs Relative Paths (Article).html](#14-absolute-vs-relative-paths-articlehtml)
      - [**Absolute Paths**](#absolute-paths)
      - [**Relative Paths**](#relative-paths)
    - [15. Styling the Active Route](#15-styling-the-active-route)
    - [16. Passing Route Parameters](#16-passing-route-parameters)
    - [17. Extracting Route Parameters](#17-extracting-route-parameters)
    - [18. Parsing Query Parameters & the Fragment.html](#18-parsing-query-parameters--the-fragmenthtml)
      - [**Query Params:**](#query-params)
      - [**Fragment:**](#fragment)
    - [19. Using Switch to Load a Single Route](#19-using-switch-to-load-a-single-route)
    - [2.1 routing-learning-card.pdf.pdf](#21-routing-learning-cardpdfpdf)
    - [20. Navigating Programmatically](#20-navigating-programmatically)
    - [21. Additional Information Regarding Active Links](#21-additional-information-regarding-active-links)
    - [22. Understanding Nested Routes](#22-understanding-nested-routes)
    - [23. Creating Dynamic Nested Routes](#23-creating-dynamic-nested-routes)
    - [24. Redirecting Requests](#24-redirecting-requests)
    - [25. Conditional Redirects](#25-conditional-redirects)
    - [26. Using the History Prop to Redirect (Replace)](#26-using-the-history-prop-to-redirect-replace)
    - [27. Working with Guards](#27-working-with-guards)
    - [28. Handling the 404 Case (Unknown Routes)](#28-handling-the-404-case-unknown-routes)
    - [29. Loading Routes Lazily](#29-loading-routes-lazily)
    - [30. Lazy Loading with React Suspense (16.6)](#30-lazy-loading-with-react-suspense-166)
    - [31. Routing and Server Deployment](#31-routing-and-server-deployment)
    - [32. Time to Practice - Routing.html](#32-time-to-practice---routinghtml)
    - [33. Wrap Up](#33-wrap-up)
    - [34. Useful Resources & Links.html](#34-useful-resources--linkshtml)
  - [12. Adding Routing to our Burger Project](#12-adding-routing-to-our-burger-project)
    - [1. Module Introduction](#1-module-introduction-9)
    - [](#-1)
    - [2. Building the Checkout Container](#2-building-the-checkout-container)
    - [3. Setting Up Routing & Routes](#3-setting-up-routing--routes)
    - [4. Navigating to the Checkout Page](#4-navigating-to-the-checkout-page)
    - [5. Navigating Back & To Next Page](#5-navigating-back--to-next-page)
    - [6. Passing Ingredients via Query Params](#6-passing-ingredients-via-query-params)
    - [7. Navigating to the Contact Data Component](#7-navigating-to-the-contact-data-component)
    - [8. Order Submission & Passing Data Between Pages](#8-order-submission--passing-data-between-pages)
    - [9. Adding an Orders Page](#9-adding-an-orders-page)
    - [10. Implementing Navigation Links](#10-implementing-navigation-links)
    - [11. Fetching Orders](#11-fetching-orders)
    - [12. Outputting the Orders](#12-outputting-the-orders)
    - [13. Wrap Up](#13-wrap-up)
    - [14. Useful Resources & Links.html](#14-useful-resources--linkshtml)
  - [13. Forms and Form Validation](#13-forms-and-form-validation)
    - [1. Module Introduction](#1-module-introduction-10)
    - [](#-2)
    - [2. Analyzing the App](#2-analyzing-the-app)
    - [3. Creating a Custom Dynamic Input Component](#3-creating-a-custom-dynamic-input-component)
    - [4. Setting Up a JS Config for the Form](#4-setting-up-a-js-config-for-the-form)
    - [5. Dynamically Create Inputs based on JS Config](#5-dynamically-create-inputs-based-on-js-config)
    - [6. Adding a Dropdown Component](#6-adding-a-dropdown-component)
    - [7. Handling User Input](#7-handling-user-input)
    - [8. Handling Form Submission](#8-handling-form-submission)
    - [9. Adding Custom Form Validation](#9-adding-custom-form-validation)
    - [10. Fixing a Common Validation Gotcha](#10-fixing-a-common-validation-gotcha)
    - [11. Adding Validation Feedback](#11-adding-validation-feedback)
    - [12. Improving Visual Feedback](#12-improving-visual-feedback)
    - [13. Showing Error Messages.html](#13-showing-error-messageshtml)
    - [14. Handling Overall Form Validity](#14-handling-overall-form-validity)
    - [15. Working on an Error](#15-working-on-an-error)
    - [16. Fixing a Bug](#16-fixing-a-bug)
    - [17. Useful Resources & Links.html](#17-useful-resources--linkshtml)
  - [14. Redux](#14-redux)
    - [1. Module Introduction](#1-module-introduction-11)
    - [2. Understanding State](#2-understanding-state)
    - [3. The Complexity of Managing State](#3-the-complexity-of-managing-state)
    - [4. Understanding the Redux Flow](#4-understanding-the-redux-flow)
    - [4.1 redux-learning-card.pdf.pdf](#41-redux-learning-cardpdfpdf)
    - [5. Setting Up Reducer and Store](#5-setting-up-reducer-and-store)
    - [6. Dispatching Actions](#6-dispatching-actions)
    - [7. Adding Subscriptions](#7-adding-subscriptions)
    - [8. Connecting React to Redux](#8-connecting-react-to-redux)
    - [9. Connecting the Store to React](#9-connecting-the-store-to-react)
    - [10. Dispatching Actions from within the Component](#10-dispatching-actions-from-within-the-component)
    - [11. Time to Practice - Dispatching Actions.html](#11-time-to-practice---dispatching-actionshtml)
    - [12. Passing and Retrieving Data with Action](#12-passing-and-retrieving-data-with-action)
    - [13. Switch-Case in the Reducer](#13-switch-case-in-the-reducer)
    - [14. Updating State Immutably](#14-updating-state-immutably)
    - [15. Updating Arrays Immutably](#15-updating-arrays-immutably)
    - [16. Immutable Update Patterns.html](#16-immutable-update-patternshtml)
  - [Updating Nested Objects](#updating-nested-objects)
        - [Common Mistake #1: New variables that point to the same objects](#common-mistake-1-new-variables-that-point-to-the-same-objects)
        - [Common Mistake #2: Only making a shallow copy of one level](#common-mistake-2-only-making-a-shallow-copy-of-one-level)
        - [Correct Approach: Copying All Levels of Nested Data](#correct-approach-copying-all-levels-of-nested-data)
  - [Inserting and Removing Items in Arrays](#inserting-and-removing-items-in-arrays)
  - [Updating an Item in an Array](#updating-an-item-in-an-array)
  - [Immutable Update Utility Libraries](#immutable-update-utility-libraries)
    - [17. Outsourcing Action Types](#17-outsourcing-action-types)
    - [18. Combining Multiple Reducers](#18-combining-multiple-reducers)
    - [19. Understanding State Types](#19-understanding-state-types)
    - [19.1 state-types.pdf.pdf](#191-state-typespdfpdf)
    - [20. Time to Practice - Redux Basics.html](#20-time-to-practice---redux-basicshtml)
    - [21. [OPTIONAL] Assignment Solution](#21-optional-assignment-solution)
    - [22. Combining Local UI State and Redux](#22-combining-local-ui-state-and-redux)
    - [23. Wrap Up](#23-wrap-up)
    - [24. Useful Resources & Links.html](#24-useful-resources--linkshtml)
  - [15. Adding Redux to our Project](#15-adding-redux-to-our-project)
    - [1. Module Introduction](#1-module-introduction-12)
    - [2. Installing Redux and React Redux](#2-installing-redux-and-react-redux)
    - [3. Basic Redux Setup](#3-basic-redux-setup)
    - [4. Finishing the Reducer for Ingredients](#4-finishing-the-reducer-for-ingredients)
    - [5. Connecting the Burger Builder Container to our Store](#5-connecting-the-burger-builder-container-to-our-store)
    - [6. Working on the Total Price Calculation](#6-working-on-the-total-price-calculation)
    - [7. Redux & UI State](#7-redux--ui-state)
    - [8. Adjusting Checkout and Contact Data](#8-adjusting-checkout-and-contact-data)
    - [9. Wrap Up](#9-wrap-up)
    - [10. Useful Resources & Links.html](#10-useful-resources--linkshtml-2)
  - [16. Redux Advanced](#16-redux-advanced)
    - [1. Module Introduction](#1-module-introduction-13)
    - [2. Adding Middleware](#2-adding-middleware)
    - [3. Using the Redux Devtools](#3-using-the-redux-devtools)
    - [4. Executing Asynchronous Code - Introduction](#4-executing-asynchronous-code---introduction)
    - [5. Introducing Action Creators](#5-introducing-action-creators)
    - [6. Action Creators & Async Code](#6-action-creators--async-code)
    - [7. Handling Asynchronous Code](#7-handling-asynchronous-code)
    - [8. Restructuring Actions](#8-restructuring-actions)
    - [9. Where to Put Data Transforming Logic](#9-where-to-put-data-transforming-logic)
    - [10. Using Action Creators and Get State](#10-using-action-creators-and-get-state)
    - [11. Using Utility Functions](#11-using-utility-functions)
    - [12. A Leaner Switch Case Statement](#12-a-leaner-switch-case-statement)
    - [13. An Alternative Folder Structure](#13-an-alternative-folder-structure)
    - [14. Diving Much Deeper](#14-diving-much-deeper)
    - [15. Wrap Up](#15-wrap-up)
    - [16. Useful Resources & Links.html](#16-useful-resources--linkshtml)
  - [17. Redux Advanced Burger Project](#17-redux-advanced-burger-project)
    - [1. Module Introduction](#1-module-introduction-14)
    - [2. Installing the Redux Devtools](#2-installing-the-redux-devtools)
    - [3. Preparing the Folder Structure](#3-preparing-the-folder-structure)
    - [4. Creating Action Creators](#4-creating-action-creators)
    - [5. Executing Asynchronous Code](#5-executing-asynchronous-code)
    - [6. Fetching Ingredients Asynchronously](#6-fetching-ingredients-asynchronously)
    - [7. Initializing Ingredients in the BurgerBuilder](#7-initializing-ingredients-in-the-burgerbuilder)
    - [8. Changing the Order of our Ingredients Manually](#8-changing-the-order-of-our-ingredients-manually)
    - [9. Adding Order Actions](#9-adding-order-actions)
    - [10. Connecting Contact Data Container & Actions](#10-connecting-contact-data-container--actions)
    - [11. The Order Reducer](#11-the-order-reducer)
    - [12. Working on Order Actions](#12-working-on-order-actions)
    - [13. Redirect to Improve UX](#13-redirect-to-improve-ux)
    - [14. Combining Reducers](#14-combining-reducers)
    - [15. Handling Purchases & Updating the UI](#15-handling-purchases--updating-the-ui)
    - [16. Resetting the Price after Purchases](#16-resetting-the-price-after-purchases)
    - [17. Fetching Orders (via Redux)](#17-fetching-orders-via-redux)
    - [18. Checking our Implemented Functionalities](#18-checking-our-implemented-functionalities)
    - [19. Refactoring Reducers](#19-refactoring-reducers)
    - [20. Refactoring Reducers Continued](#20-refactoring-reducers-continued)
    - [21. Wrap Up](#21-wrap-up)
    - [22. Useful Resources & Links.html](#22-useful-resources--linkshtml)
  - [18. Adding Authentication to our Burger Project](#18-adding-authentication-to-our-burger-project)
    - [1. Module Introduction](#1-module-introduction-15)
    - [10. Logging Users Out](#10-logging-users-out)
    - [11. Accessing Protected Resources](#11-accessing-protected-resources)
    - [12. Updating the UI Depending on Auth State](#12-updating-the-ui-depending-on-auth-state)
    - [13. Adding a Logout Link](#13-adding-a-logout-link)
    - [14. Forwarding Unauthenticated Users](#14-forwarding-unauthenticated-users)
    - [15. Redirecting the User to the Checkout Page](#15-redirecting-the-user-to-the-checkout-page)
    - [16. Persistent Auth State with localStorage](#16-persistent-auth-state-with-localstorage)
    - [17. Fixing Connect + Routing Errors](#17-fixing-connect--routing-errors)
    - [18. Ensuring App Security](#18-ensuring-app-security)
    - [19. Guarding Routes](#19-guarding-routes)
    - [2. Understanding Authentication in Single Page Applications](#2-understanding-authentication-in-single-page-applications)
    - [20. Displaying User Specific Orders](#20-displaying-user-specific-orders)
    - [21. Wrap Up](#21-wrap-up-1)
    - [22. Useful Resources & Links.html](#22-useful-resources--linkshtml-1)
    - [3. Required App Adjustments](#3-required-app-adjustments)
    - [4. Adding an Auth Form](#4-adding-an-auth-form)
    - [5. Adding Actions](#5-adding-actions)
    - [6. Getting a Token from the Backend](#6-getting-a-token-from-the-backend)
    - [7. Adding Sign-In](#7-adding-sign-in)
    - [8. Storing the Token](#8-storing-the-token)
    - [9. Adding a Spinner](#9-adding-a-spinner)
  - [19. Improving our Burger Project](#19-improving-our-burger-project)
    - [1. Module Introduction](#1-module-introduction-16)
    - [2. Fixing the Redirect to the Frontpage](#2-fixing-the-redirect-to-the-frontpage)
    - [3. Using updateObject in the Entire App](#3-using-updateobject-in-the-entire-app)
    - [4. Sharing the Validation Method](#4-sharing-the-validation-method)
    - [5. Using Environment Variables](#5-using-environment-variables)
    - [6. Removing console.log()s](#6-removing-consolelogs)
    - [7. Adding Lazy Loading](#7-adding-lazy-loading)
    - [8. Wrap Up](#8-wrap-up)
    - [9. Useful Resources & Links.html](#9-useful-resources--linkshtml)
  - [20. Testing](#20-testing)
    - [1. Module Introduction](#1-module-introduction-17)
    - [10. How to Test Redux](#10-how-to-test-redux)
    - [11. Wrap Up](#11-wrap-up-1)
    - [12. Useful Resources & Links.html](#12-useful-resources--linkshtml-1)
    - [2. What is Testing](#2-what-is-testing)
    - [3. Required Testing Tools](#3-required-testing-tools)
    - [4. What To Test](#4-what-to-test)
    - [5. Writing our First Test](#5-writing-our-first-test)
    - [6. Testing Components Continued](#6-testing-components-continued)
    - [7. Jest and Enzyme Documentations](#7-jest-and-enzyme-documentations)
    - [8. Testing Components Correctly](#8-testing-components-correctly)
    - [9. Testing Containers](#9-testing-containers)
  - [21. Deploying the App to the Web](#21-deploying-the-app-to-the-web)
    - [1. Module Introduction](#1-module-introduction-18)
    - [2. Deployment Steps](#2-deployment-steps)
    - [3. Building the Project](#3-building-the-project)
    - [4. Example Deploying on Firebase](#4-example-deploying-on-firebase)
    - [5. Wrap Up](#5-wrap-up)
    - [6. Useful Resources & Links.html](#6-useful-resources--linkshtml)
  - [22. Bonus Working with Webpack](#22-bonus-working-with-webpack)
    - [1. Module Introduction](#1-module-introduction-19)
    - [10. Setting Up the Basic Webpack Config](#10-setting-up-the-basic-webpack-config)
    - [11. Adding File Rules](#11-adding-file-rules)
    - [12. Introducing Babel](#12-introducing-babel)
    - [13. Adding CSS File Support](#13-adding-css-file-support)
    - [14. Creating Rules for Images](#14-creating-rules-for-images)
    - [15. Lazy Loading](#15-lazy-loading)
    - [16. Injecting the Script into the index.html File](#16-injecting-the-script-into-the-indexhtml-file)
    - [16. Injecting the Script into the index.html File.vtt](#16-injecting-the-script-into-the-indexhtml-filevtt)
    - [17. Creating the Production Workflow](#17-creating-the-production-workflow)
    - [18. Wrap Up](#18-wrap-up)
    - [19. Adding babel-polyfill.html](#19-adding-babel-polyfillhtml)
    - [2. Important Use Webpack 3.html](#2-important-use-webpack-3html)
    - [20. Useful Resources & Links.html](#20-useful-resources--linkshtml)
    - [3. Introducing Webpack](#3-introducing-webpack)
    - [4. How Webpack works](#4-how-webpack-works)
    - [5. Basic Workflow Requirements](#5-basic-workflow-requirements)
    - [6. Project & npm Setup](#6-project--npm-setup)
    - [7. Creating a Basic Folder & File Structure](#7-creating-a-basic-folder--file-structure)
    - [8. Creating the Basic React Application](#8-creating-the-basic-react-application)
    - [9. Installing Production Dependencies](#9-installing-production-dependencies)
  - [23. Bonus Next.js](#23-bonus-nextjs)
    - [1. Module Introduction](#1-module-introduction-20)
    - [10. Useful Resources & Links.html](#10-useful-resources--linkshtml-3)
    - [2. Understanding Server Side Rendering](#2-understanding-server-side-rendering)
    - [3. Setting Up a Project](#3-setting-up-a-project)
    - [4. Understanding the Basics](#4-understanding-the-basics)
    - [5. Next.js & Components & Pages](#5-nextjs--components--pages)
    - [6. Styling our App in Next.js](#6-styling-our-app-in-nextjs)
    - [7. Handling (404) Errors](#7-handling-404-errors)
    - [8. A Special Lifecycle Hook](#8-a-special-lifecycle-hook)
    - [9. Deploying our App](#9-deploying-our-app)
  - [24. Bonus Animations in React Apps](#24-bonus-animations-in-react-apps)
    - [1. Module Introduction](#1-module-introduction-21)
    - [10. Transition Events](#10-transition-events)
    - [11. The CSSTransition Component](#11-the-csstransition-component)
    - [12. Customizing CSS Classnames](#12-customizing-css-classnames)
    - [13. Animating Lists](#13-animating-lists)
    - [14. Alternative Animation Packages](#14-alternative-animation-packages)
    - [15. Wrap Up](#15-wrap-up-1)
    - [16. Useful Resources & Links.html](#16-useful-resources--linkshtml-1)
    - [2. Preparing the Demo Project](#2-preparing-the-demo-project)
    - [3. Using CSS Transitions](#3-using-css-transitions)
    - [4. Using CSS Animations](#4-using-css-animations)
    - [5. CSS Transition & Animations Limitations](#5-css-transition--animations-limitations)
    - [6. Using ReactTransitionGroup](#6-using-reacttransitiongroup)
    - [7. Using the Transition Component](#7-using-the-transition-component)
    - [8. Wrapping the Transition Component](#8-wrapping-the-transition-component)
    - [9. Animation Timings](#9-animation-timings)
  - [25. Bonus A Brief Introduction to Redux Saga](#25-bonus-a-brief-introduction-to-redux-saga)
    - [1. Module Introduction](#1-module-introduction-22)
    - [10. Moving the Orders Side Effects into Sagas](#10-moving-the-orders-side-effects-into-sagas)
    - [11. Why Sagas can be Helpful](#11-why-sagas-can-be-helpful)
    - [12. Diving Deeper into Sagas](#12-diving-deeper-into-sagas)
    - [13. Useful Resources & Links.html](#13-useful-resources--linkshtml-1)
    - [2. Installing Redux Saga](#2-installing-redux-saga)
    - [3. Creating our First Saga](#3-creating-our-first-saga)
    - [4. Hooking the Saga Up (to the Store and Actions)](#4-hooking-the-saga-up-to-the-store-and-actions)
    - [5. Moving Logic from the Action Creator to a Saga](#5-moving-logic-from-the-action-creator-to-a-saga)
    - [6. Moving More Logic Into Sagas](#6-moving-more-logic-into-sagas)
    - [7. Handling Authentication with a Saga](#7-handling-authentication-with-a-saga)
    - [8. Handling Auto-Sign-In with a Saga](#8-handling-auto-sign-in-with-a-saga)
    - [9. Moving the BurgerBuilder Side Effects into a Saga](#9-moving-the-burgerbuilder-side-effects-into-a-saga)
  - [26. React Hooks](#26-react-hooks)
    - [1. Introduction](#1-introduction-1)
    - [10. The useEffect() Hook](#10-the-useeffect-hook)
    - [11. Controlling Effect Execution](#11-controlling-effect-execution)
    - [12. Effect Cleanup](#12-effect-cleanup)
    - [13. Converting the App Component](#13-converting-the-app-component)
    - [14. The useContext() Hook](#14-the-usecontext-hook)
    - [15. State and Effects Gotchas](#15-state-and-effects-gotchas)
    - [16. The useReducer() Hook](#16-the-usereducer-hook)
    - [17. useReducer() vs useState()](#17-usereducer-vs-usestate)
    - [18. Working with References and useRef()](#18-working-with-references-and-useref)
    - [19. Preparing & Optimizing](#19-preparing--optimizing)
    - [2. What are Hooks](#2-what-are-hooks)
    - [20. Avoiding Unnecessary Re-Rendering](#20-avoiding-unnecessary-re-rendering)
    - [21. How to think about Functional Components with Hooks](#21-how-to-think-about-functional-components-with-hooks)
    - [22. Creating a Custom Hook](#22-creating-a-custom-hook)
    - [23. Wrap Up](#23-wrap-up-1)
    - [3. Enabling Hooks](#3-enabling-hooks)
    - [4. The useState() Hook](#4-the-usestate-hook)
    - [5. Adding Array Destructuring](#5-adding-array-destructuring)
    - [6. Using Multiple State](#6-using-multiple-state)
    - [7. Using One State Instead](#7-using-one-state-instead)
    - [8. The Rules of Hooks](#8-the-rules-of-hooks)
    - [9. Sending Data via Http](#9-sending-data-via-http)
  - [27. Using Hooks in the Burger Builder](#27-using-hooks-in-the-burger-builder)
    - [1. Introduction](#1-introduction-2)
    - [10. Using React.memo() & More!](#10-using-reactmemo--more)
    - [11. Adding a Custom Error Handling Hook](#11-adding-a-custom-error-handling-hook)
    - [12. Wrap Up](#12-wrap-up)
    - [13. Useful Resources & Links.html](#13-useful-resources--linkshtml-2)
    - [2. Converting App](#2-converting-app)
    - [3. Routing with React.lazy()](#3-routing-with-reactlazy)
    - [4. Converting the Layout Component](#4-converting-the-layout-component)
    - [5. Converting withErrorHandler HOC](#5-converting-witherrorhandler-hoc)
    - [6. Adjusting the Order & Checkout Containers](#6-adjusting-the-order--checkout-containers)
    - [7. Add Hooks to ContactData](#7-add-hooks-to-contactdata)
    - [8. Converting the BurgerBuilder Container](#8-converting-the-burgerbuilder-container)
    - [9. Adjusting Auth & Logout Components](#9-adjusting-auth--logout-components)
  - [28. Bonus Building the Burger CSS](#28-bonus-building-the-burger-css)
    - [1. Building the Burger CSS Code](#1-building-the-burger-css-code)
    - [1.1 burger-css.pdf.pdf](#11-burger-csspdfpdf)
  - [29. Next Steps and Course Roundup](#29-next-steps-and-course-roundup)
    - [1. Module Introduction](#1-module-introduction-23)
    - [10. Bonus More Content!.html](#10-bonus-more-contenthtml)
    - [2. React Rocks! Where to find more Examples](#2-react-rocks-where-to-find-more-examples)
    - [3. More Inspiration Real-World Projects Built with React](#3-more-inspiration-real-world-projects-built-with-react)
    - [4. Static React Apps with Gatsby.js](#4-static-react-apps-with-gatsbyjs)
    - [5. Introducing React Native](#5-introducing-react-native)
    - [6. Component Libraries (Example Material UI)](#6-component-libraries-example-material-ui)
    - [7. Smaller Apps with Preact](#7-smaller-apps-with-preact)
    - [8. Comparing React with Preact](#8-comparing-react-with-preact)
    - [9. Congratulations](#9-congratulations)
- [Tìm hiểu về Hooks trong React](#t%c3%acm-hi%e1%bb%83u-v%e1%bb%81-hooks-trong-react)
  - [1. Mở đầu](#1-m%e1%bb%9f-%c4%91%e1%ba%a7u)
  - [2. React Hook](#2-react-hook)
    - [a. useState](#a-usestate)
    - [b. useReducer](#b-usereducer)
    - [c. useEffect](#c-useeffect)

C:\Users\phuong\AppData\Local\Programs\Python\Python37\python.exe D:/Source/Source_All/python/Test/readfile.py
======== name dir ========

# React - The Complete Guide (incl Hooks, React Router, Redux)

## 1. Getting Started

https://www.udemy.com/course/react-the-complete-guide-incl-redux/

### 1. Introduction

https://academind.com/learn/javascript/reference-vs-primitive-values/

### 2. What is React

React is a js library for building user interface (include many Components)

Run on browser => ngay lập tức xảy ra trên browser mà không phải đợi server return 

Chia thành nhiều components => dễ bảo trì, tái SD, quản lí

### 2.1 components-learning-card.pdf.pdf

### 3. Real-World SPAs & React Web Apps

### 4. Writing our First React Code

You shouldn't need it right now - but in case you ever want to dive in, here's the official React documenation: https://reactjs.org/

Had issues with the Codepen demo? Here's the finished source code: https://codepen.io/anon/pen/MELQaQ

Xem link codepen ở trên:

Vào tab js: ấn setting và search react, react-dom

![image-20200214212259617](./react-maximilan.assets/image-20200214212259617.png)

JavaScript Preprocessor: chọn babel

Babel là một công cụ chuyển đổi mã lệnh JavaScript hay JavaScript transpiler, được dùng với mục đích chuyển đổi mã lệnh JavaScript được viết dựa trên tiêu chuẩn ECMAScript phiên bản mới về phiên bản cũ hơn trước đó chạy trên broswer.

![image-20200214212557967](./react-maximilan.assets/image-20200214212557967.png)

```js
function Person(props) {
  return (
    <div className="person">
      <h1>{props.name}</h1>
      <p>Your Age: {props.age}</p>
    </div>
  );
}

var app = (
  <div>
    <Person name="Max" age="28" />
    <Person name="Manu" age="29" />
  </div>
);

// allow render js func as a component to a real DOM
ReactDOM.render(app, document.querySelector("#app"));
```

### 5. Why Should we Choose React

![](./root/img/2020-01-19-14-56-40.png)

### 6. React Alternatives

### 7. Understanding Single Page Applications and Multi Page Applications

![](./root/img/2020-01-19-15-07-15.png)

### 8. Course Outline

![](./root/img/2020-01-19-15-09-27.png)

### 9. How to get the Most out of This Course

### 10. Useful Resources & Links.html

You shouldn't need it right now - but in case you ever want to dive in, here's the official React documenation: https://reactjs.org/

Had issues with the Codepen demo? Here's the finished source code: https://codepen.io/anon/pen/MELQaQ

## 2. Refreshing Next Generation JavaScript (Optional)

### 1. Module Introduction

### 2. Understanding let and const

**`let`** allows you to declare variables that are limited to a scope of a [`block`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/statements/block) statement, or expression on which it is used, unlike the [`var`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/statements/var) keyword, which defines a variable globally, or locally to an entire function regardless of block scope. The other difference between [`var`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/statements/var) and `let` is that the latter is initialized to a value only when a [parser evaluates it (see below)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone).

At the top level of programs and functions, **`let`**, unlike **`var`**, does not create a property on the global object. For example:

```js
var x = 'global';
let y = 'global';
console.log(this.x); // "global"
console.log(this.y); // undefined
```

### 3. Arrow Functions

### 4. Exports and Imports

![](./root/img/2020-01-19-15-38-40.png)
![](./root/img/2020-01-19-15-37-23.png)

### 5. Understanding Classes

https://jsbin.com/komifafifu/edit?js,console

### 6. Classes, Properties and Methods

![image-20200214220115303](./react-maximilan.assets/image-20200214220115303.png)

![image-20200214220350341](./react-maximilan.assets/image-20200214220350341.png)  

Class kế thừa trong constructor phải có super(); nếu không sẽ báo lỗi

![](./root/img/2020-01-19-15-50-03.png)  

Cú pháp mới không cần constructor:

![image-20200214220558354](./react-maximilan.assets/image-20200214220558354.png)

### 7. The Spread & Rest Operator

![](./root/img/2020-01-19-15-53-42.png)  

![image-20200214220834325](./react-maximilan.assets/image-20200214220834325.png)

```js
const abc = (...args) => {
  return args.filter(el => el === 1);
};
```

### 8. Destructuring

![](./root/img/2020-01-19-16-00-23.png)  

![image-20200214221128199](./react-maximilan.assets/image-20200214221128199.png)

### 9. Reference and Primitive Types Refresher

Copy object use rest operator.

Nếu sử dụng copy con trỏ khi thay đổi giá trị của person nó sẽ thay đổi theo

![image-20200214221319851](./react-maximilan.assets/image-20200214221319851.png)

### 10. Refreshing Array Functions

```js
const num = [1, 2, 3];
const doubleArr = num.map((x) => {
  return 2 * x;
});
```

### 11. Wrap Up

reduce https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce

### 12. Next-Gen JavaScript - Summary.html

In this module, I provided a brief introduction into some core next-gen JavaScript features, of course focusing on the ones you'll see the most in this course. Here's a quick summary!

#### **let & const**

Read more about `let` : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let

Read more about `const` : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const

`let` and `const` basically replace `var` . You use `let` instead of `var` and `const` instead of `var` if you plan on never re-assigning this "variable" (effectively turning it into a constant therefore).

#### **ES6 Arrow Functions**

Read more: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions

Arrow functions are a different way of creating functions in JavaScript. Besides a shorter syntax, they offer advantages when it comes to keeping the scope of the `this` keyword (see [here](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions#No_binding_of_this)).

Arrow function syntax may look strange but it's actually simple.

```
function callMe(name) { 
    console.log(name);
}
```

which you could also write as:

```
const callMe = function(name) { 
    console.log(name);
}
```

becomes: 

```
const callMe = (name) => { 
    console.log(name);
}
```

**Important:** 

When having **no arguments**, you have to use empty parentheses in the function declaration:

```
const callMe = () => { 
    console.log('Max!');
}
```

When having **exactly one argument**, you may omit the parentheses:

```
const callMe = name => { 
    console.log(name);
}
```

When **just returning a value**, you can use the following shortcut:

```
const returnMe = name => name
```

That's equal to:

```
const returnMe = name => { 
    return name;
}
```

#### **Exports & Imports**

In React projects (and actually in all modern JavaScript projects), you split your code across multiple JavaScript files - so-called modules. You do this, to keep each file/ module focused and manageable.

To still access functionality in another file, you need `export` (to make it available) and `import` (to get access) statements.

You got two different types of exports: **default** (unnamed) and **named** exports:

**default** => `export default ...;` 

**named** => `export const someData = ...;` 

You can import **default exports** like this:

```
import someNameOfYourChoice from './path/to/file.js';
```

Surprisingly, `someNameOfYourChoice` is totally up to you.

**Named exports** have to be imported by their name:

```
import { someData } from './path/to/file.js';
```

A file can only contain one default and an unlimited amount of named exports. You can also mix the one default with any amount of named exports in one and the same file.

When importing **named exports**, you can also import all named exports at once with the following syntax:

```
import * as upToYou from './path/to/file.js';
```

`upToYou` is - well - up to you and simply bundles all exported variables/functions in one JavaScript object. For example, if you `export const someData = ...` (`/path/to/file.js` ) you can access it on `upToYou` like this: `upToYou.someData` .

#### **Classes**

Classes are a feature which basically replace constructor functions and prototypes. You can define blueprints for JavaScript objects with them. 

Like this:

```
class Person {
    constructor () {
        this.name = 'Max';
    }
}

const person = new Person();
console.log(person.name); // prints 'Max'
```

In the above example, not only the class but also a property of that class (=> `name` ) is defined. The syntax you see there, is the "old" syntax for defining properties. In modern JavaScript projects (as the one used in this course), you can use the following, more convenient way of defining class properties:

```
class Person {
    name = 'Max';
}

const person = new Person();
console.log(person.name); // prints 'Max'
```

You can also define methods. Either like this:

```
class Person {
    name = 'Max';
    printMyName () {
        console.log(this.name); // this is required to refer to the class!
    }
}

const person = new Person();
person.printMyName();
```

Or like this:

```
class Person {
    name = 'Max';
    printMyName = () => {
        console.log(this.name);
    }
}

const person = new Person();
person.printMyName();
```

The second approach has the same advantage as all arrow functions have: The `this` keyword doesn't change its reference.

You can also use **inheritance** when using classes:

```
class Human {
    species = 'human';
}

class Person extends Human {
    name = 'Max';
    printMyName = () => {
        console.log(this.name);
    }
}

const person = new Person();
person.printMyName();
console.log(person.species); // prints 'human'
```

#### **Spread & Rest Operator**

The spread and rest operators actually use the same syntax: `...` 

Yes, that is the operator - just three dots. It's usage determines whether you're using it as the spread or rest operator.

**Using the Spread Operator:**

The spread operator allows you to pull elements out of an array (=> split the array into a list of its elements) or pull the properties out of an object. Here are two examples:

```
const oldArray = [1, 2, 3];
const newArray = [...oldArray, 4, 5]; // This now is [1, 2, 3, 4, 5];
```

Here's the spread operator used on an object:

```
const oldObject = {
    name: 'Max'
};
const newObject = {
    ...oldObject,
    age: 28
};
```

`newObject` would then be

```
{
    name: 'Max',
    age: 28
}
```

The spread operator is extremely useful for cloning arrays and objects. Since both are [reference types (and not primitives)](https://youtu.be/9ooYYRLdg_g), copying them safely (i.e. preventing future mutation of the copied original) can be tricky. With the spread operator you have an easy way of creating a (shallow!) clone of the object or array. 

#### **Destructuring**

Destructuring allows you to easily access the values of arrays or objects and assign them to variables.

Here's an example for an array:

```
const array = [1, 2, 3];
const [a, b] = array;
console.log(a); // prints 1
console.log(b); // prints 2
console.log(array); // prints [1, 2, 3]
```

And here for an object:

```
const myObj = {
    name: 'Max',
    age: 28
}
const {name} = myObj;
console.log(name); // prints 'Max'
console.log(age); // prints undefined
console.log(myObj); // prints {name: 'Max', age: 28}
```

Destructuring is very useful when working with function arguments. Consider this example:

```
const printName = (personObj) => {
    console.log(personObj.name);
}
printName({name: 'Max', age: 28}); // prints 'Max'
```

Here, we only want to print the name in the function but we pass a complete person object to the function. Of course this is no issue but it forces us to call personObj.name inside of our function. We can condense this code with destructuring:

```
const printName = ({name}) => {
    console.log(name);
}
printName({name: 'Max', age: 28}); // prints 'Max')
```

We get the same result as above but we save some code. By destructuring, we simply pull out the `name` property and store it in a variable/ argument named `name` which we then can use in the function body.

### 12.1 next-gen-js-summary.pdf.pdf

### 13. JS Array Functions.html

Not really next-gen JavaScript, but also important: JavaScript array functions like map() , filter() , reduce() etc.

You'll see me use them quite a bit since a lot of React concepts rely on working with arrays (in immutable ways).

The following page gives a good overview over the various methods you can use on the array prototype - feel free to click through them and refresh your knowledge as required: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array

Particularly important in this course are:

map() => https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map
find() => https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find
findIndex() => https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex
filter() => https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter
reduce() => https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce?v=b
concat() => https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat?v=b
slice() => https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice
splice() => https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice

## 3. Understanding the Base Features & Syntax

### 1. Module Introduction

### 2. The Build Workflow

![](./root/img/2020-01-19-16-31-14.png)

### 3. Using Create React App

```ts
npm install -g create-react-app
create-react-app my-app --scripts-version 1.1.5 // impact structure of project
// create-react-app my-app
cd my-app
npm start
```

Doi port tai file package.json

http://localhost:3000/

Default la 3000

```json
 "scripts": {
     // Add
    "start": "set port=4200 && react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
```

### 4. Understanding the Folder Structure

https://quoctuan.info/bai-02-cau-truc-ung-dung-co-trong-reactjs.1.2.html

![image-20200214225133840](./react-maximilan.assets/image-20200214225133840.png)

### 4.1 ide-setup.pdf.pdf

**Editor / IDE Setup**
My Setup
In this course, I use Microsoﬞ Visual Studio Code which is a great free-to-use Web Development IDE.
It’s a different IDE than Microsoﬞ Visual Studio - don’t mix them up. The laמּer is NOT free and also not as suited for JavaScript Web Development as Visual
Studio Code is.
If you just installed VS Code, it’s going to look different than in my videos. That’s because I’m using a different theme and icons. In general, you can install a lot
of free extensions for VS Code to customise it to your needs and requirements (both visually as well as from the functionality offered).
• Theme: Dark+ (default theme, no extension required)
• Icons: Material Icons (extension: hמּps://marketplace.visualstudio.com/
items?itemName=PKief.material-icon-theme)
Feel free to browse the extension marketplace for more useful extensions!
**Alternatives**
If you don’t want to use VS Code but also don’t have you favourite IDE/ editor,
here are the common alternatives:
• Webstorm: hמּps://www.jetbrains.com/webstorm/ (not free)
• Sublime Text: hמּps://www.sublimetext.com/ (free unlimited trial)
• Atom: hמּps://atom.io/ (free)

### 5. Understanding Component Basics

### 5.1 components-learning-card.pdf.pdf

### 6. Understanding JSX

Comment đoạn trên và thêm React.createElement để test

App.js

```js
import React, { Component } from "react";
import logo from "./logo.svg";
import "./App.css";

class App extends Component {
  render() {
    // return (
    // <div className="App">
    //   <h1 className="App-title">Welcome to React</h1>
    // </div>
    // );

    // work behind the sence
    return React.createElement(
      "div",
      { className: "App" },
      React.createElement("h3", null, "Welcome to React")
    );
  }
}

export default App;

```



Ex: SD thay phần return html trong ham render de test

```js
import React from "react";
import ReactDOM from "react-dom";

const list = React.createElement(
  "div",
  {},
  React.createElement("h1", {}, "My favorite ice cream flavors"),
  React.createElement("ul", {}, [
    React.createElement("li", { class: "brown" }, "Chocolate"),
    React.createElement("li", { class: "white" }, "Vanilla"),
    React.createElement("li", { class: "yellow" }, "Banana")
  ])
);

ReactDOM.render(list, document.getElementById("global"));
```

### 7. JSX Restrictions

You can use JSX to write code html in .js file

- cannot use class to set css in file .js so you should replace it with "className"
- Wrap everything in a root tag: div

### 8. Creating a Functional Component

Create class Person in folder Person 

```js
import React from "react";

const person = props => {
  return (
    <div>
      <p>
        I'm {props.name} and I am {props.age} years old!
      </p>
      <p>{props.children}</p>
    </div>
  );
};

export default person;
```

App.js

```js
import React, { Component } from "react";
import "./App.css";
import Person from "./Person/Person";

class App extends Component {
  render() {
    return (
      <div className="App">
        <h1>Hi, I'm a React App</h1>
        <p>This is really working!</p>
        <Person name="Max" age="28" />
        <Person name="Manu" age="29">
          My Hobbies: Racing
        </Person>
        <Person name="Stephanie" age="26" />
      </div>
    );
    // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
  }
}

export default App;
```

Khi import có thể đặt bất cứ tên gì mà mình thích

### 9. Components & JSX Cheat Sheet.html

Components are the **core building block of React apps**. Actually, React really is just a library for creating components in its core.

A typical React app therefore could be depicted as a **component tree** - having one root component ("App") and then an potentially infinite amount of nested child components.

Each component needs to return/ render some **JSX** code - it defines which HTML code React should render to the real DOM in the end.

**JSX is NOT HTML** but it looks a lot like it. Differences can be seen when looking closely though (for example className in JSX vs class in "normal HTML"). JSX is just syntactic sugar for JavaScript, allowing you to write HTMLish code instead of nested React.createElement(...) calls.

When creating components, you have the choice between **two different ways:**

1. **Functional components** (also referred to as "presentational", "dumb" or "stateless" components - more about this later in the course) => `const cmp = () => { return some JSX }` (using ES6 arrow functions as shown here is recommended but optional)
2. **class-based components** (also referred to as "containers", "smart" or "stateful" components) => `class Cmp extends Component { render () { return some JSX } }` 

We'll of course dive into the difference throughout this course, you can already note that you should use 1) as often as possible though. It's the best-practice.

### 9.1 components.pdf.pdf

### 10. Working with Components & Re-Using Them

### 11. Outputting Dynamic Content

Write js code in `{}` in person.js file

### 12. Working with Props

Khi có code js cần xử lý thì đặt trong dấu {}; đây là cú pháp của JSX

Đối với class thì truy cập từ khóa props thông qua this.props

![](./root/img/2020-01-19-18-09-16.png)

### 12.1 props-learning-card.pdf.pdf

![image-20200214233020027](./react-maximilan.assets/image-20200214233020027.png)

### 13. Understanding the Children Property

props.children print value in the middle of tag: 

- ví dụ như My Hobbies: Racing

Ex: ` <Person name="Manu" age="29" >My Hobbies: Racing</Person>`

### 14. Understanding & Using State

State is managed inside the Component,  

Từ react 16.8 có react-hook

Thêm button tag và state

```js
import React, { Component } from "react";
import "./App.css";
import Person from "./Person/Person";

class App extends Component {
  // Add
  state = {
    persons: [
      { name: "Max", age: 28 },
      { name: "Manu", age: 29 },
      { name: "Stephanie", age: 26 }
    ],
    otherState: "some other value"
  };

  switchNameHandler = () => {
    // console.log('Was clicked!');
    // DON'T DO THIS: this.state.persons[0].name = 'Maximilian';
    this.setState({
      persons: [
        { name: "Maximilian", age: 28 },
        { name: "Manu", age: 29 },
        { name: "Stephanie", age: 27 }
      ]
    });
  };

  render() {
    return (
      <div className="App">
        <h1>Hi, I'm a React App</h1>
        <p>This is really working!</p>
        <button onClick={this.switchNameHandler}>Switch Name</button>
        <Person
          name={this.state.persons[0].name}
          age={this.state.persons[0].age}
        />
        <Person
          name={this.state.persons[1].name}
          age={this.state.persons[1].age}
        >
          My Hobbies: Racing
        </Person>
        <Person
          name={this.state.persons[2].name}
          age={this.state.persons[2].age}
        />
      </div>
    );
    // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
  }
}

export default App;  
```

Đối với function không thể define properties trong func components: person

### 15. Props & State.html

`props` and `state` are **CORE concepts** of React. Actually, only changes in `props` and/ or `state` trigger React to re-render your components and potentially update the DOM in the browser (a detailed look at how React checks whether to really touch the real DOM is provided in section 6).

**Props**

`props` allow you to pass data from a parent (wrapping) component to a child (embedded) component.

**Example:**

**AllPosts Component:**

```js
const posts = () => {
    return (
        <div>
            <Post title="My first Post" />
        </div>
    );
}
```

Here, `title` is the custom property (`prop` ) set up on the custom `Post` component. We basically replicate the default HTML attribute behavior we already know (e.g. `` informs the browser about how to handle that input).

**Post Component:**

```js
const post = (props) => {
    return (
        <div>
            <h1>{props.title}</h1>
        </div>
    );
}
```

The `Post` component receives the `props` argument. You can of course name this argument whatever you want - it's your function definition, React doesn't care! But React will pass one argument to your component function => An object, which contains all properties you set up on `` .

`{props.title}` then dynamically outputs the `title` property of the `props` object - which is available since we set the `title` property inside `AllPosts` component (see above).



**State**

Whilst props allow you to pass data down the component tree (and hence trigger an UI update), state is used to change the component, well, state from within. Changes to state also trigger an UI update.

**Example:**

**NewPost Component:**

```js
class NewPost extends Component { // state can only be accessed in class-based components!
    state = {
        counter: 1
    };  

    render () { // Needs to be implemented in class-based components! Needs to return some JSX!
        return (
            <div>{this.state.counter}</div>
        );
    }
}
```

Here, the `NewPost` component contains `state` . Only class-based components can define and use `state` . You can of course pass the `state` down to functional components, but these then can't directly edit it.

`state` simply is a property of the component class, you have to call it `state` though - the name is not optional. You can then access it via `this.state` in your class JSX code (which you return in the required `render()` method).

Whenever `state` changes (taught over the next lectures), the component will re-render and reflect the new state. The difference to `props` is, that this happens within one and the same component - you don't receive new data (`props` ) from outside!

### 15.1 props&state.pdf.pdf

![](./root/img/2020-01-19-18-51-39.png)

### 16. Handling Events with Methods

 `<button onClick={this.switchNameHandler}>Switch Name</button>`

Đối với hàm không có tham số không được gọi this.switchNameHandler() mà nên sử dụng như trên

### 17. To Which Events Can You Listen.html

In the last lecture, we saw that you can react to the onClick event - but to which other events can you listen? You can find a list of supported events here: https://reactjs.org/docs/events.html#supported-events

### Clipboard Events

Event names:

```
onCopy onCut onPaste
```

Properties:

```
DOMDataTransfer clipboardData
```

### Composition Events

Event names:

```
onCompositionEnd onCompositionStart onCompositionUpdate
```

Properties:

```
string data
```

### Keyboard Events

Event names:

```
onKeyDown onKeyPress onKeyUp
```

Properties:

```
boolean altKey
number charCode
boolean ctrlKey
boolean getModifierState(key)
string key
number keyCode
string locale
number location
boolean metaKey
boolean repeat
boolean shiftKey
number which
```

### Focus Events

Event names:

```
onFocus onBlur
```

These focus events work on all elements in the React DOM, not just form elements.

Properties:

```
DOMEventTarget relatedTarget
```

### Form Events

Event names:

```
onChange onInput onInvalid onSubmit
```

For more information about the onChange event, see [Forms](https://reactjs.org/docs/forms.html).

### Mouse Events

Event names:

```
onClick onContextMenu onDoubleClick onDrag onDragEnd onDragEnter onDragExit
onDragLeave onDragOver onDragStart onDrop onMouseDown onMouseEnter onMouseLeave
onMouseMove onMouseOut onMouseOver onMouseUp
```

The `onMouseEnter` and `onMouseLeave` events propagate from the element being left to the one being entered instead of ordinary bubbling and do not have a capture phase.

Properties:

```
boolean altKey
number button
number buttons
number clientX
number clientY
boolean ctrlKey
boolean getModifierState(key)
boolean metaKey
number pageX
number pageY
DOMEventTarget relatedTarget
number screenX
number screenY
boolean shiftKey
```

### Selection Events

Event names:

```
onSelect
```

### Touch Events

Event names:

```
onTouchCancel onTouchEnd onTouchMove onTouchStart
```

Properties:

```
boolean altKey
DOMTouchList changedTouches
boolean ctrlKey
boolean getModifierState(key)
boolean metaKey
boolean shiftKey
DOMTouchList targetTouches
DOMTouchList touches
```

### UI Events

Event names:

```
onScroll
```

Properties:

```
number detail
DOMAbstractView view
```

### Wheel Events

Event names:

```
onWheel
```

Properties:

```
number deltaMode
number deltaX
number deltaY
number deltaZ
```

### Media Events

Event names:

```
onAbort onCanPlay onCanPlayThrough onDurationChange onEmptied onEncrypted
onEnded onError onLoadedData onLoadedMetadata onLoadStart onPause onPlay
onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend
onTimeUpdate onVolumeChange onWaiting
```

### Image Events

Event names:

```
onLoad onError
```

### Animation Events

Event names:

```
onAnimationStart onAnimationEnd onAnimationIteration
```

Properties:

```
string animationName
string pseudoElement
float elapsedTime
```

### Transition Events

Event names:

```
onTransitionEnd
```

Properties:

```
string propertyName
string pseudoElement
float elapsedTime
```

### Other Events

Event names:

```
onToggle
```

### 18. Manipulating the State

Sẽ overwrite old state to new state, merge

Nếu là class thì sẽ merge vào và ngược lại

### 18.1 state-learning-card.pdf.pdf

### 19. Function Components Naming.html

In the **next lecture**, we'll learn how to manage state in functional components (instead of class-based components).

In case you're getting an error with the code shown in the next lecture, simply assign a capitalized variable name to the variable that holds your functional component.

**Example:**

Use

```
const App = () => { ... }
```

instead of

```
const app = () => { ... }
```

Technically, that's not required but depending on your project setup, the built-in linter (a code quality checking tool) that comes with create-react-app might not like the lowercase variable name.

You can also avoid this by creating projects with the **right react-scripts version**, which I would **recommend for this course** anyways (see the [setup video, lecture 26](https://www.udemy.com/react-the-complete-guide-incl-redux/learn/lecture/14320208))

```shell
create-react-app my-app --scripts-version 1.1.5
```

### 20. Using the useState() Hook for State Manipulation

react-hook cơ bản là tập hợp các hàm exposed to you by react which you can use in func components

useState always return two elements, tham số thứ nhất là current state tham số thứ 2 là func to update state

```js
import React, { useState } from "react";
import "./App.css";
import Person from "./Person/Person";

const app = props => {
  // use State always return two elements
  const [personsState, setPersonsState] = useState({
    persons: [
      { name: "Max", age: 28 },
      { name: "Manu", age: 29 },
      { name: "Stephanie", age: 26 }
    ]
  });

  const [otherState, setOtherState] = useState("some other value");

  console.log(personsState, otherState);

  const switchNameHandler = () => {
    // console.log('Was clicked!');
    // DON'T DO THIS: this.state.persons[0].name = 'Maximilian';
    setPersonsState({
      persons: [
        { name: "Maximilian", age: 28 },
        { name: "Manu", age: 29 },
        { name: "Stephanie", age: 27 }
      ]
    });
  };

  return (
    <div className="App">
      <h1>Hi, I'm a React App</h1>
      <p>This is really working!</p>
      <button onClick={switchNameHandler}>Switch Name</button>
      <Person
        name={personsState.persons[0].name}
        age={personsState.persons[0].age}
      />
      <Person
        name={personsState.persons[1].name}
        age={personsState.persons[1].age}
      >
        My Hobbies: Racing
      </Person>
      <Person
        name={personsState.persons[2].name}
        age={personsState.persons[2].age}
      />
    </div>
  );
  // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
};

export default app;
```

### 20.3 usestate-learning-card.pdf.pdf

![](./root/img/2020-01-19-19-39-00.png)

### 21. Stateless vs Stateful Components

Stateful is a component that manage state
Stateless is a component that doesn’t manage state

=> func presentation component than stateful component => easy to maintain and manage 

### 22. Passing Method References Between Components

Click on paragraph => have two way to call func with params(use arrow func is not recommend). You can pass method like a props `click={this.switchNameHandler.bind(this, 'Max!')`

`() => this.switchNameHandler('Maximilian!!')` mean `() => return this.switchNameHandler('Maximilian!!')`

arrow func khuyên k nên SD

App.js

```js

  switchNameHandler = (newName) => {
    // console.log('Was clicked!');
    // DON'T DO THIS: this.state.persons[0].name = 'Maximilian';
    this.setState( {
      persons: [
        { name: newName, age: 28 },
        { name: 'Manu', age: 29 },
        { name: 'Stephanie', age: 27 }
      ]
    } )
  }

  // 23 add
  nameChangedHandler = (event) => {
    this.setState( {
      persons: [
        { name: 'Max', age: 28 },
        { name: event.target.value, age: 29 },
        { name: 'Stephanie', age: 26 }
      ]
    } )
  }

  render () {
    return (
      <div className="App">
        <h1>Hi, I'm a React App</h1>
        <p>This is really working!</p>
        <button onClick={() => this.switchNameHandler('Maximilian!!')}>Switch Name</button>
        <Person
          name={this.state.persons[0].name}
          age={this.state.persons[0].age} />
        <Person
          name={this.state.persons[1].name}
          age={this.state.persons[1].age}
          click={this.switchNameHandler.bind(this, 'Max!')}
          changed={this.nameChangedHandler} >My Hobbies: Racing</Person>
        <Person
          name={this.state.persons[2].name}
          age={this.state.persons[2].age} />
      </div>
    );
    // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
  }
}
```

Person.js

```js
import React from "react";

const person = props => {
  return (
    <div>
      <p onClick={props.click}>
        I'm {props.name} and I am {props.age} years old!
      </p>
      <p>{props.children}</p>
      <input type="text" onChange={props.changed} value={props.name} />
    </div>
  );
};

export default person;
```

### 23. Adding Two Way Binding

Để xem name hiển thị ở input khi init thì thêm `{props.name}`, nhưng khi thêm sẽ xuất hiện warning bởi vì bạn đang binding value with properties without allowing react to change

![image-20200215082007322](./react-maximilan.assets/image-20200215082007322.png)

person.js

```js
<input type="text" onChange={props.changed} value={props.name} />
```

Them value={props.name} moi bi error

### 24. Adding Styling with Stylesheets

28.3 base-syntax--03-finished.zip
add person.css

```css
.Person {
  width: 60%;
  margin: 16px auto;
  border: 1px solid #eee;
  box-shadow: 0 2px 3px #ccc;
  padding: 16px;
  text-align: center;
}
```

thanks to webpack you can import css file in js file

> class => className 

### 25. Working with Inline Styles

App.js

```js
render () {
    const style = {
      backgroundColor: 'white',
      font: 'inherit',
      border: '1px solid blue',
      padding: '8px',
      cursor: 'pointer'
    };

    return (
      <div className="App">
        <h1>Hi, I'm a React App</h1>
        <p>This is really working!</p>
        <button
          style={style}
          onClick={() => this.switchNameHandler('Maximilian!!')}>Switch Name</button>
```

### 26. Time to Practice - The Base Syntax.html

### 27. [OPTIONAL] Assignment Solution

### 28. Useful Resources & Links.html

- create-react-app: https://github.com/facebookincubator/create-react-app
- Introducing JSX: https://reactjs.org/docs/introducing-jsx.html
- Rendering Elements: https://reactjs.org/docs/rendering-elements.html
- Components & Props: https://reactjs.org/docs/components-and-props.html
- Listenable Events: https://reactjs.org/docs/events.html

## 4. Working with Lists and Conditionals

### 1. Module Introduction

### 2. Rendering Content Conditionally

Them thuoc tinh showPersons: false
App.js

```js
import React, { Component } from "react";
import "./App.css";
import Person from "./Person/Person";

class App extends Component {
  state = {
    persons: [
      { name: "Max", age: 28 },
      { name: "Manu", age: 29 },
      { name: "Stephanie", age: 26 }
    ],
    otherState: "some other value",
    showPersons: false
  };

  switchNameHandler = newName => {
    // console.log('Was clicked!');
    // DON'T DO THIS: this.state.persons[0].name = 'Maximilian';
    this.setState({
      persons: [
        { name: newName, age: 28 },
        { name: "Manu", age: 29 },
        { name: "Stephanie", age: 27 }
      ]
    });
  };

  nameChangedHandler = event => {
    this.setState({
      persons: [
        { name: "Max", age: 28 },
        { name: event.target.value, age: 29 },
        { name: "Stephanie", age: 26 }
      ]
    });
  };

  // Add
  togglePersonsHandler = () => {
    const doesShow = this.state.showPersons;
    this.setState({ showPersons: !doesShow });
  };

  render() {
    const style = {
      backgroundColor: "white",
      font: "inherit",
      border: "1px solid blue",
      padding: "8px",
      cursor: "pointer"
    };

    //  ### 3. Handling Dynamic Content The JavaScript Way
    let persons = null;

    if (this.state.showPersons) {
      persons = (
        <div>
          <Person
            name={this.state.persons[0].name}
            age={this.state.persons[0].age}
          />
          <Person
            name={this.state.persons[1].name}
            age={this.state.persons[1].age}
            click={this.switchNameHandler.bind(this, "Max!")}
            changed={this.nameChangedHandler}
          >
            My Hobbies: Racing
          </Person>
          <Person
            name={this.state.persons[2].name}
            age={this.state.persons[2].age}
          />
        </div>
      );
    }

    return (
      <div className="App">
        <h1>Hi, I'm a React App</h1>
        <p>This is really working!</p>
        <button style={style} onClick={this.togglePersonsHandler}>
          Toggle Persons
        </button>
        {persons}
      </div>
    );
    // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
  }
}

export default App;
```

// Cach 2: dùng code js trong dấu  {}

```js
{
this.state.showPersons === true ? <div>
          <Person
            name={this.state.persons[0].name}
            age={this.state.persons[0].age}
          />
          <Person
            name={this.state.persons[1].name}
            age={this.state.persons[1].age}
            click={this.switchNameHandler.bind(this, "Max!")}
            changed={this.nameChangedHandler}
          >
            My Hobbies: Racing
          </Person>
          <Person
            name={this.state.persons[2].name}
            age={this.state.persons[2].age}
          />
        </div> : null
}
```

Nó sẽ tự động merge state

### 2.1 jsx-conditionals-learning-card.pdf.pdf

### 3. Handling Dynamic Content The JavaScript Way

```js
 let persons = null;

    if ( this.state.showPersons ) {
      persons = (
        <div>
          <Person
            name={this.state.persons[0].name}
            age={this.state.persons[0].age} />
          <Person
            name={this.state.persons[1].name}
            age={this.state.persons[1].age}
            click={this.switchNameHandler.bind( this, 'Max!' )}
            changed={this.nameChangedHandler} >My Hobbies: Racing</Person>
          <Person
            name={this.state.persons[2].name}
            age={this.state.persons[2].age} />
        </div>
      );
    }

```

Refactor 

### 4. Outputting Lists (Intro)

### 5. Outputting Lists

Không như angular hay vue có ngFor hay v-for, react xử lý all bằng js

App.js

```js
if (this.state.showPersons) {
  persons = (
    <div>
      {this.state.persons.map((person, index) => {
        return (
          <Person
            click={() => this.deletePersonHandler(index)}
            name={person.name}
            age={person.age}
            key={person.id}
            changed={event => this.nameChangedHandler(event, person.id)}
          />
        );
      })}
    </div>
  );
}
```

### 5.1 jsx-lists-learning-card.pdf.pdf

![](./root/img/2020-01-20-09-37-08.png)

### 6. Lists & State

```js
deletePersonHandler = personIndex => {
  // const persons = this.state.persons.slice();
  const persons = [...this.state.persons];
  persons.splice(personIndex, 1);
  this.setState({ persons: persons });
};
```

const persons = this.state.persons => Xoa k chinh xac
person is an reference object so you can change value of it when using const

### 7. Updating State Immutably

use `this.state.persons.slice();` to copy đây là 1 cách

### 8. Lists & Keys

```js
state = {
  persons: [
    { id: "asfa1", name: "Max", age: 28 },
    { id: "vasdf1", name: "Manu", age: 29 },
    { id: "asdf11", name: "Stephanie", age: 26 }
  ],
  otherState: "some other value",
  showPersons: false
};
```

### 9. Flexible Lists

```js
nameChangedHandler = (event, id) => {
  const personIndex = this.state.persons.findIndex(p => {
    return p.id === id;
  });

  const person = {
    ...this.state.persons[personIndex]
  };

  // const person = Object.assign({}, this.state.persons[personIndex]);

  person.name = event.target.value;

  const persons = [...this.state.persons];
  persons[personIndex] = person;

  this.setState({ persons: persons });
};
```

Call
`changed={(event) => this.nameChangedHandler(event, person.id)}`

### 10. Wrap Up

### 11. Time to Practice - Lists & Conditionals.html

### 12. [OPTIONAL] Assignment Solution

App.js

```ts
import React, { Component } from 'react';
import './App.css';
import Validation from './Validation/Validation';
import Char from './Char/Char';

class App extends Component {
  state = {
    userInput: ''
  }

  inputChangedHandler = ( event ) => {
    this.setState( { userInput: event.target.value } );
  }

  deleteCharHandler = ( index ) => {
    const text = this.state.userInput.split('');
    text.splice(index, 1);
    const updatedText = text.join('');
    this.setState({userInput: updatedText});
  }

  render () {
    const charList = this.state.userInput.split('').map((ch, index) => {
      return <Char 
        character={ch} 
        key={index}
        clicked={() => this.deleteCharHandler(index)} />;
    });

    return (
      <div className="App">
        
        <p>Hint: Keep in mind that JavaScript strings are basically arrays!</p>
        <hr />
        <input
          type="text"
          onChange={this.inputChangedHandler}
          value={this.state.userInput} />
        <p>{this.state.userInput}</p>
        <Validation inputLength={this.state.userInput.length} />
        {charList}
      </div>
    );
  }
}

export default App;

```

Validation

```ts
import React from "react";

const validation = props => {
  let validationMessage = "Text long enough";

  if (props.inputLength <= 5) {
    validationMessage = "Text too short";
  }

  return (
    <div>
      <p>{validationMessage}</p>
    </div>
  );
};

export default validation;
```

Char.js

```js
import React from "react";

const char = props => {
  const style = {
    display: "inline-block",
    padding: "16px",
    margin: "16px",
    border: "1px solid black",
    textAlign: "center"
  };

  return (
    <div style={style} onClick={props.clicked}>
      {props.character}
    </div>
  );
};

export default char;
```


### 13. Useful Resources & Links.html

Conditional Rendering: https://reactjs.org/docs/conditional-rendering.html
Lists & Keys: https://reactjs.org/docs/lists-and-keys.html

## 5. Styling React Components & Elements

### 1. Module Introduction

### 2. Outlining the Problem Set

### 3. Setting Styles Dynamically

Change backgroundColor to green

```ts

  render () {
    const style = {
      backgroundColor: 'green', // Add
      color: 'white', // ADD
      font: 'inherit',
      border: '1px solid blue',
      padding: '8px',
      cursor: 'pointer'
    };

    let persons = null;

    if ( this.state.showPersons ) {
      persons = (
        <div>
          {this.state.persons.map( ( person, index ) => {
            return <Person
              click={() => this.deletePersonHandler( index )}
              name={person.name}
              age={person.age}
              key={person.id}
              changed={( event ) => this.nameChangedHandler( event, person.id )} />
          } )}
        </div>
      );

// Add if show person => color is red
      style.backgroundColor = 'red';
    }

```

### 4. Setting Class Names Dynamically

App.css

```css
.App {
  text-align: center;
}

.red {
  color: red;
}

.bold {
  font-weight: bold;
}

.App button {
  border: 1px solid blue;
  padding: 16px;
  background-color: green;
  font: inherit;
  color: white;
  cursor: pointer;
}

.App button:hover {
  background-color: lightgreen;
  color: black;
}

.App button.Red {
  background-color: red;
}

.App button.Red:hover {
  background-color: salmon;
  color: black;
}
```

App.js

```ts
const classes = [];
if (this.state.persons.length <= 2) {
  classes.push("red"); // classes = ['red']
}
if (this.state.persons.length <= 1) {
  classes.push("bold"); // classes = ['red', 'bold']
}

// html trong hàm render
<p className={classes.join(" ")}>This is really working!</p>;
```

### 5. Adding and Using Radium

```ts
// allow use inline style with pseudo selector @media
npm install --save radium
```

App.js

```ts
import Radium, { StyleRoot } from "radium";

render () {
    const style = {
      backgroundColor: 'green',
      color: 'white', // ADD
      font: 'inherit',
      border: '1px solid blue',
      padding: '8px',
      cursor: 'pointer',
        // add
      ':hover': {
        backgroundColor: 'lightgreen',
        color: 'black'
      }
    };

    let persons = null;

    if ( this.state.showPersons ) {
      persons = (
        <div>
          {this.state.persons.map( ( person, index ) => {
            return <Person
              click={() => this.deletePersonHandler( index )}
              name={person.name}
              age={person.age}
              key={person.id}
              changed={( event ) => this.nameChangedHandler( event, person.id )} />
          } )}
        </div>
      );

// Add if show person => color is red
      style.backgroundColor = 'red';
// Add
      style[':hover'] = {
        backgroundColor: 'salmon',
        color: 'black'
      };
    }

// ở cuối file wrap App bằng Radium
export default Radium(App);
```

Person.js

```js
import React from "react";
import Radium from "radium";

import "./Person.css";

const person = props => {
    // add
  const style = {
    "@media (min-width: 500px)": {
      width: "450px"
    }
  };
  return (
    <div className="Person" style={style}>
      <p onClick={props.click}>
        I'm {props.name} and I am {props.age} years old!
      </p>
      <p>{props.children}</p>
      <input type="text" onChange={props.changed} value={props.name} />
    </div>
  );
};

// add
export default Radium(person);
```

### 6. Using Radium for Media Queries

Person

```ts

const person = ( props ) => {
    const style = {
        '@media (min-width: 500px)': {
            width: '450px'
        }
    };
    return (
        <div className="Person" style={style}>
```

Person.css

```css
/* @media (min-width: 500px) {
    .Person {
        width: 450px;
    }
} */
```

Tại file app.js wrap by StyleRoot

```js
return (
      <StyleRoot>
        <div className="App">
          <h1>Hi, I'm a React App</h1>
          <p className={classes.join( ' ' )}>This is really working!</p>
          <button
            style={style}
            onClick={this.togglePersonsHandler}>Toggle Persons</button>
          {persons}
        </div>
      </StyleRoot>
    );
    // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
  }
```



### 7. MUST READ Enabling CSS Modules.html

**Don't skip this lecture - and keep it open in a separate browser tab when you go through the next lecture - sorry for the small inconvenience at this point!**

In the next lecture, we'll use a styling solution named "CSS modules". I'll explain what it is and how it works over the next lectures.

The way we unlock it changed a little bit though.

In the next lecture, we'll eject from the project created with create-react-app (I'll show how that is done in the next lecture and that process will be exactly the same).

We'll then replace some code in a newly added webpack config file (it'll be available after ejecting).

In the video, I'll look for an entry that starts like this (in the `webpack.config.js` file):

```
{
  test: /\.css$/,
  ...
}
```

and I then edit this entry.

This entry now looks slightly different. You'll have to find the following part in your `webpack.config.js` file:

```
{
  test: cssRegex,
  exclude: cssModuleRegex,
  ...
}
```

and then edit that entry.

Finally, it should look like this:

```
{
  test: cssRegex,
  exclude: cssModuleRegex,
  use: getStyleLoaders({
      importLoaders: 1,
      modules: true,
      localIdentName: '[name]__[local]__[hash:base64:5]'
  }),
}
```

You can ignore me editing the `webpack.config.prod.js` file - with the latest version of create-react-app, ejecting only gives you **ONE** webpack config file (which you edit as described above).

**---**

Alternatively, you can now also use CSS modules without ejecting (you still can though, it won't be a problem). In a non-ejected project created with create-react-app, you can use CSS modules as described here: https://facebook.github.io/create-react-app/docs/adding-a-css-modules-stylesheet

https://create-react-app.dev/docs/adding-a-css-modules-stylesheet/

### 8. Enabling & Using CSS Modules

Remove Radium in Person

```js
import React from "react";

import classes from "./Person.css";

const person = props => {
  return (
    <div className={classes.Person}>
      <p onClick={props.click}>
        I'm {props.name} and I am {props.age} years old!
      </p>
      <p>{props.children}</p>
      <input type="text" onChange={props.changed} value={props.name} />
    </div>
  );
};

export default person;
```



Xoa Radium in App.js

- Remove Radium and style
- `npm run eject` => sinh ra 2 folder scripts and config : tự chỉnh sửa config(xem lại)

In the video, I'll look for an entry that starts like this (in the webpack.config.js file):
{
test: /\.css\$/,
...
}
and I then edit this entry.

O duoi phan options:
File configs/webpack.config.dev.js

```js
test: /\.css$/,
            use: [
              require.resolve('style-loader'),
              {
                loader: require.resolve('css-loader'),
                options: {
                  importLoaders: 1,
                   modules: true,
      				localIdentName: 	         '[name]__[local]__[hash:base64:5]'
                },
              },      

```

File webpack.config.prod.js

```js
      importLoaders: 1,
      modules: true,
      localIdentName: '[name]__[local]__[hash:base64:5]',
      minimize: true,
      sourceMap: shouldUseShouldMap
```

App.css

```css
.App {
  text-align: center;
}

.red {
  color: red;
}

.bold {
  font-weight: bold;
}

.App button {
  border: 1px solid blue;
  padding: 16px;
  background-color: green;
  font: inherit;
  color: white;
  cursor: pointer;
}

.App button:hover {
  background-color: lightgreen;
  color: black;
}

.App button.Red {
  background-color: red;
}

.App button.Red:hover {
  background-color: salmon;
  color: black;
}
```

App.js(Sau khi sửa phải run lại app)

```js
// add
import classes from "./App.css";

// btnClass = classes.Red;

const assignedClasses = [];
if (this.state.persons.length <= 2) {
  assignedClasses.push(classes.red); // classes = ['red']
}
if (this.state.persons.length <= 1) {
  assignedClasses.push(classes.bold); // classes = ['red', 'bold']
}

return (
  <div className={classes.App}>
    <h1>Hi, I'm a React App</h1>
    <p className={assignedClasses.join(" ")}>This is really working!</p>
    <button className={btnClass} onClick={this.togglePersonsHandler}>
      Toggle Persons
    </button>
    {persons}
  </div>
);
// return        <div className={classes.App}>
```

Person.js sửa thành

`<div className={classes.Person}>`

### 8.1 css-modules-learning-card.pdf.pdf

![](./root/img/2020-01-22-10-10-01.png)

### 9. More on CSS Modules.html

**CSS Modules** are a relatively new concept (you can dive super-deep into them here: https://github.com/css-modules/css-modules). With CSS modules, you can write normal CSS code and make sure, that it only applies to a given component.

It's not using magic for that, instead it'll simply **automatically generate unique CSS class names** for you. And by importing a JS object and assigning classes from there, you use these dynamically generated, unique names. So the imported JS object simply exposes some properties which hold the generated CSS class names as values.

**Example:**

**In Post.css File**

```
.Post {
    color: red;
}
```

**In Post Component File**

```
import classes from './Post.css';

const post = () => (
    <div className={classes.Post}>...</div>
);
```

Here, `classes.Post` refers to an automatically generated `Post` property on the imported `classes` object. That property will in the end simply hold a value like `Post__Post__ah5_1` .

So your `.Post` class was automatically transformed to a different class (`Post__Post__ah5_1` ) which is unique across the application. You also can't use it accidentally in other components because you don't know the generated string! You can only access it through the `classes` object. And if you import the CSS file (in the same way) in another component, the `classes` object there will hold a `Post` property which yields a **different** (!) CSS class name. Hence it's scoped to a given component.

By the way, if you somehow also want to define a global (i.e. un-transformed) CSS class in such a `.css` file, you can prefix the selector with `:global` .

**Example:**

```
:global .Post { ... }
```

Now you can use `className="Post"` anywhere in your app and receive that styling.

### 10. Adding Pseudo Selectors

className={btnClass}

App.css add

```css

.App button {
  border: 1px solid blue;
  padding: 16px;
  background-color: green;
  font: inherit;
  color: white;
  cursor: pointer;
}

.App button:hover {
  background-color: lightgreen;
  color: black;
}

.App button.Red {
  background-color: red;
}

.App button.Red:hover {
  background-color: salmon;
  color: black;
}
```

App.js

```js
// btnClass = classes.Red;
<button
            className={btnClass}
            onClick={this.togglePersonsHandler}>Toggle Persons</button>
          {persons}
```



### 11. Working with Media Queries

Sua file Person.css
Person.css

```css
@media (min-width: 500px) {
  .Person {
    width: 450px;
  }
}
```
### 12. Useful Resources & Links.html

Using CSS Modules in create-react-app Projects: https://medium.com/nulogy/how-to-use-css-modules-with-create-react-app-9e44bec2b5c2
More information about CSS Modules: https://github.com/css-modules/css-modules

## 6. Debugging React Apps

### 1. Module Introduction

### 2. Understanding Error Messages

F12 tab console and source

### 3. Finding Logical Errors by using Dev Tools & Sourcemaps

Vào tab source

### 4. Working with the React Developer Tools

### 5. Using Error Boundaries (React 16+)

Person.js

```js
const person = ( props ) => {
    const rnd = Math.random();

    if ( rnd > 0.7 ) {
        throw new Error( 'Something went wrong' );
    }
```

ErrorBoundary

```js
import React, { Component } from "react";

class ErrorBoundary extends Component {
  state = {
    hasError: false,
    errorMessage: ""
  };

  componentDidCatch = (error, info) => {
    this.setState({ hasError: true, errorMessage: error });
  };

  render() {
    if (this.state.hasError) {
      return <h1>{this.state.errorMessage}</h1>;
    } else {
      return this.props.children;
    }
  }
}

export default ErrorBoundary;
```

App.js

```js
// key để lặp k lỗi
return (
  <ErrorBoundary key={person.id}>
    <Person
      click={() => this.deletePersonHandler(index)}
      name={person.name}
      age={person.age}
      changed={event => this.nameChangedHandler(event, person.id)}
    />
  </ErrorBoundary>
);
```

### 6. Wrap Up

### 7. Useful Resources & Links.html

- Error Boundaries: https://reactjs.org/docs/error-boundaries.html
- Chrome Devtool Debugging: https://developers.google.com/web/tools/chrome-devtools/javascript/

## 7. Diving Deeper into Components & React Internals

### 1. Module Introduction

### 2. A Better Project Structure

Create folder components, assets, container
Modify import

### 3. Splitting an App Into Components

Persons.js add new file

```js
import React from "react";

import Person from "./Person/Person";

const persons = props => {
  console.log("[Persons.js] rendering...");
  return props.persons.map((person, index) => {
    return (
      <Person
        click={() => props.clicked(index)}
        name={person.name}
        age={person.age}
        key={person.id}
        changed={event => props.changed(event, person.id)}
      />
    );
  });
};

export default persons;
```

App.js

```js
/* if ( this.state.showPersons ) {
      persons = (
        <div>
          {this.state.persons.map( ( person, index ) => {
            return <Person
              click={() => this.deletePersonHandler( index )}
              name={person.name}
              age={person.age}
              key={person.id}
              changed={( event ) => this.nameChangedHandler( event, person.id )} />
          } )}
        </div>
      );

      btnClass = classes.Red;
    }
 */   
    
if (this.state.showPersons) {
  persons = (
    <Persons
      persons={this.state.persons}
      clicked={this.deletePersonHandler}
      changed={this.nameChangedHandler}
    />
  );
}
```

Cockpit

```js
import React from "react";

import classes from "./Cockpit.css";

const cockpit = props => {
  const assignedClasses = [];
  let btnClass = "";
  if (props.showPersons) {
    btnClass = classes.Red;
  }

  if (props.persons.length <= 2) {
    assignedClasses.push(classes.red); // classes = ['red']
  }
  if (props.persons.length <= 1) {
    assignedClasses.push(classes.bold); // classes = ['red', 'bold']
  }

  return (
    <div className={classes.Cockpit}>
      <h1>{props.title}</h1>
      <p className={assignedClasses.join(" ")}>This is really working!</p>
      <button className={btnClass} onClick={props.clicked}>
        Toggle Persons
      </button>
    </div>
  );
};

export default cockpit;
```

Cockpit.css thay đổi tên App thành Cockpit

```css
.red {
  color: red;
}

.bold {
  font-weight: bold;
}

.Cockpit button {
  border: 1px solid blue;
  padding: 16px;
  background-color: green;
  font: inherit;
  color: white;
  cursor: pointer;
}

.Cockpit button:hover {
  background-color: lightgreen;
  color: black;
}

.Cockpit button.Red {
  background-color: red;
}

.Cockpit button.Red:hover {
  background-color: salmon;
  color: black;
}
```

App.js

```js
return (
  <div className={classes.App}>
    <Cockpit
      title={this.props.appTitle}
      showPersons={this.state.showPersons}
      persons={this.state.persons}
      clicked={this.togglePersonsHandler}
    />
    {persons}
  </div>
);
```

### 4. Comparing Stateless and Stateful Components

presentational component is func component does not manage state

### 5. Class-based vs Functional Components

![](./root/img/2020-01-23-10-26-42.png)
index

```js
ReactDOM.render(
  <App appTitle="Person Manager" />,
  document.getElementById("root")
);
```

### 6. class Component Lifecycle Overview

![](./root/img/2020-01-24-15-56-35.png)

Side effect: mean call something like https or store somethings in local storage of the browser or sending something to gg analysic => affect performance

getDiverStateFromProps that is lifecycle hook from react 16.3, the idea is whenever props change
![](./root/img/2020-01-24-16-10-26.png)

### 7. Component Creation Lifecycle in Action

App.js

```js
  constructor(props) {
    super(props);
    console.log('[App.js] constructor');
  }

  static getDerivedStateFromProps(props, state) {
    console.log('[App.js] getDerivedStateFromProps', props);
    return state;
  }
// rare
componentWillMount() {
    console.log('[App.js] componentWillMount');
  }

  componentDidMount() {
    console.log('[App.js] componentDidMount');
  }
```

If you want to set initial state based on props => use constructor

Cách init state ở ngoài là cách hiện đại trong js, behind the sence

![image-20200215144237690](./react-maximilan.assets/image-20200215144237690.png)

### 7.1 lifecycle-creation-learning-card.pdf.pdf

![](./root/img/2020-01-24-16-10-19.png)

### 8. Component Update Lifecycle (for props Changes)

rarely use react lifecycle hook to update your state
there is a more elegant way of updating your state or managing your component based on external properties

getSnapshotBeforeUpdate => Get snapshot of use state, restore the scrolling position before update happen
ComponentDidMount => không nên use sync: cause re-render when update state

shouldComponentUpdate => có update hay không?

**Practice**
Person.js

```js
// convert func to class-based component
// import React from 'react';

// import classes from './Person.css';

// const person = props => {
//   console.log('[Person.js] rendering...');
//   return (
//     <div className={classes.Person}>
//       <p onClick={props.click}>
//         I'm {props.name} and I am {props.age} years old!
//       </p>
//       <p>{props.children}</p>
//       <input type="text" onChange={props.changed} value={props.name} />
//     </div>
//   );
// };

// export default person;

// ------------------------------
import React, { Component } from "react";

import classes from "./Person.css";

class Person extends Component {
  render() {
    console.log("[Person.js] rendering...");
    return (
      <div className={classes.Person}>
        <p onClick={this.props.click}>
          I'm {this.props.name} and I am {this.props.age} years old!
        </p>
        <p>{this.props.children}</p>
        <input
          type="text"
          onChange={this.props.changed}
          value={this.props.name}
        />
      </div>
    );
  }
}

export default Person;
```

convert Persons.js

```js
import React, { Component } from "react";

import Person from "./Person/Person";

class Persons extends Component {
  // since you have an uninitilized state => is not use lifecycle hook
  // static getDerivedStateFromProps(props, state) {
  //   console.log('[Persons.js] getDerivedStateFromProps');
  //   return state;
  // }

  // componentWillReceiveProps(props) {
  //   console.log('[Persons.js] componentWillReceiveProps', props);
  // }

  shouldComponentUpdate(nextProps, nextState) {
    console.log("[Persons.js] shouldComponentUpdate");
    // continue update if true
    return true;
  }

    // send snapshot to componentDidUpdate
  getSnapshotBeforeUpdate(prevProps, prevState) {
    console.log("[Persons.js] getSnapshotBeforeUpdate");
    return { message: "Snapshot!" };
  }

  // componentWillUpdate() {

  // }

//   componentDidUpdate() {
//    console.log("[Persons.js] componentDidUpdate");
//  }
    
  componentDidUpdate(prevProps, prevState, snapshot) {
    console.log("[Persons.js] componentDidUpdate");
    console.log(snapshot);
  }

  render() {
    console.log("[Persons.js] rendering...");
    return this.props.persons.map((person, index) => {
      return (
        <Person
          click={() => this.props.clicked(index)}
          name={person.name}
          age={person.age}
          key={person.id}
          changed={event => this.props.changed(event, person.id)}
        />
      );
    });
  }
}

export default Persons;
```

Them tham so snapshot trong componentDidUpdate(prevProps, prevState, snapshot) no nhan tu getSnapshotBeforeUpdate.  
componentWillReceiveProps don't support any more

![image-20200215150401694](react-maximilan.assets/image-20200215150401694.png)

### 8.1 lifecycle-update-external-learning-card.pdf.pdf

![](./root/img/2020-01-25-18-06-36.png)

### 9. Component Update Lifecycle (for state Changes)

App.js

```js
  shouldComponentUpdate(nextProps, nextState) {
    console.log('[App.js] shouldComponentUpdate');
    return true;
  }

  componentDidUpdate() {
    console.log('[App.js] componentDidUpdate');
  }
```

![image-20200215150718935](react-maximilan.assets/image-20200215150718935.png)

### 10. Using useEffect() in Functional Components

useEffect is not a lifecycle hook, this is a react hook
It will run for every render cycle(khi thay đổi name trong input nó cũng thay đổi state => re-render so useEffect was called)

Cockpit.js

```js
useEffect(() => {
  console.log("[Cockpit.js] useEffect");
  // Http request...
});
```

### 11. Controlling the useEffect() Behavior

Khi chi muon goi http request khi lan dau render

Cockpit.js

```js
useEffect(() => {
  console.log("[Cockpit.js] useEffect");
  // Http request...
  setTimeout(() => {
    alert("Saved data to cloud!");
  }, 1000);
}, [props.persons]);
// khi delete hay sửa input person nó mới call còn ấn vào button nó sẽ không call vì person not change
// Nếu để là [] nó sẽ chạy lần đầu khi load để ấn button còn các lần sau sẽ không hiển thị nữa
```

Tham số thứ 2: nếu không có khi ta reload hay ấn button hay xóa person sẽ alert

[props.persons] : second arguments is point to all variable or all data use in that actually are used in your effect

Có thể SD cùng lúc nhiều hàm useEffect

### 12. Cleaning up with Lifecycle Hooks & useEffect()

persons.js

```js
  componentWillUnmount() {
    console.log('[Persons.js] componentWillUnmount');
  }
// Khi click button toggle sẽ gọi useEffect 
```

Cockpit

```js
// khi remove
useEffect(() => {
  console.log("[Cockpit.js] useEffect");
  // Http request...
  setTimeout(() => {
      // lần đầu khi load lên
    alert("Saved data to cloud!");
  }, 1000);
  return () => {
      // lần ấn remove
    console.log("[Cockpit.js] cleanup work in useEffect");
  };
}, []);

// every re-render will clean
useEffect(() => {
  console.log("[Cockpit.js] 2nd useEffect");
  return () => {
    console.log("[Cockpit.js] cleanup work in 2nd useEffect");
  };
});
```

App.js

Add state showCockpit and add button to remove the cockpit

```js
<button
  onClick={() => {
    this.setState({ showCockpit: false });
  }}
>
  Remove Cockpit
</button>;
{
  this.state.showCockpit ? (
    <Cockpit
      title={this.props.appTitle}
      showPersons={this.state.showPersons}
      persons={this.state.persons}
      clicked={this.togglePersonsHandler}
    />
  ) : null;
}
```

> It will run BEFORE main useEffect function run and AFTER the (first) render cycle run(hàm return được gọi ở cockpit)

### 13. Cleanup Work with useEffect() - Ex

Clear timer neu k se nhin thay alert khi click button remove
clearTimeout(timer)

```js
useEffect(() => {
  console.log("[Cockpit.js] useEffect");
  // Http request...
  timer = setTimeout(() => {
    alert("Saved data to cloud!");
  }, 1000);
  return () => {
      clearTimeout(timer);
    console.log("[Cockpit.js] cleanup work in useEffect");
  };
}, []);
// tham số thứ 2 => chạy khi mount and unmount
// khi ấn xóa nó sẽ hiển thị tiếp alert
```

### 14. Using shouldComponentUpdate for Optimization

Bấm vào button toggle và sau đó xóa Cockpit sẽ không render lại Persons(xem log)

Person.js

```js
shouldComponentUpdate(nextProps, nextState) {
    console.log('[Persons.js] shouldComponentUpdate');
    if (nextProps.persons !== this.props.persons) {
      return true;
    } else {
      return false;
    }
    // return true;
  }
```

Xem lại có sử dụng tool

![image-20200215155543924](react-maximilan.assets/image-20200215155543924.png)  

enable paint flashing

Update in a virtual DOM but not update in real DOM when you see

https://viblo.asia/p/tim-hieu-ve-hooks-trong-react-Ljy5VzGG5ra

https://viblo.asia/p/tim-hieu-ve-hooks-trong-react-p2-GrLZDkyEKk0

https://viblo.asia/p/tim-hieu-ve-hooks-trong-react-p3-m68Z07g2KkG?fbclid=IwAR2zq7MEfttB7VsFS0LBY-gHG2JKPUYTm78mPzzGVDb3uIS0ZNg_EPxHad4



### 14.1 Reference vs Primitive Types.html

https://academind.com/learn/javascript/reference-vs-primitive-values/

### 15. Optimizing Functional Components with React.memo()

Khi change name

![image-20200301225653037](./react-maximilan.assets/image-20200301225653037.png)

Khi thay đổi name trong input useEffect trong Cockpit được gọi bằng cách xem log của useEffect => prevent

```js
export default React.memo(cockpit);
// will store a snapshot of this component, only input change => re-render. If parent doesnot change React will back in store components
```

App.js add personsLength để nó không liên quan gì đến person nên khi change input sẽ không còn in ra log

```js
{this.state.showCockpit ? (
          <Cockpit
            title={this.props.appTitle}
            showPersons={this.state.showPersons}
            personsLength={this.state.persons.length}
            clicked={this.togglePersonsHandler}
          />
        ) : null}
// Không phụ thuộc gì của persons nên Cockpit sẽ không gọi lại useEffect nếu có memo
```

nếu không thêm thì nó sẽ phụ thuộc vào person nếu truyền person vào như cũ  => re-render khi bấm vào button sẽ gọi useEffect

Kết quả là khi thay đổi input nó sẽ không gọi lại hàm useEffect

### 16. When should you optimize

Khi có khoảng 60% component cần update mà wrap bằng memo hay shouldComponentUpdate thì sẽ ảnh hưởng tốc độ app vì phải check mỗi lần render

### 17. PureComponents instead of shouldComponentUpdate

Person.js

```js
// shouldComponentUpdate(nextProps, nextState) {
  //   console.log('[Persons.js] shouldComponentUpdate');
  //   if (
  //     nextProps.persons !== this.props.persons ||
  //     nextProps.changed !== this.props.changed ||
  //     nextProps.clicked !== this.props.clicked
  //   ) {
  //     return true;
  //   } else {
  //     return false;
  //   }
  //   // return true;
  // }
```

Cách 2: extends PureComponent

Khi edit input mới update còn remove cockpit sẽ không render lại Persons

```js
import React, { PureComponent } from 'react';

import Person from './Person/Person';

class Persons extends PureComponent {
```



### 18. How React Updates the DOM

render rất dễ bị gọi dẫn đến hiển thị the same => nên mới có shouldComponentUpdate

![image-20200215172628432](react-maximilan.assets/image-20200215172628432.png)



### 19. Rendering Adjacent JSX Elements
Cách 1: warp all elements in a div

Cách 2: return an array with id 

```js
class Person extends Component {
  render() {
    console.log('[Person.js] rendering...');
    return 
      [
        <p onClick={this.props.click}>
          I'm {this.props.name} and I am {this.props.age} years old!
        </p>,
        <p key="i2">{this.props.children}</p>,
        <input
          key="i3"
          type="text"
          onChange={this.props.changed}
          value={this.props.name}
        />
     ];
  }
}

------------------------------------------
// React có cách để replace như trên
import React, { Component } from 'react';

import Aux from '../../../hoc/Aux';
import classes from './Person.css';

class Person extends Component {
  render() {
    console.log('[Person.js] rendering...');
    return (
      <Aux>
        <p onClick={this.props.click}>
          I'm {this.props.name} and I am {this.props.age} years old!
        </p>
        <p key="i2">{this.props.children}</p>
        <input
          key="i3"
          type="text"
          onChange={this.props.changed}
          value={this.props.name}
        />
      </Aux>
    );
  }
}

export default Person;

```

Create two file in folder hoc/

```js
Aux.js
const aux = props => props.children;

export default aux;

---------------
Auxiliary.js
const aux = props => props.children;

export default aux;
```

### 19.1 react-adjacent-jsx.pdf.pdf

Xem lại

**Why can’t you return adjacent, top-level JSX elements?**
It becomes clear, once you translate the JSX code to the
React.createElement() calls React actually executes (don’t forget: The React
project build workflow performs this transformation for you!)
JSX:

```js
import React from 'react';
const heading = props => (
<h1>{props.title}</h1>
<h2>{props.subtitle}</h2>
);
export default heading;
```
This is NOT allowed because it would be translated to:

```js
import React from 'react';
const heading = props => React.createElement('h1', {},
props.title) React.createElement('h2', {}, props.subtitle);
export default heading;
```

This is invalid JavaScript syntax, you’re trying to return two expressions (two
React.createElement() calls).
You are allowed to do that if you
a) return an array of `React.createElement()` calls OR
b) return a single `React.createElement()` call that wraps the other two
a)

```js
import React from 'react';
const heading = props => [
React.createElement('h1', {key: 'i1'}, props.title),
React.createElement('h2', {key: 'i2'}, props.subtitle)
];
export default heading;
```



This is equivalent to returning an array of keyed JSX elements.
b)

```js
import React from 'react';
import Aux from '../hoc/Aux';
const heading = props => React.createElement(
Aux,
{},
React.createElement('h1', {key: 'i1'}, props.title),
React.createElement('h2', {key: 'i2'}, props.subtitle)
);
export default heading;
This is equivalent to using <Aux>.
```



b) works because we can pass as many children (third argument to
React.createElement()) as we want.  

### 20. Windows Users Must Read.html

**On Windows**, the `Aux.js` filename is not allowed in ZIP archives. Hence when extracting the attached source code, you might get prompted to rename the `Aux.js` file. You might also **face difficulties creating an Aux folder** and Aux.js file.

I really apologize for that inconvenience, Windows is really doing an amazing job here ;-).

Follow these fixes:

#### **1) Problems when unzipping the attached file:**

Simply **skip this step** (e.g. by pressing **"No"**) and **ignore** the upcoming error message.

In the extracted folder, you'll then find **all source files** EXCEPT for the `Aux.js` file. In later course modules (where we work on the course project), the `Aux.js` file can be found in an `Aux/` subfolder inside `hoc/` .

Make sure to take the `Aux.js` file **attached to this lecture** and place it inside the `hoc/` or `hoc/Aux/` folder (which ever of the two you got).

#### **2) Problems with the creation of an Aux folder and/ or file:**

Simply name both differently. For example, you may create an `Auxiliary` folder and name the file inside of it `Auxiliary.js` . Make sure to then adjust your imports (`import Aux from './path/to/Auxiliary/Auxiliary'` ) and you should be fine.

### 21. Using React.Fragment

Thực hiện giống như Aux

```js
<React.Fragment>
        <p onClick={this.props.click}>
          I'm {this.props.name} and I am {this.props.age} years old!
        </p>
        <p key="i2">{this.props.children}</p>
        <input
          key="i3"
          type="text"
          onChange={this.props.changed}
          value={this.props.name}
        />
      </React.Fragment>
```

hay import { Fragment} from 'react';

### 22. Higher Order Components (HOC) - Introduction

Create file WithClass.js

```js
import React from 'react';

const withClass = props => (
  <div className={props.classes}>{props.children}</div>
);

export default withClass;

```

App.js wrap WithClass

```js
import WithClass from '../hoc/WithClass';

return (
      <WithClass classes={classes.App}>
        <button
          onClick={() => {
            this.setState({ showCockpit: false });
          }}
        >
          Remove Cockpit
        </button>
        {this.state.showCockpit ? (
          <Cockpit
            title={this.props.appTitle}
            showPersons={this.state.showPersons}
            personsLength={this.state.persons.length}
            clicked={this.togglePersonsHandler}
          />
        ) : null}
        {persons}
      </WithClass>
    );
```







### 23. Another Form of HOCs

withClass.js

```js
import React from 'react';

const withClass = (WrappedComponent, className) => {
    // return a functional component
  return props => (
    <div className={className}>
      <WrappedComponent />
    </div>
  );
};

export default withClass;
// Tham số đầu WrappedComponent là 1 Components

```

App.js

```js
return (
    // return Aux
      <Aux>
        <button
          onClick={() => {
            this.setState({ showCockpit: false });
          }}
        >
          Remove Cockpit
        </button>
        {this.state.showCockpit ? (
          <Cockpit
            title={this.props.appTitle}
            showPersons={this.state.showPersons}
            personsLength={this.state.persons.length}
            clicked={this.togglePersonsHandler}
          />
        ) : null}
        {persons}
      </Aux>
    );
    // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
  }
}

// wrap App
export default withClass(App, classes.App);
```



### 24. Passing Unknown Props

Thực hiện tương tự với class Person

Ban đầu sẽ không hiển thị data tương ứng vì withClass không có props

withClass.js

```js
import React from 'react';

const withClass = (WrappedComponent, className) => {
  return props => (
    <div className={className}>
      <WrappedComponent {...props}/>
    </div>
  );
};

export default withClass;

```

Person.js

```js
import React, { Component } from 'react';

import Aux from '../../../hoc/Aux';
import withClass from '../../../hoc/withClass';
import classes from './Person.css';

class Person extends Component {
  render() {
    console.log('[Person.js] rendering...');
    return (
      <Aux>
        <p onClick={this.props.click}>
          I'm {this.props.name} and I am {this.props.age} years old!
        </p>
        <p key="i2">{this.props.children}</p>
        <input
          key="i3"
          type="text"
          onChange={this.props.changed}
          value={this.props.name}
        />
      </Aux>
    );
  }
}

export default withClass(Person, classes.Person);

```



### 25. Setting State Correctly

thêm state: changeCounter

trong hàm nameChangeHandler file App.js

```js
this.setState({
        persons: persons,
        changeCounter: this.state.changeCounter + 1
      };
    );
// wrong bởi vì nó cannot be previous state
```
Sửa thành
```js
nameChangedHandler = (event, id) => {
    const personIndex = this.state.persons.findIndex(p => {
      return p.id === id;
    });

    const person = {
      ...this.state.persons[personIndex]
    };

    // const person = Object.assign({}, this.state.persons[personIndex]);

    person.name = event.target.value;

    const persons = [...this.state.persons];
    persons[personIndex] = person;

    // Add new
    this.setState((prevState, props) => {
      return {
        persons: persons,
        changeCounter: prevState.changeCounter + 1
      };
    });
  };
// wrong bởi vì nó cannot be previous state
// Vào F12/ React để xem thay đổi khi sửa input
```

### 26. Using PropTypes

`npm install --save prop-types`

Person.js

```js
import React, { Component } from 'react';
import PropTypes from 'prop-types';

import Aux from '../../../hoc/Aux';
import withClass from '../../../hoc/withClass';
import classes from './Person.css';

class Person extends Component {
  render() {
    console.log('[Person.js] rendering...');
    return (
      <Aux>
        <p onClick={this.props.click}>
          I'm {this.props.name} and I am {this.props.age} years old!
        </p>
        <p key="i2">{this.props.children}</p>
        <input
          key="i3"
          type="text"
          onChange={this.props.changed}
          value={this.props.name}
        />
      </Aux>
    );
  }
}

// add
Person.propTypes = {
  click: PropTypes.func,
  name: PropTypes.string,
  age: PropTypes.number,
  changed: PropTypes.func
};

export default withClass(Person, classes.Person);

```

Xuất hiên warning nếu truyền sai kiểu data

### 27. Using Refs

Person.js sử dụng từ khóa ref và chuẩn bị làm để focus vào thẻ input cuối

```js
import React, { Component } from 'react';
import PropTypes from 'prop-types';

import Aux from '../../../hoc/Aux';
import withClass from '../../../hoc/withClass';
import classes from './Person.css';

class Person extends Component {
  // react 16.3 cách 2 to access element
  constructor(props) {
    super(props);
    this.inputElementRef = React.createRef();
  }

    // add
  componentDidMount() {
    // document.querySelector('input').focus(); 
    // focus vào input đầu
    // inputElement là thuộc tính của class
    // Cách 1
    // this.inputElement.focus();
    this.inputElementRef.current.focus();
  }

  render() {
    console.log('[Person.js] rendering...');
    return (
      <Aux>
        <p onClick={this.props.click}>
          I'm {this.props.name} and I am {this.props.age} years old!
        </p>
        <p key="i2">{this.props.children}</p>
        <input
          key="i3"
          // ref={(inputEl) => {this.inputElement = inputEl}}
          ref={this.inputElementRef}
          type="text"
          onChange={this.props.changed}
          value={this.props.name}
        />
      </Aux>
    );
  }
}

Person.propTypes = {
  click: PropTypes.func,
  name: PropTypes.string,
  age: PropTypes.number,
  changed: PropTypes.func
};

export default withClass(Person, classes.Person);

```



### 28. Refs with React Hooks

Cockpit.js

```js
import React, { useEffect, useRef } from 'react';

import classes from './Cockpit.css';

const cockpit = props => {
    // add
    // can store value in there
  const toggleBtnRef = useRef(null);

  useEffect(() => {
    console.log('[Cockpit.js] useEffect');
    // Http request...
    // setTimeout(() => {
    //   alert('Saved data to cloud!');
    // }, 1000);
    toggleBtnRef.current.click();
    return () => {
      console.log('[Cockpit.js] cleanup work in useEffect');
    };
  }, []);
  ....

  return (
    <div className={classes.Cockpit}>
      <h1>{props.title}</h1>
      <p className={assignedClasses.join(' ')}>This is really working!</p>
      <button ref={toggleBtnRef} className={btnClass} onClick={props.clicked}>
        Toggle Persons
      </button>
    </div>
  );
};

export default React.memo(cockpit);

```

Làm cho nút tự bấm sau khi load page

Thêm trong hàm useEffect vì nó sẽ chạy sau khi JSX code render xong => không bị lỗi

### 29. Understanding Prop Chain Problems

Thêm chức năng login

App.js thêm state authenticated

```js
// add
loginHandler = () => {
    this.setState({ authenticated: true });
  };

  render() {
    console.log('[App.js] render');
    let persons = null;

    if (this.state.showPersons) {
      persons = (
        <Persons
          persons={this.state.persons}
          clicked={this.deletePersonHandler}
          changed={this.nameChangedHandler}
      // add new
          isAuthenticated={this.state.authenticated}
        />
      );
    }

    return (
      <Aux>
        <button
          onClick={() => {
            this.setState({ showCockpit: false });
          }}
        >
          Remove Cockpit
        </button>
        <AuthContext.Provider
          value={{
            authenticated: this.state.authenticated,
            login: this.loginHandler
          }}
        >
          {this.state.showCockpit ? (
            <Cockpit
              title={this.props.appTitle}
              showPersons={this.state.showPersons}
              personsLength={this.state.persons.length}
              clicked={this.togglePersonsHandler}
		// add
			  login={this.loginHandler}
            />
          ) : null}
          {persons}
        </AuthContext.Provider>
      </Aux>
    );
    // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
  }
```

Cockpit.js

```js
// add
<button onClick={props.login}></button>
```

Persons.js

```js
// Truyền data vào trong vào hiển thị ở Person.js khi ấn btn login
return (
        <Person
          click={() => this.props.clicked(index)}
          name={person.name}
          age={person.age}
          key={person.id}
          changed={event => this.props.changed(event, person.id)}
          // add
          isAuth={this.props.isAuthenticated}
        />
      );
      
--------------------- Person
return (
      <Aux>
        {this.props.isAuth ? 
         <p>Authenticated!</p>
         : 
          <p>Please log in</p>
        }
```

Khi pass data to multiple component, multiple level => use context

### 30. Using the Context API

create folder context/

create file auth-context

```js
import React from 'react';

const authContext = React.createContext({
  authenticated: false,
  login: () => {}
});

export default authContext;

```

Note: it can be an arr or string, object,...

App.js thêm wrap by AuthContext.Provider

```js
import AuthContext from '../context/auth-context';

return (
      <Aux>
        <button
          onClick={() => {
            this.setState({ showCockpit: false });
          }}
        >
          Remove Cockpit
        </button>
// add
        <AuthContext.Provider
          value={{
            authenticated: this.state.authenticated,
            login: this.loginHandler
          }}
        >
          {this.state.showCockpit ? (
            <Cockpit
              title={this.props.appTitle}
              showPersons={this.state.showPersons}
              personsLength={this.state.persons.length}
              clicked={this.togglePersonsHandler}
            />
          ) : null}
          {persons}
        </AuthContext.Provider>
      </Aux>
    );
```

Person.js

```js
componentDidMount() {
    // this.inputElement.focus();
    this.inputElementRef.current.focus();
  }

render() {
return (
      <Aux>
       <AuthContext.Consumer> { context => context.authenticated ? 
          <p>Authenticated!</p>
         : 
          <p>Please log in</p>
        }
       </AuthContext.Consumer>
```


Cockpit.js

```js

render() {
return (
      <Aux>
       <AuthContext.Consumer> { context =>  
          <button onClick={context.login}></button>
        }
        </AuthContext.Consumer>
```


### 31. contextType & useContext()

Person.js

```js
import AuthContext from '../../../context/auth-context';

static contextType = AuthContext;

componentDidMount() {
    // this.inputElement.focus();
    this.inputElementRef.current.focus();
    console.log(this.context.authenticated);
  }

render() {
return (
      <Aux>
        {this.context.authenticated ? (
          <p>Authenticated!</p>
        ) : (
          <p>Please log in</p>
        )}

// Xóa AuthContext.Consumer
```

Cockpit.js

```js
import React, { useEffect, useRef, useContext } from 'react';
import AuthContext from '../../../context/auth-context';


const cockpit = props => {
  const toggleBtnRef = useRef(null);
  const authContext = useContext(AuthContext);
  console.log(authContext.authenticated);

  ....
  return (
    <div className={classes.Cockpit}>
      <h1>{props.title}</h1>
      <p className={assignedClasses.join(' ')}>This is really working!</p>
      <button ref={toggleBtnRef} className={btnClass} onClick={props.clicked}>
        Toggle Persons
      </button>
// add
      <button onClick={authContext.login}>Log in</button>
    </div>
  );
    
    
```



### 32. Wrap Up

### 33. Useful Resources & Links.html

Useful Resources:

- More on useEffect(): https://reactjs.org/docs/hooks-effect.html
- State & Lifecycle: https://reactjs.org/docs/state-and-lifecycle.html
- PropTypes: https://reactjs.org/docs/typechecking-with-proptypes.html
- Higher Order Components: https://reactjs.org/docs/higher-order-components.html
- Refs: https://reactjs.org/docs/refs-and-the-dom.html

### 34. MUST READ Legacy Lectures.html

**DON'T SKIP THIS!**

\---

With React 16.8, a new feature called "**React Hooks**" was introduced. This course already covers this feature and this module, up to this point, is 100% up-to-date with that feature (e.g. you learned about `useEffect()`).

The upcoming lectures marked as **"[LEGACY]"** are only there to allow existing students who started this module before the update (on February 6th) to continue smoothly.

You can skip all remaining lectures in this module (i.e. the lectures with **"[LEGACY]"**) if you watched all the other lectures prior to this one.

### 35. [LEGACY] Splitting an App Into Components

Persons.js

```js
import React from 'react';

import Person from './Person/Person';

const persons = (props) => props.persons.map( ( person, index ) => {
        return <Person
          click={() => props.clicked( index )}
          name={person.name}
          age={person.age}
          key={person.id}
          changed={( event ) => props.changed( event, person.id )} />
      } );

export default persons;
```

App.js

```js
 render () {
    let persons = null;

    if ( this.state.showPersons ) {
      persons = <Persons
        persons={this.state.persons}
        clicked={this.deletePersonHandler}
        changed={this.nameChangedHandler} />;
    }

    return (
      <div className={classes.App}>
        <Cockpit
          appTitle={this.props.title}
          showPersons={this.state.showPersons}
          persons={this.state.persons}
          clicked={this.togglePersonsHandler} />
        {persons}
      </div>
    );
    // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
  }
```

Cockpit.ts

```js
import React from 'react';

import classes from './Cockpit.css';

const cockpit = ( props ) => {
    const assignedClasses = [];
    let btnClass = '';
    if (props.showPersons) {
        btnClass = classes.Red;
    }

    if ( props.persons.length <= 2 ) {
      assignedClasses.push( classes.red ); // classes = ['red']
    }
    if ( props.persons.length <= 1 ) {
      assignedClasses.push( classes.bold ); // classes = ['red', 'bold']
    }

    return (
        <div className={classes.Cockpit}>
            <h1>{ props.appTitle }</h1>
            <p className={assignedClasses.join( ' ' )}>This is really working!</p>
            <button
                className={btnClass}
                onClick={props.clicked}>Toggle Persons</button>
        </div>
    );
};

export default cockpit;
```



### 36. [LEGACY] Comparing Stateless and Stateful Components

Cố gắng create nhiều functional component càng  nhiều càng tốt bởi vì these component have a narow focus and clear responsibility => present something

Khi ứng dụng lớn => vấn đề về manage state, quản lý state từng component khó track 

![image-20200217230951177](./react-maximilan.assets/image-20200217230951177.png)  

index.js

```js
ReactDOM.render(<App title="Relevant Persons" />, document.getElementById('root'));
// add title
```



### 37. [LEGACY] Understanding the Component Lifecycle

Chỉ có những method này được chạy khi create

![image-20200217231629913](./react-maximilan.assets/image-20200217231629913.png)  

Creation call super constructor of parent in constructor 

render => how component look like, chỉ update những gì thay đổi vào real DOM



### 38. [LEGACY] Converting Stateless to Stateful Components

Person.js convert to class-base component

```js
import React, { Component } from 'react';

import classes from './Person.css';

class Person extends Component {
    render () {
        console.log( '[Person.js] Inside render()' );
        return (
            <div className={classes.Person}>
                <p onClick={this.props.click}>I'm {this.props.name} and I am {this.props.age} years old!</p>
                <p>{this.props.children}</p>
                <input type="text" onChange={this.props.changed} value={this.props.name} />
            </div>
        )
    }
}

export default Person;
```



### 39. [LEGACY] Component Creation Lifecycle in Action

App.js

```js
import React, { Component } from 'react';

import classes from './App.css';
import Persons from '../components/Persons/Persons';
import Cockpit from '../components/Cockpit/Cockpit';

class App extends Component {
    // Add
  constructor( props ) {
    super( props );
    console.log( '[App.js] Inside Constructor', props );
      // cách cũ
    this.state = {
      persons: [
        { id: 'asfa1', name: 'Max', age: 28 },
        { id: 'vasdf1', name: 'Manu', age: 29 },
        { id: 'asdf11', name: 'Stephanie', age: 26 }
      ],
      otherState: 'some other value',
      showPersons: false
    };
  }

  componentWillMount () {
    console.log( '[App.js] Inside componentWillMount()' );
  }

  componentDidMount () {
    console.log( '[App.js] Inside componentDidMount()' );
  }

  shouldComponentUpdate ( nextProps, nextState ) {
    console.log( '[UPDATE App.js] Inside shouldComponentUpdate', nextProps, nextState );
    return true;
  }

  componentWillUpdate ( nextProps, nextState ) {
    console.log( '[UPDATE App.js] Inside componentWillUpdate', nextProps, nextState );
  }

  componentDidUpdate () {
    console.log( '[UPDATE App.js] Inside componentDidUpdate' );
  }

  // state = {
  //   persons: [
  //     { id: 'asfa1', name: 'Max', age: 28 },
  //     { id: 'vasdf1', name: 'Manu', age: 29 },
  //     { id: 'asdf11', name: 'Stephanie', age: 26 }
  //   ],
  //   otherState: 'some other value',
  //   showPersons: false
  // }

  nameChangedHandler = ( event, id ) => {
    const personIndex = this.state.persons.findIndex( p => {
      return p.id === id;
    } );

    const person = {
      ...this.state.persons[personIndex]
    };

    // const person = Object.assign({}, this.state.persons[personIndex]);

    person.name = event.target.value;

    const persons = [...this.state.persons];
    persons[personIndex] = person;

    this.setState( { persons: persons } );
  }

  deletePersonHandler = ( personIndex ) => {
    // const persons = this.state.persons.slice();
    const persons = [...this.state.persons];
    persons.splice( personIndex, 1 );
    this.setState( { persons: persons } );
  }

  togglePersonsHandler = () => {
    const doesShow = this.state.showPersons;
    this.setState( { showPersons: !doesShow } );
  }

  render () {
    console.log( '[App.js] Inside render()' );
    let persons = null;

    if ( this.state.showPersons ) {
      persons = <Persons
        persons={this.state.persons}
        clicked={this.deletePersonHandler}
        changed={this.nameChangedHandler} />;
    }

    return (
      <div className={classes.App}>
        <Cockpit
          appTitle={this.props.title}
          showPersons={this.state.showPersons}
          persons={this.state.persons}
          clicked={this.togglePersonsHandler} />
        {persons}
      </div>
    );
    // return React.createElement('div', {className: 'App'}, React.createElement('h1', null, 'Does this work now?'));
  }
}

export default App;

```

![image-20200217233410546](./react-maximilan.assets/image-20200217233410546.png)  

thêm các hàm ở Person.js

![image-20200217233546090](./react-maximilan.assets/image-20200217233546090.png)    

### 39.1 lifecycle-creation-learning-card.pdf.pdf

![image-20200217231951961](./react-maximilan.assets/image-20200217231951961.png)

### 40. [LEGACY] componentWillUnmount().html

We saw the Component Lifecycle during Component Creation in Action. 

There also is one Lifecycle method which gets executed (when implemented) **right before** a Component is **removed** from the DOM: `componentWillUnmount()` .

*Here's an Example:*

**App.js** (using `class App extends Component` )

```js
state = {
    showUserComponent: true
};

removeUserHandler = () => {
    this.setState({showUserComponent: false});
}

render() {
    return (
        <div>
            {this.state.showUserComponent ? <User /> : null}
            <button onClick={this.removeUserHandler}>Remove User Component</button>
        </div>
    );
}
```

**User.js** (using `class User extends Component` )

```js
componentWillUnmount() {
    // Component is about to get removed => Perform any cleanup work here!
    console.log('I\'m about to be removed!');
}
```

In the above example, the User component is removed upon a button click (due to it being rendered conditionally and the condition result being changed to `false` ). This triggers `componentWillUnmount()` to run in the User component right before the component is destroyed and removed from the DOM.

### 41. [LEGACY] Component Updating Lifecycle Hooks

![image-20200217234533194](./react-maximilan.assets/image-20200217234533194.png)  







### 42. [LEGACY] Component Updating Lifecycle in Action

Persons.js (khi delete person)

```js

// Add 
componentWillReceiveProps ( nextProps ) {
        console.log( '[UPDATE Persons.js] Inside componentWillReceiveProps', nextProps );
    }

    shouldComponentUpdate ( nextProps, nextState ) {
        console.log( '[UPDATE Persons.js] Inside shouldComponentUpdate', nextProps, nextState );
        return nextProps.persons !== this.props.persons;
        // Neu delete return false => wil not update real DOM
    }

    componentWillUpdate ( nextProps, nextState ) {
        console.log( '[UPDATE Persons.js] Inside componentWillUpdate', nextProps, nextState );
    }

    componentDidUpdate () {
        console.log( '[UPDATE Persons.js] Inside componentDidUpdate' );
    }
```

![image-20200217235954666](./react-maximilan.assets/image-20200217235954666.png)

### 42.1 lifecycle-update-external-learning-card.pdf.pdf

![image-20200218000619489](./react-maximilan.assets/image-20200218000619489.png)

### 43. [LEGACY] Updating Lifecycle Hooks (Triggered by State Changes)

App.js khi ấn button thì state change => update

```js
 shouldComponentUpdate ( nextProps, nextState ) {
    console.log( '[UPDATE App.js] Inside shouldComponentUpdate', nextProps, nextState );
    return true;
  }

  componentWillUpdate ( nextProps, nextState ) {
    console.log( '[UPDATE App.js] Inside componentWillUpdate', nextProps, nextState );
  }

  componentDidUpdate () {
    console.log( '[UPDATE App.js] Inside componentDidUpdate' );
  }
```

![image-20200218001120621](./react-maximilan.assets/image-20200218001120621.png)

### 43.1 lifecycle-update-internal-learning-card.pdf.pdf

![image-20200218000554445](./react-maximilan.assets/image-20200218000554445.png)  



### 44. [LEGACY] Performance Gains with PureComponents

App.js add button show

```js
<button onClick={() => { this.setState( { showPersons: true } ) }}>Show Persons</button>

```

Khi click show liên tiếp 2 lần mặc dù k thay đổi gì nó vẫn render full lại 

![image-20200218002212440](./react-maximilan.assets/image-20200218002212440.png)  

![image-20200218002244856](./react-maximilan.assets/image-20200218002244856.png)  

Khi test thấy không render real DOM nhưng k có gì thay đổi mà gọi method render => performance issue

Nên mới có shouldComponentUpdate để check nếu có thay đổi mới update chứ để return true nó sẽ auto render

Persons.js bỏ // để test

```js
// shouldComponentUpdate ( nextProps, nextState ) {
    //     console.log( '[UPDATE Persons.js] Inside shouldComponentUpdate', nextProps, nextState );
    //     return nextProps.persons !== this.props.persons ||
    //         nextProps.changed !== this.props.changed ||
    //         nextProps.clicked !== this.props.clicked;
    //     // return true;
    // }

========== App.js ======
    // shouldComponentUpdate ( nextProps, nextState ) {
  //   console.log( '[UPDATE App.js] Inside shouldComponentUpdate', nextProps, nextState );
  //   return nextState.persons !== this.state.persons ||
  //     nextState.showPersons !== this.state.showPersons;
  // }
```

Cách 2: SD Shallow check thì comment đoạn trên lại và tiến hành như bên dưới:

`class App extends PureComponent {` và `class Persons extends PureComponent {`

Nên hạn chế SD vì prevent update child component and performance

### 45. [LEGACY] How React Updates the App & Component Tree

![image-20200218003926467](./react-maximilan.assets/image-20200218003926467.png)  

Vì có check ở trên cùng rồi

### 46. [LEGACY] Understanding React's DOM Updating Strategy

Nếu không thay đổi sẽ không render

![image-20200218004804987](./react-maximilan.assets/image-20200218004804987.png)

### 47. [LEGACY] Windows Users Must Read - File Downloads.html

**On Windows**, the `Aux.js` filename (will be used in next lectures) is not allowed in ZIP archives. Hence when extracting the attached source code, you might get prompted to rename the `Aux.js` file. You might also **face difficulties creating an Aux folder** and Aux.js file.

I really apologize for that inconvenience, Windows is really doing an amazing job here ;-).

Follow these fixes:

#### **1) Problems when unzipping the attached file:**

Simply **skip this step** (e.g. by pressing **"No"**) and **ignore** the upcoming error message.

In the extracted folder, you'll then find **all source files** EXCEPT for the `Aux.js` file. In later course modules (where we work on the course project), the `Aux.js` file can be found in an `Aux/` subfolder inside `hoc/` .

Make sure to take the `Aux.js` file **attached to this lecture** and place it inside the `hoc/` or `hoc/Aux/` folder (which ever of the two you got).

#### **2) Problems with the creation of an Aux folder and/ or file:**

Simply name both differently. For example, you may create an `Auxiliary` folder and name the file inside of it `Auxiliary.js` . Make sure to then adjust your imports (`import Aux from './path/to/Auxiliary/Auxiliary'` ) and you should be fine.

### 48. [LEGACY] Returning Adjacent Elements (React 16+)

WithClass.js

```js
import React from 'react';

const withClass = (props) => (
    <div className={props.classes}>
        {props.children}
    </div>
);

export default withClass;
```

Person.js

```js
render () {
        console.log( '[Person.js] Inside render()' );
        return (
            <WithClass classes={classes.Person}>
                <p onClick={this.props.click}>I'm {this.props.name} and I am {this.props.age} years old!</p>
                <p>{this.props.children}</p>
                <input type="text" onChange={this.props.changed} value={this.props.name} />
            </WithClass>
        )
        
        // cach 1: Nếu trả về array phải có tt key!!
        // return [
        //     <p key="1" onClick={this.props.click}>I'm {this.props.name} and I am {this.props.age} years old!</p>,
        //     <p key="2">{this.props.children}</p>,
        //     <input key="3" type="text" onChange={this.props.changed} value={this.props.name} />
        // ]
    }
```

Cockpit.css sửa lại tên class css

```css
.Button { 
    border: 1px solid blue;
    padding: 16px;
    background-color: green;
    font: inherit;
    color: white;
    cursor: pointer;
  }
  
  .Button:hover {
    background-color: lightgreen;
    color: black;
  }
  
  .Button.Red {
    background-color: red;
  }
  
  .Button.Red:hover {
    background-color: salmon;
    color: black;
  }
```

Cockpit.js

```js
const cockpit = ( props ) => {
    const assignedClasses = [];
    // Sửa
    let btnClass = classes.Button;
    if ( props.showPersons ) {
        btnClass = [classes.Button, classes.Red].join( ' ' );
    }
    
    // Sau đó có thẻ remove className trong thẻ div cha
     return (
        <Aux>
            <h1>{props.appTitle}</h1>
            <p className={assignedClasses.join( ' ' )}>This is really working!</p>
            <button
                className={btnClass}
                onClick={props.clicked}>Toggle Persons</button>
        </Aux>
    );
```

Aux.js

```js
const aux = (props) => props.children;

export default aux;
```





### 49. [LEGACY] React 16.2 Feature Fragments.html

If your project uses **React 16.2**, you can now use a built-in "Aux" component - a so called **fragment**.

It's actually not called `Aux` but you simply use `<>` - an empty JSX tag.

So the following code

```
<Aux>
    <h1>First Element</h1>
    <h1>Second Element</h1>
</Aux>
```

becomes

```
<>
    <h1>First Element</h1>
    <h1>Second Element</h1>
</>
```

Behind the scenes, it does the same our `Aux` component did.

### 50. [LEGACY] Understanding Higher Order Components (HOCs)

Sửa Person.js

```js
return (
      <WithClass classes={classes.Person}>
        <p onClick={this.props.click}>
          I'm {this.props.name} and I am {this.props.age} years old!
        </p>
        <p>{this.props.children}</p>
        <input
          type="text"
          onChange={this.props.changed}
          value={this.props.name}
        />
      </WithClass>
    );


// App.js cũng được thực hiện tương tự
return (
      <Aux>
        <button onClick={() => { this.setState( { showPersons: true } ) }}>Show Persons</button>
        <Cockpit
          appTitle={this.props.title}
          showPersons={this.state.showPersons}
          persons={this.state.persons}
          clicked={this.togglePersonsHandler} />
        {persons}
      </Aux>
    );
  }
}

export default withClass( App, classes.App );
```

![image-20200218010859299](./react-maximilan.assets/image-20200218010859299.png)  

WithClass.js
```js
import React, { Component } from 'react';

// const withClass = (WrappedComponent, className) => {
//     return (props) => (
//         <div className={className}>
//             <WrappedComponent />
//         </div>
//     )
// }
}


export default withClass;
```




### 51. [LEGACY] A Different Approach to HOCs

### 52. [LEGACY] Passing Unknown Props
WithClass.js
```js
import React, { Component } from 'react';

// const withClass = (WrappedComponent, className) => {
//     return (props) => (
//         <div className={className}>
//             <WrappedComponent {...props} />
//         </div>
//     )
// }

const withClass = (WrappedComponent, className) => {
    return class extends Component {
        render () {
            return (
                <div className={className}>
                    <WrappedComponent {...this.props} />
                </div>
            )
        }
    }
}
// dùng class

export default withClass;
```

### 53. [LEGACY] Using setState Correctly

counter App.js

```js
togglePersonsHandler = () => {
    const doesShow = this.state.showPersons;
    this.setState( ( prevState, props ) => {
      return {
        showPersons: !doesShow,
        toggleClicked: prevState.toggleClicked + 1
      }
    } );
  }
```

Get prevState, vào tab react để xem state => nên sử dụng cách này

### 54. [LEGACY] Validating Props

`npm install --save prop-types`

Person.js

```js
import PropTypes from 'prop-types';

Person.propTypes = {
    click: PropTypes.func,
    name: PropTypes.string,
    age: PropTypes.number,
    changed: PropTypes.func 
};
```

Persons.js

```js
import React, { PureComponent } from 'react';

import Person from './Person/Person';

class Persons extends PureComponent {
    // add
    constructor( props ) {
        super( props );
        console.log( '[Persons.js] Inside Constructor', props );
        this.lastPersonRef = React.createRef();
    }

 ....

    componentDidUpdate () {
        console.log( '[UPDATE Persons.js] Inside componentDidUpdate' );
    }

    render () {
        console.log( '[Persons.js] Inside render()' );
        return this.props.persons.map( ( person, index ) => {
            return <Person
                click={() => this.props.clicked( index )}
                name={person.name}
                position={index}
                age={person.age}
// add
                ref={this.lastPersonRef}
                key={person.id}
                changed={( event ) => this.props.changed( event, person.id )} />
        } );
    }
}

export default Persons;
```

Person

```js
import React, { Component } from 'react';
import PropTypes from 'prop-types';

import classes from './Person.css';
import withClass from '../../../hoc/WithClass';
import Aux from '../../../hoc/Aux';

class Person extends Component {
    constructor( props ) {
        super( props );
        console.log( '[Person.js] Inside Constructor', props );
        this.inputElement = React.createRef();
    }

    componentWillMount () {
        console.log( '[Person.js] Inside componentWillMount()' );
    }

    componentDidMount () {
        console.log( '[Person.js] Inside componentDidMount()' );
        // add
        if ( this.props.position === 0 ) {
            this.inputElement.current.focus();
        }
    }

    focus() {
        this.inputElement.current.focus();
    }

    render () {
        console.log( '[Person.js] Inside render()' );
        return (
            <Aux>
                <p onClick={this.props.click}>I'm {this.props.name} and I am {this.props.age} years old!</p>
                <p>{this.props.children}</p>
                <input
// add
                    ref={this.inputElement}
                    type="text"
                    onChange={this.props.changed}
                    value={this.props.name} />
            </Aux>
        )
    }
}

Person.propTypes = {
    click: PropTypes.func,
    name: PropTypes.string,
    age: PropTypes.number,
    changed: PropTypes.func
};

export default withClass( Person, classes.Person );
```



### 55. [LEGACY] Available PropTypes.html

Source: https://reactjs.org/docs/typechecking-with-proptypes.html

```js
import PropTypes from 'prop-types';

MyComponent.propTypes = {
  // You can declare that a prop is a specific JS primitive. By default, these
  // are all optional.
  optionalArray: PropTypes.array,
  optionalBool: PropTypes.bool,
  optionalFunc: PropTypes.func,
  optionalNumber: PropTypes.number,
  optionalObject: PropTypes.object,
  optionalString: PropTypes.string,
  optionalSymbol: PropTypes.symbol,

  // Anything that can be rendered: numbers, strings, elements or an array
  // (or fragment) containing these types.
  optionalNode: PropTypes.node,

  // A React element.
  optionalElement: PropTypes.element,

  // You can also declare that a prop is an instance of a class. This uses
  // JS's instanceof operator.
  optionalMessage: PropTypes.instanceOf(Message),

  // You can ensure that your prop is limited to specific values by treating
  // it as an enum.
  optionalEnum: PropTypes.oneOf(['News', 'Photos']),

  // An object that could be one of many types
  optionalUnion: PropTypes.oneOfType([
    PropTypes.string,
    PropTypes.number,
    PropTypes.instanceOf(Message)
  ]),

  // An array of a certain type
  optionalArrayOf: PropTypes.arrayOf(PropTypes.number),

  // An object with property values of a certain type
  optionalObjectOf: PropTypes.objectOf(PropTypes.number),

  // An object taking on a particular shape
  optionalObjectWithShape: PropTypes.shape({
    color: PropTypes.string,
    fontSize: PropTypes.number
  }),

  // You can chain any of the above with `isRequired` to make sure a warning
  // is shown if the prop isn't provided.
  requiredFunc: PropTypes.func.isRequired,

  // A value of any data type
  requiredAny: PropTypes.any.isRequired,

  // You can also specify a custom validator. It should return an Error
  // object if the validation fails. Don't `console.warn` or throw, as this
  // won't work inside `oneOfType`.
  customProp: function(props, propName, componentName) {
    if (!/matchme/.test(props[propName])) {
      return new Error(
        'Invalid prop `' + propName + '` supplied to' +
        ' `' + componentName + '`. Validation failed.'
      );
    }
  },

  // You can also supply a custom validator to `arrayOf` and `objectOf`.
  // It should return an Error object if the validation fails. The validator
  // will be called for each key in the array or object. The first two
  // arguments of the validator are the array or object itself, and the
  // current item's key.
  customArrayProp: PropTypes.arrayOf(function(propValue, key, componentName, location, propFullName) {
    if (!/matchme/.test(propValue[key])) {
      return new Error(
        'Invalid prop `' + propFullName + '` supplied to' +
        ' `' + componentName + '`. Validation failed.'
      );
    }
  })
};
```

### Requiring Single Child

With `PropTypes.element` you can specify that only a single child can be passed to a component as children.

```js
import PropTypes from 'prop-types';

class MyComponent extends React.Component {
  render() {
    // This must be exactly one element or it will warn.
    const children = this.props.children;
    return (
      <div>
        {children}
      </div>
    );
  }
}

MyComponent.propTypes = {
  children: PropTypes.element.isRequired
};
```

### Default Prop Values

You can define default values for your `props` by assigning to the special `defaultProps` property:

```js
class Greeting extends React.Component {
  render() {
    return (
      <h1>Hello, {this.props.name}</h1>
    );
  }
}

// Specifies the default values for props:
Greeting.defaultProps = {
  name: 'Stranger'
};

// Renders "Hello, Stranger":
ReactDOM.render(
  <Greeting />,
  document.getElementById('example')
);
```

The `defaultProps` will be used to ensure that `this.props.name` will have a value if it was not specified by the parent component. The `propTypes` typechecking happens after `defaultProps` are resolved, so typechecking will also apply to the `defaultProps`.

### 56. [LEGACY] Using References (ref)

focus vào input

Person.js

```js
class Person extends Component {
  constructor(props) {
    super(props);
    console.log("[Person.js] Inside Constructor", props);
    this.inputElement = React.createRef();
  }
    
componentDidMount () {
        console.log( '[Person.js] Inside componentDidMount()' );
    // focus first element
        if ( this.props.position === 0 ) {
            this.inputElement.current.focus();
        }
    }
// add
focus() {
    this.inputElement.current.focus();
  }
....

 <input
                    ref={this.inputElement}
                    type="text"
                    onChange={this.props.changed}
                    value={this.props.name} />
```



### 57. [LEGACY] More on the React ref API (16.3)

xem lại

Person.js add để Persons gọi được

```js
// add
focus() {
    this.inputElement.current.focus();
  }
```



Person.js, Persons.js call focus từ cha

```js

class Persons extends PureComponent {
    constructor( props ) {
        super( props );
        console.log( '[Persons.js] Inside Constructor', props );
        // add
        this.lastPersonRef = React.createRef();
    }

    componentWillMount () {
        console.log( '[Persons.js] Inside componentWillMount()' );
    }

    componentDidMount () {
        console.log( '[Persons.js] Inside componentDidMount()' );
        // add
        this.lastPersonRef.current.focus();
    }
 .....
 return this.props.persons.map( ( person, index ) => {
            return <Person
                click={() => this.props.clicked( index )}
                name={person.name}
                position={index}
                age={person.age}
// add
                ref={this.lastPersonRef}
                key={person.id}
                changed={( event ) => this.props.changed( event, person.id )} />
        } );


export default Persons;
```

// ở cuối file xoa withClass để tránh lỗi ở file Person.js thôi vì withClass cũng là 1 component mà nó k có method focus nên sẽ báo lỗi

Từ react 16 có cách fix

```js
import React, { Component } from 'react';

const withClass = (WrappedComponent, className) => {
    const WithClass = class extends Component {
        render () {
            return (
                <div className={className}>
                    <WrappedComponent ref={this.props.forwardedRef} {...this.props} />
                </div>
            )
        }
    }

    return React.forwardRef((props, ref) => {
        return <WithClass {...props} forwardedRef={ref} />
    });
}


export default withClass;
```





### 58. [LEGACY] The Context API (React 16.3)

Tạo button Login in Cockpit

```js
<button onClick={props.login}>Log in</button>
```
Cách 1: truyền thủ công qua hàm LoginHandler

App.js thêm wrap by AuthContext.Provider

```js
import AuthContext from '../context/auth-context';

const authContext = React.createContext(false);

loginHandler = () => {
    this.setState({ authenticated: true });
  };


if (this.state.showPersons) {
      persons = (
        <Persons
          persons={this.state.persons}
          clicked={this.deletePersonHandler}
          changed={this.nameChangedHandler}
// add
          isAuthenticated={this.state.authenticated}
        />
      );
    }
    
return (
      <Aux>
        <button
          onClick={() => {
            this.setState({ showCockpit: false });
          }}
        >
          Remove Cockpit
        </button>
        
          {this.state.showCockpit ? (
            <Cockpit
              title={this.props.appTitle}
              showPersons={this.state.showPersons}
              personsLength={this.state.persons.length}
              clicked={this.togglePersonsHandler}
            />
          ) : null}
          // add
          <AuthContext.Provider
          value={this.state.authenticated} >
          {persons}
        </AuthContext.Provider>
      </Aux>
    );
```

Person.js

```js
componentDidMount() {
    // this.inputElement.focus();
    this.inputElementRef.current.focus();
  }

render() {
return (
      <Aux>
       <AuthContext.Consumer> { auth => auth ? 
          <p>Authenticated!</p>
         : 
          <p>Please log in</p>
        }
       </AuthContext.Consumer>
    
// đây là cách 2, có thể xem lại cách 1 truyền thủ công
```

### 59. [LEGACY] More on the Context API (16.6)

New sample

App.js

```js
import React, { Component } from 'react';

import Login from './components/Login';
import Profile from './components/Profile';
import AuthContext from './auth-context';

class App extends Component {
  state = {
    isAuth: false
  };

  toggleAuth = () => {
    this.setState(prevState => {
      return {
        isAuth: !prevState.isAuth
      };
    });
  };

  render() {
    return (
      <AuthContext.Provider
        value={{ isAuth: this.state.isAuth, toggleAuth: this.toggleAuth }}
      >
        <Login />
        <Profile />
      </AuthContext.Provider>
    );
  }
}

export default App;

```

Login.js

```js
import React, { Component } from 'react';

import AuthContext from '../auth-context';

class Login extends Component {
  static contextType = AuthContext;

  componentDidMount() {
    console.log(this.context);
  }

  render() {
    return (
      <button onClick={this.context.toggleAuth}>
        {this.context.isAuth ? 'Logout' : 'Login'}
      </button>
    );
  }
}

export default Login;
// Không cần dùng Consumer mà truy cập bằng this.context

```

Profile.js

```js
import React from 'react';

import AuthContext from '../auth-context';

const profile = props => (
  <AuthContext.Consumer>
    {authContext => {
      return (
        <h1>{authContext.isAuth ? 'You are logged in!' : 'Not logged in!'}</h1>
      );
    }}
  </AuthContext.Consumer>
);

export default profile;

```

auth-context.js

```js
import React from 'react';

export default React.createContext({
  isAuth: false,
  toggleAuth: () => {}
});
// Fix lỗi import từ App.js
```



### 60. [LEGACY] Updated Lifecycle Hooks (React 16.3)

Từ react 16.3 nên tránh sử dụng componentWillUpdate, componentWillMount, componentWillReceiveProps

App.js

```js
static getDerivedStateFromProps(nextProps, prevState) {
    console.log(
      "[UPDATE App.js] Inside getDerivedStateFromProps",
      nextProps,
      prevState
    );
// return old state, will never update
    return prevState;
  }

  getSnapshotBeforeUpdate() {
    console.log(
      "[UPDATE App.js] Inside getSnapshotBeforeUpdate"
    );
  }
```

![image-20200222114423992](./react-maximilan.assets/image-20200222114423992.png)  

![image-20200222114605448](./react-maximilan.assets/image-20200222114605448.png)  

Lưu lại vị trí scroll trước khi update, ấn buton để check

https://reactjs.org/blog/2020/02/26/react-v16.13.0.html

### 61. [LEGACY] The memo Method (16.4)

Áp dụng cho functional component

`export default React.memno(cockpit);`

### 62. [LEGACY] Wrap Up

### 63. [LEGACY] Useful Resources & Links.html

- State & Lifecycle: https://reactjs.org/docs/state-and-lifecycle.html
- PropTypes: https://reactjs.org/docs/typechecking-with-proptypes.html
- Higher Order Components: https://reactjs.org/docs/higher-order-components.html
- Refs: https://reactjs.org/docs/refs-and-the-dom.html

## 8. A Real App The Burger Builder (Basic Version)

### 1. About React Hooks.html

As mentioned before, we'll build the course project **without React Hooks for now** (React Hooks are a new feature, introduced with React 16.8, I'll introduce them in-depth later).

Towards the end of the course, we'll have an entire module where we convert it to use React Hooks though (after having yet another Hooks deep-dive module of course).


### 2. Module Introduction
Build a burger app

### 3. Planning an App in React - Core Steps

![image-20200218230946207](./react-maximilan.assets/image-20200218230946207.png)  

Xác định ở bước 3 cái nào là stateless stateful

### 4. Planning our App - Layout and Component Tree

Xem lại
### 5. Planning the State
![image-20200218231727724](./react-maximilan.assets/image-20200218231727724.png)

### 6. Setting up the Project

enable css modules: npm run eject 

Vào google font, Vào tab CUSTOMIZE chọn bold 

![image-20200218232741079](./react-maximilan.assets/image-20200218232741079.png)  

index.html

```html
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
    <title>MyBurger</title>
<!-- add new -->
```

index.css

```css
body {
  margin: 0;
  padding: 0;
  font-family: "Open Sans", sans-serif;
}

```
### 7. Creating a Layout Component

Create folder Layout

Aux.js

```js
const aux = (props) => props.children;

export default aux;
```

Layout.js, css

```js
import React from 'react';

import Aux from '../../hoc/Aux';
import classes from './Layout.css';

const layout = ( props ) => (
    <Aux>
        <div>Toolbar, SideDrawer, Backdrop</div>
        <main className={classes.Content}>
            {props.children}
        </main>
    </Aux>
);

export default layout;
```

App.js

```js
import React, { Component } from 'react';

import Layout from './components/Layout/Layout';
import BurgerBuilder from './containers/BurgerBuilder/BurgerBuilder';

class App extends Component {
  render () {
    return (
      <div>
        <Layout>
          <BurgerBuilder />
        </Layout>
      </div>
    );
  }
}

export default App;

```

### 8. Starting Implementation of The Burger Builder Container

BurgerBuilder

```js
import React, { Component } from 'react';

import Aux from '../../hoc/Aux';
import Burger from '../../components/Burger/Burger';

class BurgerBuilder extends Component {
    

    render () {
        return (
            <Aux>
                <div>Burger</div>
                <div>Build Controls</div>

            </Aux>
        );
    }
}

export default BurgerBuilder;
```
### 9. Adding a Dynamic Ingredient Component
BurgerIngredient.js , .css

```js
import React, { Component } from 'react';
import PropTypes from 'prop-types';

import classes from './BurgerIngredient.css';

class BurgerIngredient extends Component {
    render () {
        let ingredient = null;

        switch ( this.props.type ) {
            case ( 'bread-bottom' ):
                ingredient = <div className={classes.BreadBottom}></div>;
                break;
            case ( 'bread-top' ):
                ingredient = (
                    <div className={classes.BreadTop}>
                        <div className={classes.Seeds1}></div>
                        <div className={classes.Seeds2}></div>
                    </div>
                );
                break;
            case ( 'meat' ):
                ingredient = <div className={classes.Meat}></div>;
                break;
            case ( 'cheese' ):
                ingredient = <div className={classes.Cheese}></div>;
                break;
            case ( 'bacon' ):
                ingredient = <div className={classes.Bacon}></div>;
                break;
            case ( 'salad' ):
                ingredient = <div className={classes.Salad}></div>;
                break;
            default:
                ingredient = null;
        }

        return ingredient;
    }
}

## 10. Adding Prop Type Validation
BurgerIngredient.propTypes = {
    type: PropTypes.string.isRequired
};

export default BurgerIngredient;
```



### 10. Adding Prop Type Validation

Khi xài phải convert qua class-based component


### 11. Starting the Burger Component

Add Burger.js ,.css

```js
import React from 'react';

import classes from './Burger.css';
import BurgerIngredient from './BurgerIngredient/BurgerIngredient';

const burger = ( props ) => {
    
    return (
        <div className={classes.Burger}>
            <BurgerIngredient type="bread-top" />
            <BurgerIngredient type="cheese" />
            <BurgerIngredient type="meat" />
            <BurgerIngredient type="bread-bottom" />
        </div>
    );
};

export default burger;
```

Burger.css

```css
.Burger {
    width: 100%;
    margin: auto;
    height: 250px;
    overflow: scroll;
    text-align: center;
    font-weight: bold;
    font-size: 1.2rem;
}

@media (min-width: 500px) and (min-height: 400px) {
    .Burger {
        width: 350px;
        height: 300px;
    }
}

@media (min-width: 500px) and (min-height: 401px) {
    .Burger {
        width: 450px;
        height: 400px;
    }
}

@media (min-width: 1000px) and (min-height: 700px) {
    .Burger {
        width: 700px;
        height: 600px;
    }
}
```

BurgerBuilder.js sửa thành

```js
class BurgerBuilder extends Component {
    

    render () {
        return (
            <Aux>
                <Burger />
                <div>Build Controls</div>

            </Aux>
        );
    }
}

export default BurgerBuilder;
```




### 12. Outputting Burger Ingredients Dynamically

BurgerBuilder.js

```js
import React, { Component } from 'react';

import Aux from '../../hoc/Aux';
import Burger from '../../components/Burger/Burger';

class BurgerBuilder extends Component {
    // constructor(props) {
    //     super(props);
    //     this.state = {...}
    // }
    state = {
        ingredients: {
            salad: 0,
            bacon: 0,
            cheese: 0,
            meat: 0
        }
    }

    render () {
        return (
            <Aux>
                <Burger ingredients={this.state.ingredients} />
                <div>Build Controls</div>
            </Aux>
        );
    }
}

export default BurgerBuilder;
```

Burger.js

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys

```js
const object1 = {
  a: 'somestring',
  b: 42,
  c: false
};

console.log(Object.keys(object1));
// expected output: Array ["a", "b", "c"]

------------

const object1 = {
  a: 0,
  b: 2,
  c: 1
};

console.log(Object.keys(object1));
// expected output: Array ["a", "b", "c"]

    let transformedIngredients = Object.keys( object1 )
        .map( igKey => {
          console.log( object1[igKey]);
            return [...Array(object1[igKey] )];
        });
console.log(transformedIngredients);

> Array ["a", "b", "c"]
> 0
> 2
> 1
> Array [Array [], Array [undefined, undefined], Array [undefined]]

--------------------
const object1 = {
  a: 0,
  b: 2,
  c: 1
};

console.log(Object.keys(object1));
// expected output: Array ["a", "b", "c"]

    let transformedIngredients = Object.keys( object1 )
        .map( igKey => {
          console.log( object1[igKey]);
            return [...Array(object1[igKey] )].map( ( _, i ) => {
                return igKey + i;
            });
        });
console.log(transformedIngredients);

> Array [Array [], Array ["b0", "b1"], Array ["c0"]]

---------------------------------
    const object1 = {
  a: 0,
  b: 2,
  c: 1
};

console.log(Object.keys(object1));
// expected output: Array ["a", "b", "c"]

    let transformedIngredients = Object.keys( object1 )
        .map( igKey => {
          console.log( object1[igKey]);
            return [...Array(object1[igKey] )].map( ( _, i ) => {
                return igKey + i;
            });
        }).reduce((arr, el) => {
            return arr.concat(el)
        }, []);
console.log(transformedIngredients);

> Array ["b0", "b1", "c0"]

```



```js
import React from 'react';

import classes from './Burger.css';
import BurgerIngredient from './BurgerIngredient/BurgerIngredient';

const burger = ( props ) => {
    let transformedIngredients = Object.keys( props.ingredients )
        .map( igKey => {
            return [...Array( props.ingredients[igKey] )].map( ( _, i ) => {
                return <BurgerIngredient key={igKey + i} type={igKey} />;
            } );
        } )
        .reduce((arr, el) => {
            return arr.concat(el)
        }, []);
    // # 13
    if (transformedIngredients.length === 0) {
        transformedIngredients = <p>Please start adding ingredients!</p>;
    }
    return (
        <div className={classes.Burger}>
            <BurgerIngredient type="bread-top" />
            {transformedIngredients}
            <BurgerIngredient type="bread-bottom" />
        </div>
    );
};

export default burger;
```

_ : không care about itself

### 13. Calculating the Ingredient Sum Dynamically

![image-20200222131833225](./react-maximilan.assets/image-20200222131833225.png)  

(arr, el): arr là previous value, el là current value

[] is initial value of the reduce value


### 14. Adding the Build Control Component

BuildControls.js

```js
import React from 'react';

import classes from './BuildControls.css';
import BuildControl from './BuildControl/BuildControl';

const controls = [
    { label: 'Salad', type: 'salad' },
    { label: 'Bacon', type: 'bacon' },
    { label: 'Cheese', type: 'cheese' },
    { label: 'Meat', type: 'meat' },
];

const buildControls = (props) => (
    <div className={classes.BuildControls}>
        <p>Current Price: <strong>{props.price.toFixed(2)}</strong></p>
        {controls.map(ctrl => (
            <BuildControl 
                key={ctrl.label} 
                label={ctrl.label}
                 />
        ))}
        <button 
            className={classes.OrderButton}
            disabled={!props.purchasable}>ORDER NOW</button>
    </div>
);

export default buildControls;
```
BuildControls.css

https://www.w3schools.com/css/tryit.asp?filename=trycss3_flexbox_flex-flow_row_wrap

https://www.w3schools.com/css/css3_flexbox.asp

```css
.BuildControls {
    width: 100%;
    background-color: #CF8F2E;
    display: flex;
    flex-flow: column; // nếu muốn nằm ngang thay bằng row wrap
    
    align-items: center;
    box-shadow: 0 2px 1px #ccc;
    margin: auto;
    padding: 10px 0;
}

.OrderButton {
    background-color: #DAD735;
    outline: none;
    cursor: pointer;
    border: 1px solid #966909;
    color: #966909;
    font-family: inherit;
    font-size: 1.2em;
    padding: 15px 30px;
    box-shadow: 2px 2px 2px #966909;
}

.OrderButton:hover, .OrderButton:active {
    background-color: #A0DB41;
    border: 1px solid #966909;
    color: #966909;
}

.OrderButton:disabled {
    background-color: #C7C6C6;
    cursor: not-allowed;
    border: 1px solid #ccc;
    color: #888888;
}

.OrderButton:not(:disabled) {
    animation: enable 0.3s linear;
}

@keyframes enable {
    0% {
        transform: scale(1);
    }
    60% {
        transform: scale(1.1);
    }
    100% {
        transform: scale(1);
    }
}
```
BuildControl.js
```js
import React from 'react';

import classes from './BuildControl.css';

const buildControl = (props) => (
    <div className={classes.BuildControl}>
        <div className={classes.Label}>{props.label}</div>
        <button 
            className={classes.Less} 
            onClick={props.removed} 
            disabled={props.disabled}>Less</button>
        <button 
            className={classes.More} 
            onClick={props.added}>More</button>
    </div>
);

export default buildControl;
```

BuildControl.css

https://www.w3schools.com/css/tryit.asp?filename=trycss3_flexbox_justify-content_space-between

```css
.BuildControl {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 5px 0;
}

.BuildControl button {
    display: block;
    font: inherit;
    padding: 5px;
    margin: 0 5px;
    width: 80px;
    border: 1px solid #AA6817;
    cursor: pointer;
    outline: none;
}


.BuildControl button:disabled {
    background-color: #AC9980;
    border: 1px solid #7E7365;
    color: #ccc;
    cursor: default;
}

.BuildControl button:hover:disabled {
    background-color: #AC9980;
    color: #ccc;
    cursor: not-allowed;
}

.Label {
    padding: 10px;
    font-weight: bold;
    width: 80px;
}

.BuildControl .Less {  
    background-color: #D39952;
    color: white;
}

.BuildControl .More {
    background-color: #8F5E1E;
    color: white;
}

.BuildControl .Less:hover, .BuildControl .Less:active {  
    background-color: #DAA972;
    color: white;
}

.BuildControl .More:hover,.BuildControl .More:active {
    background-color: #99703F;
    color: white;
}
```

Vào BurgerBuilder.js thay BuildControls vào

![image-20200303012456798](./react-maximilan.assets/image-20200303012456798.png)

### 15. Outputting Multiple Build Controls

```js
<!DOCTYPE html>
<html>
<body>

<h2>JavaScript Objects</h2>

<p id="demo"></p>

<script>
// Create an object:
var ingredients = {type:"Fiat", model:"500", color:"white"};
const sum = Object.keys( ingredients )
            .map( igKey => {
            console.log("- key: ", igKey);
            console.log(ingredients[igKey]);
                return ingredients[igKey];
            });
 console.log(ingredients["type"]);
// Display some data from the object:
document.getElementById("demo").innerHTML = "The car type is " + sum[0];
</script>

</body>
</html>
// test
```



### 16. Connecting State to Build Controls

BurgerBuilder.js 

```js
const INGREDIENT_PRICES = {
    salad: 0.5,
    cheese: 0.4,
    meat: 1.3,
    bacon: 0.7
};
....

// Add
    addIngredientHandler = ( type ) => {
        const oldCount = this.state.ingredients[type];
        const updatedCount = oldCount + 1;
        const updatedIngredients = {
            ...this.state.ingredients
        };
        updatedIngredients[type] = updatedCount;
        const priceAddition = INGREDIENT_PRICES[type];
        const oldPrice = this.state.totalPrice;
        const newPrice = oldPrice + priceAddition;
        this.setState( { totalPrice: newPrice, ingredients: updatedIngredients } );
        this.updatePurchaseState(updatedIngredients);
    }

    // ## 17
    removeIngredientHandler = ( type ) => {
        const oldCount = this.state.ingredients[type];
        if ( oldCount <= 0 ) {
            return;
        }
        const updatedCount = oldCount - 1;
        const updatedIngredients = {
            ...this.state.ingredients
        };
        updatedIngredients[type] = updatedCount;
        const priceDeduction = INGREDIENT_PRICES[type];
        const oldPrice = this.state.totalPrice;
        const newPrice = oldPrice - priceDeduction;
        this.setState( { totalPrice: newPrice, ingredients: updatedIngredients } );
        this.updatePurchaseState(updatedIngredients);
    }

    render () {
        // 17 add check valid value => true or false
        const disabledInfo = {
            ...this.state.ingredients
        };
        for ( let key in disabledInfo ) {
            disabledInfo[key] = disabledInfo[key] <= 0
        }
        // {salad: true, meat: false, ...}
        return (
            <Aux>
                <Burger ingredients={this.state.ingredients} />
                <BuildControls
// add
                    ingredientAdded={this.addIngredientHandler}
                    ingredientRemoved={this.removeIngredientHandler}
                    disabled={disabledInfo}
                    purchasable={this.state.purchasable}
                    price={this.state.totalPrice} />
            </Aux>
        );
    }
}

export default BurgerBuilder;
```





### 17. Removing Ingredients Safely

### 18. Displaying and Updating the Burger Price

BuildControls.js

```js

const buildControls = (props) => (
    <div className={classes.BuildControls}>
        <p>Current Price: <strong>{props.price.toFixed(2)}</strong></p>
            

```



### 19. Adding the Order Button

BuildControls.js add props purchasable

```js

const buildControls = (props) => (
    <div className={classes.BuildControls}>
        <p>Current Price: <strong>{props.price.toFixed(2)}</strong></p>
        {controls.map(ctrl => (
            <BuildControl 
                key={ctrl.label} 
                label={ctrl.label}
                added={() => props.ingredientAdded(ctrl.type)}
                removed={() => props.ingredientRemoved(ctrl.type)}
                disabled={props.disabled[ctrl.type]} />
        ))}
        
        // Add new button here
        <button 
            className={classes.OrderButton}
            disabled={!props.purchasable}>ORDER NOW</button>
    </div>
);
```

BurgerBuilder.js

```js
updatePurchaseState (ingredients) {
        const sum = Object.keys( ingredients )
            .map( igKey => {
                return ingredients[igKey];
            } )
            .reduce( ( sum, el ) => {
                return sum + el;
            }, 0 );
        this.setState( { purchasable: sum > 0 } );
    }
```

Khi thêm hay bớt nhớ thêm hàm này vào và truyền vào trong

![image-20200310202222263](./react-maximilan.assets/image-20200310202222263.png)

### 20. Creating the Order Summary Modal

Add folder UI/

Backdrop.js, css create new in session 22

```js
import React from 'react';

import classes from './Backdrop.css';

const backdrop = (props) => (
    props.show ? <div className={classes.Backdrop} onClick={props.clicked}></div> : null
);

export default backdrop;
```

Modal.js, css create new

```js
import React from 'react';

import classes from './Modal.css';
import Aux from '../../../hoc/Aux';
import Backdrop from '../Backdrop/Backdrop';

const modal = ( props ) => (
    <Aux>
        <Backdrop show={props.show} clicked={props.modalClosed} />
        <div
            className={classes.Modal}
            style={{
                transform: props.show ? 'translateY(0)' : 'translateY(-100vh)',
                opacity: props.show ? '1' : '0'
            }}>
            {props.children}
        </div>
    </Aux>
);

export default modal;
```

BurgerBuilder.js create new

```js
return (
            <Aux>
    // add
                <Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>
                    <OrderSummary 
                        ingredients={this.state.ingredients}
                        purchaseCancelled={this.purchaseCancelHandler}
                        purchaseContinued={this.purchaseContinueHandler} />
                </Modal>
                <Burger ingredients={this.state.ingredients} />
                ....
            </Aux>
        );
```

OrderSummary.js create new

```js
import React from 'react';

import Aux from '../../../hoc/Aux';
import Button from '../../UI/Button/Button';

const orderSummary = ( props ) => {
    const ingredientSummary = Object.keys( props.ingredients )
        .map( igKey => {
            return (
                <li key={igKey}>
                    <span style={{ textTransform: 'capitalize' }}>{igKey}</span>: {props.ingredients[igKey]}
                </li> );
        } );

    return (
        <Aux>
            <h3>Your Order</h3>
            <p>A delicious burger with the following ingredients:</p>
            <ul>
                {ingredientSummary}
            </ul>
            <p>Continue to Checkout?</p>
            <Button btnType="Danger" clicked={props.purchaseCancelled}>CANCEL</Button>
            <Button btnType="Success" clicked={props.purchaseContinued}>CONTINUE</Button>
        </Aux>
    );
};

export default orderSummary;
```

![image-20200303210745211](./react-maximilan.assets/image-20200303210745211.png)



### 21. Showing & Hiding the Modal (with Animation!)

Add BurgerBuilder.js add purchasing

```js
// phải là arrow func
purchaseHandler = () => {
        this.setState({purchasing: true});
    }
...
// Add show or hide
<Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>
                    <OrderSummary 
                        ingredients={this.state.ingredients}
                        purchaseCancelled={this.purchaseCancelHandler}
                        purchaseContinued={this.purchaseContinueHandler} />
            </Modal>
             <Burger ingredients={this.state.ingredients} />
<BuildControls
                    ingredientAdded={this.addIngredientHandler}
                    ingredientRemoved={this.removeIngredientHandler}
                    disabled={disabledInfo}
                    purchasable={this.state.purchasable}
// Add
                    ordered={this.purchaseHandler}
                    price={this.state.totalPrice} />
```

BuildControls.js

```js
<button 
            className={classes.OrderButton}
            disabled={!props.purchasable}
            onClick={props.ordered}>ORDER NOW</button>
```

Modal.js add style

```js
  <div
            className={classes.Modal}
            style={{
                transform: props.show ? 'translateY(0)' : 'translateY(-100vh)',
                opacity: props.show ? '1' : '0'
            }}>
            {props.children}
        </div>
```

![image-20200219213331213](./react-maximilan.assets/image-20200219213331213.png)  

https://www.w3schools.com/cssref/css3_pr_transform.asp

translateY là trượt xuống nếu số dương

### 22. Implementing the Backdrop Component

Sửa BackDrop.js, Modal.js để wrap

BurgerBuilder.js

```js
purchaseCancelHandler = () => {
        this.setState({purchasing: false});
    }
```

BackDrop.js

```js
import React from 'react';

import classes from './Backdrop.css';

const backdrop = (props) => (
    props.show ? <div className={classes.Backdrop} onClick={props.clicked}></div> : null
);

export default backdrop;
```

Modal.js

```js
const modal = ( props ) => (
    <Aux>
    // add
        <Backdrop show={props.show} clicked={props.modalClosed} />
        <div
            className={classes.Modal}
            style={{
                transform: props.show ? 'translateY(0)' : 'translateY(-100vh)',
                opacity: props.show ? '1' : '0'
            }}>
            {props.children}
        </div>
    </Aux>
);
```

BurgerBuilder.js

```js
// add new function
purchaseCancelHandler = () => {
        this.setState({purchasing: false});
    }

    render () {
        ....
        return (
            <Aux>
            // add modalClosed
                <Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>
```



### 23. Adding a Custom Button Component

OrderSummary.js

```js
<p>Continue to Checkout?</p>
            <Button btnType="Danger" clicked={props.purchaseCancelled}>CANCEL</Button>
            <Button btnType="Success" clicked={props.purchaseContinued}>CONTINUE</Button>
```

Button.js

```js
import React from 'react';

import classes from './Button.css';

const button = (props) => (
    <button
        className={[classes.Button, classes[props.btnType]].join(' ')}
        onClick={props.clicked}>
            {props.children}
	</button>
);

export default button;
```

OrderSummary được gọi trong BurgerBuilder



### 24. Implementing the Button Component

BurgerBuilder.js

```js

    purchaseCancelHandler = () => {
        this.setState({purchasing: false});
    }

    purchaseContinueHandler = () => {
        alert('You continue!');
    }
....

<Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>
                    <OrderSummary 
                        ingredients={this.state.ingredients}
/// add
                        purchaseCancelled={this.purchaseCancelHandler}
                        purchaseContinued={this.purchaseContinueHandler} />
                </Modal>
```



### 25. Adding the Price to the Order Summary

OrderSummary.js add

```js
<p><strong>Total Price: {props.price.toFixed(2)}</strong></p>
```

BurgerBuilder.js thêm total

```js
<Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>
                    <OrderSummary 
                        ingredients={this.state.ingredients}
  						// add
						price={this.state.totalPrice}
                        purchaseCancelled={this.purchaseCancelHandler}
                        purchaseContinued={this.purchaseContinueHandler} />
                </Modal>
```



### 26. Adding a Toolbar

Add components/Navigation/

ToolBar.js

```js
import React from 'react';

import classes from './Toolbar.css';
import Logo from '../../Logo/Logo';
import NavigationItems from '../NavigationItems/NavigationItems';
import DrawerToggle from '../SideDrawer/DrawerToggle/DrawerToggle';

const toolbar = ( props ) => (
    <header className={classes.Toolbar}>
         <div>
    		MENU
		</div>
        <div>
            Logo
        </div>
        <nav className={classes.DesktopOnly}>
            NavigationItems
        </nav>
    </header>
);

export default toolbar;
```

ToolBar.css

```css
.Toolbar {
    height: 56px;
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
    background-color: #703B09;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    box-sizing: border-box;
    z-index: 90;
}

.Toolbar nav {
    height: 100%;
}

.Logo {
    height: 80%;
}

@media (max-width: 499px) {
    .DesktopOnly {
        display: none;
    }
}
```

Vào Layout.js add và cập nhật lại css cho Layout.css

```js
import React from 'react';

import Aux from '../../hoc/Aux';
import classes from './Layout.css';

const layout = ( props ) => (
    <Aux>
    // add
        <Toolbar />
        <main className={classes.Content}>
            {props.children}
        </main>
    </Aux>
);

export default layout;
```

Layout.css

```css
.Content {
    margin-top: 72px;
}
```

![image-20200310204406410](./react-maximilan.assets/image-20200310204406410.png)

### 27. Using a Logo in our Application

Logo.js

```js
import React from 'react';

import burgerLogo from '../../assets/images/burger-logo.png';
import classes from './Logo.css';

const logo = (props) => (
    <div className={classes.Logo} >
        <img src={burgerLogo} alt="MyBurger" />
    </div>
);

export default logo;
// # 30 mới thêm style={{height: props.height}}
```

Sau đó vào ToolBar.js thêm `<Logo />`, hình thì được load như trên vì webpack manage

ToolBar.js

```js

const toolbar = ( props ) => (
    <header className={classes.Toolbar}>
        Menu
        <div className={classes.Logo}>
            <Logo />
        </div>
        <nav className={classes.DesktopOnly}>
            NavigationItems
        </nav>
    </header>
);

export default toolbar;
```



### 28. Adding Reusable Navigation Items

NavigationItems.js

```js
import React from 'react';

import classes from './NavigationItems.css';
import NavigationItem from './NavigationItem/NavigationItem';

const navigationItems = () => (
    <ul className={classes.NavigationItems}>
        <NavigationItem link="/" active>Burger Builder</NavigationItem>
        <NavigationItem link="/">Checkout</NavigationItem>
    </ul>
);

export default navigationItems;
```

NavigationItem.js

```js
import React from 'react';

import classes from './NavigationItem.css';

const navigationItem = ( props ) => (
    <li className={classes.NavigationItem}>
        <a 
            href={props.link} 
            className={props.active ? classes.active : null}>{props.children}</a>
    </li>
);

export default navigationItem;
```

NavigationItem.css

```css
.NavigationItem {
    margin: 10px 0;
    box-sizing: border-box;
    display: block;
    width: 100%;
}

.NavigationItem a {
    color: #8F5C2C;
    text-decoration: none;
    width: 100%;
    box-sizing: border-box;
    display: block;
}

.NavigationItem a:hover,
.NavigationItem a:active,
.NavigationItem a.active {
    color: #40A4C8;
}

@media (min-width: 500px) {
    .NavigationItem {
        margin: 0;
        display: flex;
        height: 100%;
        width: auto;
        align-items: center;
    }
    
    .NavigationItem a {
        color: white;
        height: 100%;
        padding: 16px 10px;
        border-bottom: 4px solid transparent;
    }
    
    .NavigationItem a:hover,
    .NavigationItem a:active,
    .NavigationItem a.active {
        background-color: #8F5C2C;
        border-bottom: 4px solid #40A4C8;
        color: white;
    }
}
```



Vào ToolBar.js add `<NavigationItems />`

```js

const toolbar = ( props ) => (
    <header className={classes.Toolbar}>
        <DrawerToggle clicked={props.drawerToggleClicked} />
        <div className={classes.Logo}>
            <Logo />
        </div>
        <nav className={classes.DesktopOnly}>
            <NavigationItems />
        </nav>
    </header>
);

export default toolbar;
```



### 29. Creating a Responsive Sidedrawer

SideDrawer.js

```js
import React from 'react';

import Logo from '../../Logo/Logo';
import NavigationItems from '../NavigationItems/NavigationItems';
import classes from './SideDrawer.css';
import Backdrop from '../../UI/Backdrop/Backdrop';
import Aux from '../../../hoc/Aux';

const sideDrawer = ( props ) => {
    let attachedClasses = [classes.SideDrawer, classes.Close];
    if (props.open) {
        attachedClasses = [classes.SideDrawer, classes.Open];
    }
    return (
        <Aux>
            <Backdrop show={props.open} clicked={props.closed}/>
            <div className={attachedClasses.join(' ')}>
                // # 30
                <div className={classes.Logo}>
                    <Logo />
                </div>
                <nav>
                    <NavigationItems />
                </nav>
            </div>
        </Aux>
    );
};

export default sideDrawer;
```

Layout.js

```js
 return (
            <Aux>
                <Toolbar drawerToggleClicked={this.sideDrawerToggleHandler} />
                <SideDrawer
                    open={this.state.showSideDrawer}
                    closed={this.sideDrawerClosedHandler} />
                <main className={classes.Content}>
                    {this.props.children}
                </main>
            </Aux>
        )
```



Logo.js add style

```js
const logo = (props) => (
    <div className={classes.Logo} style={{height: props.height}}>
        <img src={burgerLogo} alt="MyBurger" />
    </div>
);
```

SideDrawer.css

```css
.SideDrawer {
    position: fixed;
    width: 280px;
    max-width: 70%;
    height: 100%;
    left: 0;
    top: 0;
    z-index: 200;
    background-color: white;
    padding: 32px 16px;
    box-sizing: border-box;
    transition: transform 0.3s ease-out;
}

@media (min-width: 500px) {
    .SideDrawer {
        display: none;
    }
}

.Open {
    transform: translateX(0);
}

.Close {
    transform: translateX(-100%);
}


// add 
.Logo {
    height: 11%;
    margin-bottom: 32px;
}
```





### 30. Working on Responsive Adjustments

Toolbar.js ADD CLASS  Logo

```js
const toolbar = ( props ) => (
    <header className={classes.Toolbar}>
        <DrawerToggle clicked={props.drawerToggleClicked} />
        <div className={classes.Logo}>
            <Logo />
        </div>
        <nav className={classes.DesktopOnly}>
            <NavigationItems />
        </nav>
    </header>
);
```



### 31. More about Responsive Adjustments

navigationItem.css

```css

@media (min-width: 500px) {
    .NavigationItem {
        margin: 0;
        display: flex;
        height: 100%;
        width: auto;
        align-items: center;
    }
    
    .NavigationItem a {
        color: white;
        height: 100%;
        padding: 16px 10px;
        border-bottom: 4px solid transparent;
    }
    
    .NavigationItem a:hover,
    .NavigationItem a:active,
    .NavigationItem a.active {
        background-color: #8F5C2C;
        border-bottom: 4px solid #40A4C8;
        color: white;
    }
    
    /// mobile
```


ToolBar.js add css class

```js
<nav className={classes.DesktopOnly}>
            <NavigationItems />
        </nav>
```




### 32. Reusing the Backdrop

sideDrawer.js

```js
// add
const sideDrawer = ( props ) => {
    let attachedClasses = [classes.SideDrawer, classes.Close];
    if (props.open) {
        attachedClasses = [classes.SideDrawer, classes.Open];
    }
    
return (
        <Aux>
            <Backdrop show={props.open} clicked={props.closed}/>
    // add
    <div className={attachedClasses.join(' ')}>
                <div className={classes.Logo}>
                    <Logo />
                </div>
                <nav>
                    <NavigationItems />
                </nav>
            </div
```

Layout.js

```js
class Layout extends Component {
    state = {
        showSideDrawer: false
    }

    sideDrawerClosedHandler = () => {
        this.setState( { showSideDrawer: false } );
    }
// 33
    sideDrawerToggleHandler = () => {
        this.setState( ( prevState ) => {
            return { showSideDrawer: !prevState.showSideDrawer };
        } );
    }

render () {
        return (
            <Aux>
                <Toolbar />
// add
                <SideDrawer
                    open={this.state.showSideDrawer}
                    closed={this.sideDrawerClosedHandler} />
```



### 33. Adding a Sidedrawer Toggle Button

DrawToggle.js

```js
import React from 'react';

import classes from './DrawerToggle.css';

const drawerToggle = (props) => (
    <div className={classes.DrawerToggle} onClick={props.clicked}>
    // # 34
        <div></div>
        <div></div>
        <div></div>
    </div>
);

export default drawerToggle;
```

ToolBar.js

```js
 <DrawerToggle clicked={props.drawerToggleClicked} />
```

Truyền từ Layout.js vào

```js
sideDrawerToggleHandler = () => {
        this.setState( ( prevState ) => {
            return { showSideDrawer: !prevState.showSideDrawer };
        } );
    }

    render () {
        return (
            <Aux>
                <Toolbar drawerToggleClicked={this.sideDrawerToggleHandler} />
```



### 34. Adding a Hamburger Icon

### 35. Improving the App - Introduction

### 36. Prop Type Validation

BurgerIngredient.js

### 37. Improving Performance

Modal.js

```js
class Modal extends Component {
// don't need re-render
    shouldComponentUpdate ( nextProps, nextState ) {
        return nextProps.show !== this.props.show;
    }
    
    componentWillUpdate () {
        console.log('[Modal] WillUpdate');
    }
```

OrderSummary.js

```js
class OrderSummary extends Component {
    // This could be a functional component, doesn't have to be a class
    componentWillUpdate() {
        console.log('[OrderSummary] WillUpdate');
    }
```



### 38. Using Component Lifecycle Methods

### 39. Changing the Folder Structure

move Layout in hoc/ folder


### 40. Wrap Up

### 41. Useful Resources & Links.html


## 9. Reaching out to the Web (Http Ajax)

### 1. Module Introduction

### 

### 2. Understanding Http Requests in React

![image-20200219233954591](./react-maximilan.assets/image-20200219233954591.png)

### 3. Understanding our Project and Introducing Axios

![image-20200219234310890](./react-maximilan.assets/image-20200219234310890.png)  

https://jsonplaceholder.typicode.com/

Install axios: `npm install axios --save`

### 4. Creating a Http Request to GET Data

Blog.js

```js
import React, { Component } from 'react';
import axios from 'axios';

import Post from '../../components/Post/Post';
import FullPost from '../../components/FullPost/FullPost';
import NewPost from '../../components/NewPost/NewPost';
import './Blog.css';

class Blog extends Component {
    state = {
        posts: [],
        selectedPostId: null
    }

    componentDidMount () {
        axios.get( 'https://jsonplaceholder.typicode.com/posts' )
            .then( response => {
                const posts = response.data.slice(0, 4);
                const updatedPosts = posts.map(post => {
                    return {
                        ...post,
                        author: 'Max'
                    }
                });
                this.setState({posts: updatedPosts});
                // console.log( response );
            } );
    }

    postSelectedHandler = (id) => {
        this.setState({selectedPostId: id});
    }

    render () {
        const posts = this.state.posts.map(post => {
            return <Post 
                key={post.id} 
                title={post.title} 
                author={post.author}
                clicked={() => this.postSelectedHandler(post.id)} />;
        });

        return (
            <div>
                <section className="Posts">
                    {posts}
                </section>
                <section>
                    <FullPost id={this.state.selectedPostId} />
                </section>
                <section>
                    <NewPost />
                </section>
            </div>
        );
    }
}

export default Blog;
```

Post.js

```js
import React from 'react';

import './Post.css';

const post = (props) => (
    <article className="Post" onClick={props.clicked}>
        <h1>{props.title}</h1>
        <div className="Info">
            <div className="Author">{props.author}</div>
        </div>
    </article>
);

export default post;
```



### 5. Rendering Fetched Data to the Screen

### 6. Transforming Data

### 7. Making a Post Selectable

Blog.js

```js
postSelectedHandler = (id) => {
        this.setState({selectedPostId: id});
    }

render () {
        const posts = this.state.posts.map(post => {
            return <Post 
                key={post.id} 
                title={post.title} 
                author={post.author}
                clicked={() => this.postSelectedHandler(post.id)} />;
        });

....
<FullPost id={this.state.selectedPostId} />
```



### 8. Fetching Data on Update (without Creating Infinite Loops)

FullPost.js

```js
import React, { Component } from 'react';
import axios from 'axios';

import './FullPost.css';

class FullPost extends Component {
    state = {
        loadedPost: null
    }

    componentDidUpdate () {
        if ( this.props.id ) {
        // Nếu k check => loop vì gọi setState thì component sẽ update
            if ( !this.state.loadedPost || (this.state.loadedPost && this.state.loadedPost.id !== this.props.id) ) {
                axios.get( 'https://jsonplaceholder.typicode.com/posts/' + this.props.id )
                    .then( response => {
                        // console.log(response);
                        this.setState( { loadedPost: response.data } );
                    } );
            }
        }
    }

    render () {
        let post = <p style={{ textAlign: 'center' }}>Please select a Post!</p>;
        if ( this.props.id ) {
            post = <p style={{ textAlign: 'center' }}>Loading...!</p>;
        }
        if ( this.state.loadedPost ) {
            post = (
                <div className="FullPost">
                    <h1>{this.state.loadedPost.title}</h1>
                    <p>{this.state.loadedPost.body}</p>
                    <div className="Edit">
                        <button className="Delete">Delete</button>
                    </div>
                </div>

            );
        }
        return post;
    }
}

export default FullPost;
```

loadedPost.content => sửa thành loadedPost.body mới đúng

### 9. POSTing Data to the Server

NewPost.js

```js
postDataHandler = () => {
        const data = {
            title: this.state.title,
            body: this.state.content,
            author: this.state.author
        };
        axios.post('https://jsonplaceholder.typicode.com/posts', data)
            .then(response => {
                console.log(response);
            });
    }

    render () {
        return (
            <div className="NewPost">
                <h1>Add a Post</h1>
                <label>Title</label>
                <input type="text" value={this.state.title} onChange={(event) => this.setState({title: event.target.value})} />
                <label>Content</label>
                <textarea rows="4" value={this.state.content} onChange={(event) => this.setState({content: event.target.value})} />
                <label>Author</label>
                <select value={this.state.author} onChange={(event) => this.setState({author: event.target.value})}>
                    <option value="Max">Max</option>
                    <option value="Manu">Manu</option>
                </select>
                <button onClick={this.postDataHandler}>Add Post</button>
            </div>
        );
    }
```

Thêm button Add post

### 10. Sending a DELETE Request

FullPost.js

```js
// add
    deletePostHandler = () => {
        axios.delete('https://jsonplaceholder.typicode.com/posts/' + this.props.id)
            .then(response => {
                console.log(response);
            });
    }

    render () {
        ....
        if ( this.state.loadedPost ) {
            post = (
                <div className="FullPost">
                    <h1>{this.state.loadedPost.title}</h1>
                    <p>{this.state.loadedPost.body}</p>
                    <div className="Edit">
                        // add
                        <button onClick={this.deletePostHandler} className="Delete">Delete</button>
                    </div>
                </div>

            );
        }
        return post;
    }
```



### 11. Fixing a Bug

sửa .content thành body như trên

### 12. Handling Errors Locally

Blog.js

```js
componentDidMount () {
        axios.get( 'https://jsonplaceholder.typicode.com/posts' )
            .then( response => {
                const posts = response.data.slice(0, 4);
                const updatedPosts = posts.map(post => {
                    return {
                        ...post,
                        author: 'Max'
                    }
                });
                this.setState({posts: updatedPosts});
                // console.log( response );
            } )
            .catch(error => {
                // console.log(error);
                this.setState({error: true});
            });
    }

render () {
    // add
        let posts = <p style={{textAlign: 'center'}}>Something went wrong!</p>;
        if (!this.state.error) {
            posts = this.state.posts.map(post => {
                return <Post 
                    key={post.id} 
                    title={post.title} 
                    author={post.author}
                    clicked={() => this.postSelectedHandler(post.id)} />;
            });
        }
```



### 13. Adding Interceptors to Execute Code Globally

![image-20200303231548671](./react-maximilan.assets/image-20200303231548671.png)

index.js

```js
import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';
import registerServiceWorker from './registerServiceWorker';
import axios from 'axios';

## 15 add
axios.defaults.baseURL = 'https://jsonplaceholder.typicode.com';
axios.defaults.headers.common['Authorization'] = 'AUTH TOKEN';
axios.defaults.headers.post['Content-Type'] = 'application/json';

axios.interceptors.request.use(request => {
    console.log(request);
    // Edit request config
    return request;
}, error => {
    console.log(error);
    return Promise.reject(error);
});

axios.interceptors.response.use(response => {
    console.log(response);
    // Edit request config
    return response;
}, error => {
    console.log(error);
    return Promise.reject(error);
});

ReactDOM.render( <App />, document.getElementById( 'root' ) );
registerServiceWorker();

```



### 14. Removing Interceptors.html

You learned how to add an interceptor, getting rid of one is also easy. Simply store the reference to the interceptor in a variable and call `eject` with that reference as an argument, to remove it (more info: https://github.com/axios/axios#interceptors):

```js
var myInterceptor = axios.interceptors.request.use(function () {/*...*/});
axios.interceptors.request.eject(myInterceptor);
```

### 15. Setting a Default Global Configuration for Axios

Sau đó sửa lại các url để gọi

### 16. Creating and Using Axios Instances

Create file axios.js

```js
import axios from 'axios';

const instance = axios.create({
    baseURL: 'https://jsonplaceholder.typicode.com'
});

instance.defaults.headers.common['Authorization'] = 'AUTH TOKEN FROM INSTANCE';

// instance.interceptors.request...
// Nếu  muốn SD

export default instance;
```

comment baseURL ở index.js

```js
// axios.defaults.baseURL = 'https://jsonplaceholder.typicode.com';

```



Blog.js

```js
// import axios from 'axios';
import axios from '../../axios';

// Thay đoạn import
```



Xem lại

### 17. Wrap Up

### 18. Useful Resources & Links.html

Axios Docs: https://github.com/axios/axios

## 10. Burger Builder Project Accessing a Server

### 1. Module Introduction

### 2. Firebase & The Right Database.html

The Firebase Database console - which we'll see in the next lecture - changed visually.

**Important:** Make sure you pick the **Realtime Database**, NOT Firestore!

![img](https://udemy-images.s3.amazonaws.com:443/redactor/raw/2018-07-24_04-49-02-c41a7b68eafee498dfd8fba88ad4adc8.png)

### 3. Creating the Firebase Project

![image-20200222225849287](./react-maximilan.assets/image-20200222225849287.png)  

Click Go to console

![image-20200222230548393](./react-maximilan.assets/image-20200222230548393.png)  

Add Project

![image-20200222230801750](./react-maximilan.assets/image-20200222230801750.png)  

Database

Vào database thêm /rules

![image-20200222232009009](./react-maximilan.assets/image-20200222232009009.png)  

Set rules là true rồi chọn PUBLISH; có thể set là "true " đặt trong dấu ""

### 4. Creating the Axios Instance

`npm install --save axios`

create file axios-orders.js

```js
import axios from 'axios';

const instance = axios.create({
    baseURL: 'https://react-my-burger.firebaseio.com/'
});

export default instance;
```

### 5. Sending a POST Request

BurgerBuilder.js khi ấn nút CONTINUE

```js
purchaseContinueHandler = () => {
        // alert('You continue!');
        this.setState( { loading: true } );
        const order = {
            ingredients: this.state.ingredients,
            price: this.state.totalPrice,
            customer: {
                name: 'Max Schwarzmüller',
                address: {
                    street: 'Teststreet 1',
                    zipCode: '41351',
                    country: 'Germany'
                },
                email: 'test@test.com'
            },
            deliveryMethod: 'fastest'
        }
        // bất kì tên + .json 
        // axios.post( '/orders.json', order )
        //     .then( response => {
        //         this.setState({ loading: false, purchasing: false });
        //     } )
        //     .catch( error => {
        //         this.setState({ loading: false, purchasing: false });
        //     } );
    }
```

![image-20200222233546403](./react-maximilan.assets/image-20200222233546403.png)

### 6. Displaying a Spinner while Sending a Request

Create Spinner when loading;

code pen io

Search gg  css spinner: https://projects.lukehaas.me/css-loaders/

```js
import React from 'react';

import classes from './Spinner.css';

const spinner = () => (
    <div className={classes.Loader}>Loading...</div>
);

export default spinner;
```

Spinner.css

```css
.Loader,
.Loader:before,
.Loader:after {
  border-radius: 50%;
}
.Loader {
  color: #521751;
  font-size: 11px;
  text-indent: -99999em;
  margin: 55px auto;
  position: relative;
  width: 10em;
  height: 10em;
  box-shadow: inset 0 0 0 1em;
  -webkit-transform: translateZ(0);
  -ms-transform: translateZ(0);
  transform: translateZ(0);
}
.Loader:before,
.Loader:after {
  position: absolute;
  content: '';
}
.Loader:before {
  width: 5.2em;
  height: 10.2em;
  background: #fff;
  border-radius: 10.2em 0 0 10.2em;
  top: -0.1em;
  left: -0.1em;
  -webkit-transform-origin: 5.2em 5.1em;
  transform-origin: 5.2em 5.1em;
  -webkit-animation: load2 2s infinite ease 1.5s;
  animation: load2 2s infinite ease 1.5s;
}
.Loader:after {
  width: 5.2em;
  height: 10.2em;
  background: #fff;
  border-radius: 0 10.2em 10.2em 0;
  top: -0.1em;
  left: 5.1em;
  -webkit-transform-origin: 0px 5.1em;
  transform-origin: 0px 5.1em;
  -webkit-animation: load2 2s infinite ease;
  animation: load2 2s infinite ease;
}
@-webkit-keyframes load2 {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@keyframes load2 {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
```

BurgerBuilder.js add loading

```js
 render () {
        const disabledInfo = {
            ...this.state.ingredients
        };
        for ( let key in disabledInfo ) {
            disabledInfo[key] = disabledInfo[key] <= 0
        }
     // add
        let orderSummary = <OrderSummary
            ingredients={this.state.ingredients}
            price={this.state.totalPrice}
            purchaseCancelled={this.purchaseCancelHandler}
            purchaseContinued={this.purchaseContinueHandler} />;
        if ( this.state.loading ) {
            orderSummary = <Spinner />;
        }
```

Modal.js

```js
class Modal extends Component {
// fix lỗi k hien spinner add nextProps.children !== this.props.children
    shouldComponentUpdate ( nextProps, nextState ) {
        return nextProps.show !== this.props.show || nextProps.children !== this.props.children;
    }
```

Thêm nextProps.children !== this.props.children

### 7. Handling Errors

withErrorHandler.js

```js
import React, { Component } from 'react';

import Modal from '../../components/UI/Modal/Modal';
import Aux from '../Aux/Aux';

const withErrorHandler = ( WrappedComponent, axios ) => {
    return class extends Component {
        state = {
            error: null
        }

    // video đang SD componentDidMount => sau này xài constructor 
        componentWillMount () {
            axios.interceptors.request.use(req => {
                this.setState({error: null});
                return req;
            });
            axios.interceptors.response.use(res => res, error => {
                this.setState({error: error});
            });
        }

        errorConfirmedHandler = () => {
            this.setState({error: null});
        }

        render () {
            return (
                <Aux>
                    <Modal 
                        show={this.state.error}
                        modalClosed={this.errorConfirmedHandler}>
                        {this.state.error ? this.state.error.message : null}
                    </Modal>
                    <WrappedComponent {...this.props} />
                </Aux>
            );
        }
    }
}

export default withErrorHandler;
```

BurgerBuilder.js

```js
                <Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>
                    {orderSummary}
                </Modal>


export default withErrorHandler( BurgerBuilder, axios );
```

Xem lại Modal .js

`modalClosed`

![image-20200310213053133](./react-maximilan.assets/image-20200310213053133.png)

### 8. Retrieving Data from the Backend

![image-20200223003030262](./react-maximilan.assets/image-20200223003030262.png)  

Add ingredients 

BurgerBuilder.js

```js
class BurgerBuilder extends Component {
    // constructor(props) {
    //     super(props);
    //     this.state = {...}
    // }
    state = {
        ingredients: null,
        totalPrice: 4,
        purchasable: false,
        purchasing: false,
        loading: false,
        error: false
    }

    componentDidMount () {
        axios.get( 'https://react-my-burger.firebaseio.com/ingredients.json' )
            .then( response => {
                this.setState( { ingredients: response.data } );
            } )
            .catch( error => {
                this.setState( { error: true } );
            } );
    }

....

render () {
        const disabledInfo = {
            ...this.state.ingredients
        };
        for ( let key in disabledInfo ) {
            disabledInfo[key] = disabledInfo[key] <= 0
        }
        
// Add new
    let orderSummary = null;
        let burger = this.state.error ? <p>Ingredients can't be loaded!</p> : <Spinner />;

        if ( this.state.ingredients ) {
            burger = (
                <Aux>
                    <Burger ingredients={this.state.ingredients} />
                    <BuildControls
                        ingredientAdded={this.addIngredientHandler}
                        ingredientRemoved={this.removeIngredientHandler}
                        disabled={disabledInfo}
                        purchasable={this.state.purchasable}
                        ordered={this.purchaseHandler}
                        price={this.state.totalPrice} />
                </Aux>
            );
            orderSummary = <OrderSummary
                ingredients={this.state.ingredients}
                price={this.state.totalPrice}
                purchaseCancelled={this.purchaseCancelHandler}
                purchaseContinued={this.purchaseContinueHandler} />;
        }
	
       if ( this.state.loading ) {
            orderSummary = <Spinner />;
        }
```

Sửa url sai => thêm catch

### 9. Removing Old Interceptors

Khi có HOC => use leak memory

withErrorHandler.js

```js
componentWillMount () {
            this.reqInterceptor = axios.interceptors.request.use(req => {
                this.setState({error: null});
                return req;
            });
            this.resInterceptor = axios.interceptors.response.use(res => res, error => {
                this.setState({error: error});
            });
        }

componentWillUnmount() {
            axios.interceptors.request.eject(this.reqInterceptor);
            axios.interceptors.response.eject(this.resInterceptor);
        }
```

Khi nào không cần BurgerBuilder nó sẽ clean up

### 10. Useful Resources & Links.html



## 11. Multi-Page-Feeling in a Single-Page-App Routing

### 1. Module Introduction

![image-20200223011501290](./react-maximilan.assets/image-20200223011501290.png)  

![image-20200223011652350](./react-maximilan.assets/image-20200223011652350.png)

### 2. Routing and SPAs

### 3. Setting Up Links

Blog.js

```js
class Blog extends Component {
    render () {
        return (
            <div className="Blog">
                <header>
                    <nav>
                        <ul>
                           <li><a href="/">Home</a></li>
                           <li><a href="/">New Post</a></li>
                        </ul>
                    </nav>
                </header>
```

Chỉnh Blog.css cho link

```css
.Blog ul {
    list-style: none;
    margin: 0;
    padding: 0;
    width: 100%;
    text-align: center;
}

.Blog li {
    display: inline-block;
    margin: 20px;
}

.Blog a {
    text-decoration: none;
    color: black;
}

.Blog a:hover,
.Blog a:active {
    color: #fa923f;
}
```



### 4. Setting Up the Router Package

`npm install --save react-router react-router-dom`

Tại Blog.js xóa FullPost and NewPost

App.js

```js
import React, { Component } from 'react';
import { BrowserRouter } from 'react-router-dom';

import Blog from './containers/Blog/Blog';

class App extends Component {
  render () {
    return (
      // now we can use routing
      <BrowserRouter>
        <div className="App">
          <Blog />
        </div>
      </BrowserRouter>
    );
  }
}

export default App;

```

Chỉnh sửa lại cấu trúc folder Post, Blog

### 5. react-router vs react-router-dom.html

We installed both `react-router` and `react-router-dom` . **Technically, only `react-router-dom` is required for web development**. It wraps `react-router` and therefore uses it as a dependency. 

We **don't need to install** `react-router` on our own for it to work. You can omit this installation step, I left it in there for historic reasons and because I like to emphasize that the main package is named react-router. If you ever search for assistance, you probably want to search for "react router" - that's the name of the package.

### 6. Preparing the Project For Routing

Create Post Component.js tách từ blog ra, copy cả css

```js
import React, { Component } from 'react';
import axios from '../../../axios';

import Post from '../../../components/Post/Post';
import './Posts.css';

class Posts extends Component {
    state = {
        posts: []
    }

    componentDidMount () {
        console.log(this.props);
        axios.get( '/posts' )
            .then( response => {
                const posts = response.data.slice(0, 4);
                const updatedPosts = posts.map(post => {
                    return {
                        ...post,
                        author: 'Max'
                    }
                });
                this.setState({posts: updatedPosts});
                // console.log( response );
            } )
            .catch(error => {
                console.log(error);
                // this.setState({error: true});
            });
    }

    postSelectedHandler = (id) => {
        this.setState({selectedPostId: id});
    }
    
    render () {
        let posts = <p style={{textAlign: 'center'}}>Something went wrong!</p>;
        if (!this.state.error) {
            posts = this.state.posts.map(post => {
                return <Post 
                    key={post.id} 
                    title={post.title} 
                    author={post.author}
                    clicked={() => this.postSelectedHandler(post.id)} />;
            });
        }

        return (
            <section className="Posts">
                {posts}
            </section>
        );
    }
}

export default Posts;
```



### 7. Setting Up and Rendering Routes

Blog.js

```js
import { Route, Link } from 'react-router-dom';



{/* <Route path="/" exact render={() => <h1>Home</h1>} />
  <Route path="/" render={() => <h1>Home 2</h1>} /> */}
            <Route path="/" exact component={Posts} />
            <Route path="/new-post" component={NewPost} />
```

exact là biến boolean có nó có nghĩa là true => tell does my path start with /, complete path like this; exact là full path

Khi call / thì nó sẽ hiển thị cả Home và Home2 nếu dòng 2 có exact, khi không có vào link khác nó cũng sẽ hiện Home2

### 8. Rendering Components for Routes

### 9. Switching Between Pages

=> bị reload page

### 10. Using Links to Switch Pages

Blog.js

```js
<header>
                    <nav>
                        <ul>
                            <li><Link to="/">Home</Link></li>
                            <li><Link to={{
                                pathname: '/new-post',
                                hash: '#submit',
                                search: '?quick-submit=true'
                            }}>New Post</Link></li>
                        </ul>
                    </nav>
                </header>
```



### 11. Using Routing-Related Props

Trong Posts.js và NewPost.js thêm

```js
componentDidMount () {
        console.log(this.props);
```

![image-20200223085450744](./react-maximilan.assets/image-20200223085450744.png)

### 12. The withRouter HOC & Route Props

Post.js

```js
import React from 'react';

import './Post.css';

const post = (props) => {
    // Add
    console.log(props);
    return  (
    <article className="Post" onClick={props.clicked}>
        <h1>{props.title}</h1>
        <div className="Info">
            <div className="Author">{props.author}</div>
        </div>
    </article>
);
}

export default post;
```

Khi console.log(props); Không có loaction, history and match

![image-20200223095508332](./react-maximilan.assets/image-20200223095508332.png)  

Post.js get info of nearest routes => nên sẽ get giống như Posts

Get access to routing relative props 

```js
import React from 'react';
import { withRouter } from 'react-router-dom';

import './Post.css';

const post = (props) => {
    console.log(props);
    return  (
    <article className="Post" onClick={props.clicked}>
        <h1>{props.title}</h1>
        <div className="Info">
            <div className="Author">{props.author}</div>
        </div>
    </article>
);
}

// add
export default withRouter(post);
```

![image-20200223095857964](./react-maximilan.assets/image-20200223095857964.png)  

Sau đó revert file này lại như ban đầu

### 13. Absolute vs Relative Paths

Relative path là vs post/new-post => new-post là relative

Blog.js có thể truy cập path bằng cách this.props.match.url + 'new-post'
Blog.js

```js
<header>
                    <nav>
                        <ul>
                            <li><Link to="/">Home</Link></li>
                            <li><Link to={{
                                // add dynamic path để test => nhớ revert
                                // pathname: '/new-post',
                                pathname: this.props.match.url + '/new-post',
                                hash: '#submit',
                                search: '?quick-submit=true'
                            }}>New Post</Link></li>
                        </ul>
                    </nav>
                </header>
```

### 14. Absolute vs Relative Paths (Article).html

You learned about `Link` , you learned about the `to` property it uses.

The path you can use in to can be either **absolute** or **relative**. 

#### **Absolute Paths**

By default, if you just enter `to="/some-path"` or `to="some-path"` , that's an **absolute path**. 

**Absolute path** means that it's **always appended right after your domain**. Therefore, both syntaxes (with and without leading slash) lead to `example.com/some-path` .

#### **Relative Paths**

Sometimes, you might want to create a relative path instead. This is especially useful, if your component is already loaded given a specific path (e.g. `posts` ) and you then want to append something to that existing path (so that you, for example, get `/posts/new` ).

If you're on a component loaded via `/posts` , `to="new"` would lead to `example.com/new` , **NOT** `example.com/posts/new` . 

To change this behavior, you have to find out which path you're on and add the new fragment to that existing path. You can do that with the `url` property of `props.match` :

`<Link to={props.match.url + '/new'}>` will lead to `example.com/posts/new` when placing this link in a component loaded on `/posts` . If you'd use the same `` in a component loaded via `/all-posts` , the link would point to `/all-posts/new` .

**There's no better or worse way of creating Link paths** - choose the one you need. Sometimes, you want to ensure that you always load the same path, no matter on which path you already are => Use absolute paths in this scenario.

Use relative paths if you want to navigate relative to your existing path.

### 15. Styling the Active Route

Blog.js sửa thành NavLink

```js
import { Route, NavLink, Switch } from 'react-router-dom';

import './Blog.css';
import Posts from './Posts/Posts';
import NewPost from './NewPost/NewPost';

class Blog extends Component {
    render () {
        return (
            <div className="Blog">
                <header>
                    <nav>
                        <ul>
                            <li><NavLink
                                to="/posts/"
                                exact
                                activeClassName="my-active"
                                activeStyle={{
                                    color: '#fa923f',
                                    textDecoration: 'underline'
                                }}>Posts</NavLink></li>
                            <li><NavLink to={{
                                pathname: '/new-post',
                                hash: '#submit',
                                search: '?quick-submit=true'
                            }}>New Post</NavLink></li>
                        </ul>
                    </nav>
                </header>
```

Blog.css

```css
.Blog a:hover,
.Blog a:active,
.Blog a.active {
    color: #fa923f;
}
```

Thêm exact để không active 2 link cùng lúc

### 16. Passing Route Parameters

Posts.js click => show FullPost

```js
// #17 full
```



### 17. Extracting Route Parameters

Posts.js cách 1 

![image-20200223104434672](./react-maximilan.assets/image-20200223104434672.png)  

Blog.js

![image-20200223104702533](./react-maximilan.assets/image-20200223104702533.png)  

FullPost.js

```js
class FullPost extends Component {
    state = {
        loadedPost: null
    }

// add
    componentDidMount () {
        console.log(this.props);
        this.loadData();
    }

    componentDidUpdate() {
        this.loadData();
    }

	loadData () {
        // sua thanh this.props.match.params.id 
        if ( this.props.match.params.id ) {
            if ( !this.state.loadedPost || (this.state.loadedPost && this.state.loadedPost.id !== +this.props.match.params.id) ) {
                axios.get( '/posts/' + this.props.match.params.id )
                    .then( response => {
                        // console.log(response);
                        this.setState( { loadedPost: response.data } );
                    } );
            }
        }
    }
```

![image-20200223105040777](./react-maximilan.assets/image-20200223105040777.png)  

Khi click newPost vẫn hiện FullPost và NewPost=> bug

![image-20200310222652094](./react-maximilan.assets/image-20200310222652094.png)

### 18. Parsing Query Parameters & the Fragment.html

You learned how to extract route parameters (=> `:id` etc). 

But how do you extract **search** (also referred to as "**query**") **parameters** (=> `?something=somevalue` at the end of the URL)? How do you extract the **fragment** (=> `#something` at the end of the URL)?

#### **Query Params:**

You can pass them easily like this:

```js
<Link to="/my-path?start=5">Go to Start</Link> 

```

or

```js
<Link 
    to={{
        pathname: '/my-path',
        search: '?start=5'
    }}
    >Go to Start</Link>
```

React router makes it easy to get access to the search string: `props.location.search` .

But that will only give you something like `?start=5` 

You probably want to get the key-value pair, without the `?` and the `=` . Here's a snippet which allows you to easily extract that information:

```js
componentDidMount() {
    const query = new URLSearchParams(this.props.location.search);
    for (let param of query.entries()) {
        console.log(param); // yields ['start', '5']
    }
}
```

`URLSearchParams` is a built-in object, shipping with vanilla JavaScript. It returns an object, which exposes the `entries()` method. `entries()` returns an Iterator - basically a construct which can be used in a `for...of...` loop (as shown above).

When looping through `query.entries()` , you get **arrays** where the first element is the **key name** (e.g. `start` ) and the second element is the assigned **value** (e.g. `5` ).

#### **Fragment:**

You can pass it easily like this:

```js
<Link to="/my-path#start-position">Go to Start</Link> 

```

or

```
<Link 
    to={{
        pathname: '/my-path',
        hash: 'start-position'
    }}
    >Go to Start</Link>
```

React router makes it easy to extract the fragment. You can simply access `props.location.hash` .

### 19. Using Switch to Load a Single Route

Blog.js

```js
import { Route, NavLink, Switch } from 'react-router-dom';

<Switch>
       <Route path="/new-post" component={NewPost} />
       <Route path="/posts" component={Posts} />
</Switch>
```

![image-20200223110112496](./react-maximilan.assets/image-20200223110112496.png)  

Nếu để thứ tự như trên sẽ báo lỗi id không hợp lệ nên phải đưa :id xuống dưới cùng

Blog.js

```js
<Route path="/" exact component={Posts} />
<Switch>
        <Route path="/new-post" component={NewPost} />
        <Route path="/:id" exact component={FullPost} />
</Switch>
```



### 2.1 routing-learning-card.pdf.pdf

### 20. Navigating Programmatically

Posts.js comment

```js
postSelectedHandler = ( id ) => {
        // this.props.history.push({pathname: '/' + id});
        this.props.history.push( '/' + id );
    }

    render () {
        let posts = <p style={{ textAlign: 'center' }}>Something went wrong!</p>;
        if ( !this.state.error ) {
            posts = this.state.posts.map( post => {
                return (
                    // <Link to={'/posts/' + post.id} key={post.id}>
                    <Post
                        key={post.id}
                        title={post.title}
                        author={post.author}
                        clicked={() => this.postSelectedHandler( post.id )} />
                    // </Link>
                );
            } );
        }
```



### 21. Additional Information Regarding Active Links

Blog.js bỏ exact đi vì có :id nó k active

```js
<li><NavLink
                                to="/"
                                // exact
                                activeClassName="my-active"
                                activeStyle={{
                                    color: '#fa923f',
                                    textDecoration: 'underline'
                                }}>Posts</NavLink></li>
```

Sau này chỉnh lại url nên revert file lại

sửa hết thành thêm /posts để tránh click vào newPost mà vẫn active 2 link, sửa link có id nữa

### 22. Understanding Nested Routes

Posts.js

```js
// sửa lại url
postSelectedHandler = ( id ) => {
        // this.props.history.push({pathname: '/posts/' + id});
        this.props.history.push( '/posts/' + id );
    }

return (
            <div>
                <section className="Posts">
                    {posts}
                </section>
// add
                <Route path='/:id'} exact component={FullPost} />
            </div>
        );
```

Blog.js

```js
<Switch>
        <Route path="/new-post" component={NewPost} />
        <Route path="/posts" component={Posts} />
 </Switch>
```

=> load FullPost dưới Posts

![image-20200223112048562](./react-maximilan.assets/image-20200223112048562.png)  

Sửa lại urls path="/posts" and NavLink trong Blog.js

Posts.js cũng sửa lại

```js
postSelectedHandler = ( id ) => {
        // this.props.history.push({pathname: '/posts/' + id});
        this.props.history.push( '/posts/' + id );
    }

return (
            <div>
                <section className="Posts">
                    {posts}
                </section>
// add dynamic url
                <Route path={this.props.match.url + '/:id'} exact component={FullPost} />
            </div>
        );
```



### 23. Creating Dynamic Nested Routes

Khi ấn vào Post bất kì thì hiện thêm FullPost => sửa

FullPost.js add

```js
	componentDidMount () {
        console.log(this.props);
        this.loadData();
    }

// add
    componentDidUpdate() {
        this.loadData();
    }

// thay this.props.id bằng this.props.match.params.id để k lặp 
loadData () {
        if ( this.props.match.params.id ) {
            if ( !this.state.loadedPost || (this.state.loadedPost && this.state.loadedPost.id !== +this.props.match.params.id) ) {
                axios.get( '/posts/' + this.props.match.params.id )
                    .then( response => {
                        // console.log(response);
                        this.setState( { loadedPost: response.data } );
                    } );
            }
        }
    }

deletePostHandler = () => {
    // fix
        axios.delete('/posts/' + this.props.match.params.id)
            .then(response => {
                console.log(response);
            });
    }

    render () {
        let post = <p style={{ textAlign: 'center' }}>Please select a Post!</p>;
// fix
        if ( this.props.match.params.id ) {
            post = <p style={{ textAlign: 'center' }}>Loading...!</p>;
        }
```

Vì param nhận được là string không phải number nên cần convert

### 24. Redirecting Requests

Blog.js

```js
<Switch>
           <Route path="/new-post" component={NewPost} />
           <Route path="/posts" component={Posts} />
           <Redirect from="/" to="/posts" />
           {/* <Route path="/" component={Posts} /> */}
</Switch>
```



### 25. Conditional Redirects

NewPost

```js
postDataHandler = () => {
        const data = {
            title: this.state.title,
            body: this.state.content,
            author: this.state.author
        };
        axios.post( '/posts', data )
            .then( response => {
                console.log( response );
                // Add
                this.setState( { submitted: true } );
            } );
    }

    render () {
        // add
        let redirect = null;
        if (this.state.submitted) {
            redirect = <Redirect to="/posts" />;
        }
        return (
            <div className="NewPost">
                {redirect}
```



### 26. Using the History Prop to Redirect (Replace)

NewPost

```js
postDataHandler = () => {
        const data = {
            title: this.state.title,
            body: this.state.content,
            author: this.state.author
        };
        axios.post( '/posts', data )
            .then( response => {
                console.log( response );
            // Khi ấn back thì sẽ vẫn ở lại trang này => push để back
                this.props.history.replace('/posts');
                // this.setState( { submitted: true } );
            } );
    }
```

Cách này khi ấn nút back nó sẽ về lại trang trước vì được push vào stack `this.props.history.push('/posts');`

### 27. Working with Guards

you have some route allow some person visit

Blog.js

```js
// thêm state auth: flase nó sẽ redirect về posts
<Switch>
      { this.state.auth ? <Route path="/new-post" component={NewPost} /> : null}
                    <Route path="/posts" component={Posts} />
                    <Redirect from="/" to="/posts" />
                    {/* <Route path="/" component={Posts} /> */}
                </Switch>
```

Cách 2: thêm check unauth và replace

NewPost.js

```js
componentDidMount () {
    // if unauth
    // this.props.history.replace('/posts');
        console.log( this.props );
    }
```

Chỉ là demo

### 28. Handling the 404 Case (Unknown Routes)

Blog.js

```js
<Switch>
      { this.state.auth ? <Route path="/new-post" component={NewPost} /> : null}
       <Route path="/posts" component={Posts} />
       <Route render={() => <h1>Not Found</h1>} />
//       <Redirect from="/" to="/posts" />
```

Nó sẽ không hoạt đông cùng với Redirect nên phải comment đoạn này lại

### 29. Loading Routes Lazily

Vào tab network thấy load rất nhiều, khi cần mới download những thứ cần ví dụ ở file Posts thì không cần load newPost

bundle.js chưa resource 

Create file hoc/asynComponent.js

![image-20200223133629463](./react-maximilan.assets/image-20200223133629463.png)  

![image-20200223133742338](./react-maximilan.assets/image-20200223133742338.png)  

Webpack will to prepare extra bundle for this potentially loaded code

![image-20200223134303260](./react-maximilan.assets/image-20200223134303260.png)  

Sau đó thay cho NewPost trong Route tag => load asyn chỉ cs thêm 1 file chunk load thêm





### 30. Lazy Loading with React Suspense (16.6)

App.js start

```js
import React, { Component } from 'react';
import { BrowserRouter, Route, NavLink } from 'react-router-dom';

import Posts from './containers/Posts';
import User from './containers/User';
import Welcome from './containers/Welcome';

class App extends Component {
  render() {
    return (
      <BrowserRouter>
        <React.Fragment>
          <nav>
            <NavLink to="/user">User Page</NavLink> |&nbsp;
            <NavLink to="/posts">Posts Page</NavLink>
          </nav>
          <Route path="/" component={Welcome} exact />
          <Route path="/user" component={User} />
          <Route path="/posts" component={Posts} />
        </React.Fragment>
      </BrowserRouter>
    );
  }
}

export default App;

```

App.js end

```js
import React, { Component, Suspense } from 'react';
import { BrowserRouter, Route, NavLink } from 'react-router-dom';

import User from './containers/User';
import Welcome from './containers/Welcome';

const Posts = React.lazy(() => import('./containers/Posts'));

class App extends Component {
  state = { showPosts: false };

  modeHandler = () => {
    this.setState(prevState => {
      return { showPosts: !prevState.showPosts };
    });
  };

  render() {
    return (
      <React.Fragment>
        <button onClick={this.modeHandler}>Toggle Mode</button>
        {this.state.showPosts ? (
          <Suspense fallback={<div>Loading...</div>}>
            <Posts />
          </Suspense>
        ) : (
          <User />
        )}
      </React.Fragment>

// Step 1
      // <BrowserRouter>
      //   <React.Fragment>
      //     <nav>
      //       <NavLink to="/user">User Page</NavLink> |&nbsp;
      //       <NavLink to="/posts">Posts Page</NavLink>
      //     </nav>
      //     <Route path="/" component={Welcome} exact />
      //     <Route path="/user" component={User} />
      //     <Route
      //       path="/posts"
      //       render={() => (
      //         <Suspense fallback={<div>Loading...</div>}>
      //           <Posts />
      //         </Suspense>
      //       )}
      //     />
      //   </React.Fragment>
      // </BrowserRouter>
    );
  }
}

export default App;

```



### 31. Routing and Server Deployment

![image-20200223150541057](./react-maximilan.assets/image-20200223150541057.png)  

App.js của Post

`<BrowserRouter basename="/my-app">`

### 32. Time to Practice - Routing.html



### 33. Wrap Up

### 34. Useful Resources & Links.html

React Router Docs: https://reacttraining.com/react-router/web/guides/philosophy

## 12. Adding Routing to our Burger Project

### 1. Module Introduction

### 

### 2. Building the Checkout Container

Create file CheckOut.js

```js
import React, { Component } from 'react';

import CheckoutSummary from '../../components/Order/CheckoutSummary/CheckoutSummary';

class Checkout extends Component {
    state = {
        ingredients: {
            salad: 1,
            meat: 1,
            cheese: 1,
            bacon: 1
        }
    }

    render() {
        return (
            <div>
                <CheckoutSummary ingredients={this.state.ingredients}/>
            </div>
        );
    }
}

export default Checkout;
```

CheckoutSummary.js, .css

```js
import React from 'react';

import Burger from '../../Burger/Burger';
import Button from '../../UI/Button/Button';
import classes from './CheckoutSummary.css';

const checkoutSummary = (props) => {
    return (
        <div className={classes.CheckoutSummary}>
            <h1>We hope it tastes well!</h1>
            <div style={{width: '100%', margin: 'auto'}}>
                <Burger ingredients={props.ingredients}/>
            </div>
            <Button 
                btnType="Danger"
                clicked>CANCEL</Button>
            <Button 
                btnType="Success"
                clicked>CONTINUE</Button>
        </div>
    );
}

export default checkoutSummary;
```

Vào file app.js thêm Checkout tag

### 3. Setting Up Routing & Routes

`npm install --save react-router-dom`

index.js

```js
import React from 'react';
import ReactDOM from 'react-dom';
import { BrowserRouter } from 'react-router-dom';

import './index.css';
import App from './App';
import registerServiceWorker from './registerServiceWorker';

// add
const app = (
    <BrowserRouter>
        <App />
    </BrowserRouter>
);

ReactDOM.render( app, document.getElementById( 'root' ) );
registerServiceWorker();

```

App.js

```js
import React, { Component } from 'react';
import { Route, Switch } from 'react-router-dom';

import Layout from './hoc/Layout/Layout';
import BurgerBuilder from './containers/BurgerBuilder/BurgerBuilder';
import Checkout from './containers/Checkout/Checkout';

class App extends Component {
  render () {
    return (
      <div>
        <Layout>
          <Switch>
            <Route path="/checkout" component={Checkout} />
            <Route path="/" exact component={BurgerBuilder} />
          </Switch>
        </Layout>
      </div>
    );
  }
}

export default App;

```



### 4. Navigating to the Checkout Page

Khi bấm button CONTINUE sẽ link tới /checkout

BurgerBuilder.js

```js
purchaseContinueHandler = () => {
        // add start
        this.props.history.push('/checkout');
        // add end
    }
```

khi in props ở Burger sẽ không có các thuộc tính như match vì nó k nằm  trong Route tag

Phải import withRouter và gọi `export default withRouter(burger);`

Khi ấn vào nút continue

![image-20200310234634644](./react-maximilan.assets/image-20200310234634644.png)

### 5. Navigating Back & To Next Page

Thêm để khi ấn nút cancel hay continue sẽ go back or next

CheckoutSummary.js

```js
const checkoutSummary = (props) => {
    return (
        <div className={classes.CheckoutSummary}>
            <h1>We hope it tastes well!</h1>
            <div style={{width: '100%', margin: 'auto'}}>
                <Burger ingredients={props.ingredients}/>
            </div>
            <Button 
                btnType="Danger"
                clicked={props.checkoutCancelled}>CANCEL</Button>
            <Button 
                btnType="Success"
                clicked={props.checkoutContinued}>CONTINUE</Button>
        </div>
    );
}

export default checkoutSummary;
// add event
```

Checkout.js

```js
 
// add new
checkoutCancelledHandler = () => {
        this.props.history.goBack();
    }

    checkoutContinuedHandler = () => {
        this.props.history.replace('/checkout/contact-data');
    }

    render() {
        return (
            <div>
                <CheckoutSummary 
                    ingredients={this.state.ingredients}
                    checkoutCancelled={this.checkoutCancelledHandler}
                    checkoutContinued={this.checkoutContinuedHandler}/>
            </div>
        );
    }
```



### 6. Passing Ingredients via Query Params

BurgerBuilder.js

```js
 purchaseContinueHandler = () => {
        // alert('You continue!');
        // add new
        const queryParams = [];
     
     // i là porperty name
        for (let i in this.state.ingredients) {
            queryParams.push(encodeURIComponent(i) + '=' + encodeURIComponent(this.state.ingredients[i]));
        }
        const queryString = queryParams.join('&');
        this.props.history.push({
            pathname: '/checkout',
            search: '?' + queryString
        });
    }
```

Checkout.js

```js
componentDidMount() {
        const query = new URLSearchParams(this.props.location.search);
        const ingredients = {};
        for (let param of query.entries()) {
            // ['salad', '1']
            ingredients[param[0]] = +param[1];
        }
        this.setState({ingredients: ingredients});
    }
```



### 7. Navigating to the Contact Data Component

Create Checkout/ContactData/ContactData.js , .css

```js
import React, { Component } from 'react';

import Button from '../../../components/UI/Button/Button';
import Spinner from '../../../components/UI/Spinner/Spinner';
import classes from './ContactData.css';
import axios from '../../../axios-orders';

class ContactData extends Component {
    state = {
        name: '',
        email: '',
        address: {
            street: '',
            postalCode: ''
        },
        loading: false
    }

// # 8
    orderHandler = ( event ) => {
        event.preventDefault(); // ngăn load lại
        this.setState( { loading: true } );
        const order = {
            ingredients: this.props.ingredients,
            price: this.props.price,
            customer: {
                name: 'Max Schwarzmüller',
                address: {
                    street: 'Teststreet 1',
                    zipCode: '41351',
                    country: 'Germany'
                },
                email: 'test@test.com'
            },
            deliveryMethod: 'fastest'
        }
        axios.post( '/orders.json', order )
            .then( response => {
                this.setState( { loading: false } );
            
            // fix ở checkout truyền vào ...props mới có thể push do chưa có history
                this.props.history.push('/');
            } )
            .catch( error => {
                this.setState( { loading: false } );
            } );
    }

    render () {
        let form = (
            <form>
                <input className={classes.Input} type="text" name="name" placeholder="Your Name" />
                <input className={classes.Input} type="email" name="email" placeholder="Your Mail" />
                <input className={classes.Input} type="text" name="street" placeholder="Street" />
                <input className={classes.Input} type="text" name="postal" placeholder="Postal Code" />
                <Button btnType="Success" clicked={this.orderHandler}>ORDER</Button>
            </form>
        );
        if ( this.state.loading ) {
            form = <Spinner />;
        }
        return (
            <div className={classes.ContactData}>
                <h4>Enter your Contact Data</h4>
                {form}
            </div>
        );
    }
}

export default ContactData;
```

Checkout.js

```js
render () {
        return (
            <div>
                <CheckoutSummary
                    ingredients={this.state.ingredients}
                    checkoutCancelled={this.checkoutCancelledHandler}
                    checkoutContinued={this.checkoutContinuedHandler} />
                 // add start
                <Route 
                    path={this.props.match.path + '/contact-data'} 
                    render={(props) => (<ContactData ingredients={this.state.ingredients} price={this.state.totalPrice} {...props} />)} />
                // add end
            </div>
        );

```

Add css cho Contact.css

```css
.ContactData {
    margin: 20px auto;
    width: 80%;
    text-align: center;
    box-shadow: 0 2px 3px #ccc;
    border: 1px solid #eee;
    padding: 10px;
    box-sizing: border-box;
}

.Input {
    display: block;
}

@media (min-width: 600px) {
    .ContactData {
        width: 500px;
    }
}
```

![image-20200311003033618](./react-maximilan.assets/image-20200311003033618.png)

### 8. Order Submission & Passing Data Between Pages

Add orderHandler, get data khi bấm nút ORDER tại Checkout

BurgerBuilder.js

```js
purchaseContinueHandler = () => {
        // alert('You continue!');
        
        const queryParams = [];
        for (let i in this.state.ingredients) {
            queryParams.push(encodeURIComponent(i) + '=' + encodeURIComponent(this.state.ingredients[i]));
        }
    // add price
        queryParams.push('price=' + this.state.totalPrice);
        const queryString = queryParams.join('&');
        this.props.history.push({
            pathname: '/checkout',
            search: '?' + queryString
        });
    }
```

CheckOut.js

```js
class Checkout extends Component {
    // fix  
    state = {
        ingredients: null,
        price: 0
    }

// sửa componentDidMount chuyển thành Will để fix lỗi khi ingredients: null, => có đủ r mới render
    componentWillMount () {
        const query = new URLSearchParams( this.props.location.search );
        const ingredients = {};
        let price = 0;
        for ( let param of query.entries() ) {
            // add price
            // ['salad', '1']
            if (param[0] === 'price') {
                price = param[1];
            } else {
                ingredients[param[0]] = +param[1];
            }
        }
        this.setState( { ingredients: ingredients, totalPrice: price } );
    }
```

Khi ấn ORDER post ok tại file ContactData

### 9. Adding an Orders Page

create file Orders.js, .css

```js
import React, { Component } from 'react';

import Order from '../../components/Order/Order';
import axios from '../../axios-orders';
import withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';

class Orders extends Component {
    // # 11
    state = {
        orders: [],
        loading: true
    }

    componentDidMount() {
        axios.get('/orders.json')
            .then(res => {
                const fetchedOrders = [];
                for (let key in res.data) {
                    fetchedOrders.push({
                        ...res.data[key],
                        id: key
                    });
                }
                this.setState({loading: false, orders: fetchedOrders});
            })
            .catch(err => {
                this.setState({loading: false});
            });
    }
// #11 end

    render () {
        return (
            <div>
            // # 12
                {this.state.orders.map(order => (
                    <Order 
                        key={order.id}
                        ingredients={order.ingredients}
                        price={order.price} />
                ))}
            </div>
        );
    }
}

# 11 sửa url sai để test
export default withErrorHandler(Orders, axios);
```

Order.js

```js
import React from 'react';

import classes from './Order.css';

const order = ( props ) => {
    # 12 add start
    const ingredients = [];

    for ( let ingredientName in props.ingredients ) {
        ingredients.push(
            {
                name: ingredientName,
                amount: props.ingredients[ingredientName]
            }
        );
    }

    const ingredientOutput = ingredients.map(ig => {
        return <span 
            style={{
                textTransform: 'capitalize',
                display: 'inline-block',
                margin: '0 8px',
                border: '1px solid #ccc',
                padding: '5px'
                }}
            key={ig.name}>{ig.name} ({ig.amount})</span>;
    });
    # 12 add end
    return (
        <div className={classes.Order}>
            <p>Ingredients: {ingredientOutput}</p>
            <p>Price: <strong>USD {Number.parseFloat( props.price ).toFixed( 2 )}</strong></p>
        </div>
    );
};

export default order;
```

App.js

```js
<Layout>
          <Switch>
            <Route path="/checkout" component={Checkout} />
            <Route path="/orders" component={Orders} />
          <Route path="/" exact component={BurgerBuilder} />
          </Switch>
        </Layout>
```



### 10. Implementing Navigation Links

NavigationItems.js

```js
const navigationItems = () => (
    <ul className={classes.NavigationItems}>
        <NavigationItem link="/" exact>Burger Builder</NavigationItem>
/// add
        <NavigationItem link="/orders">Orders</NavigationItem>
    </ul>
);
```

NavigationItem.js

```js
import React from 'react';
import { NavLink } from 'react-router-dom';

import classes from './NavigationItem.css';

const navigationItem = ( props ) => (
    <li className={classes.NavigationItem}>
    // add NavLink
        <NavLink 
            to={props.link}
            exact={props.exact}
            activeClassName={classes.active}>{props.children}</NavLink>
    </li>
);

export default navigationItem;
```



### 11. Fetching Orders

Tạo data trên firebase

Orders.js

```js
class Orders extends Component {
    // # 11
    state = {
        orders: [],
        loading: true
    }

    componentDidMount() {
        axios.get('/orders.json')
            .then(res => {
                const fetchedOrders = [];
                for (let key in res.data) {
                    fetchedOrders.push({
                        ...res.data[key],
                        id: key
                    });
                }
                this.setState({loading: false, orders: fetchedOrders});
            })
            .catch(err => {
                this.setState({loading: false});
            });
    }
// #11 end
```



### 12. Outputting the Orders

![image-20200223170603877](./react-maximilan.assets/image-20200223170603877.png)

### 13. Wrap Up

### 14. Useful Resources & Links.html

## 13. Forms and Form Validation

### 1. Module Introduction

### 

### 2. Analyzing the App

Input.js

```js
import React from 'react';

import classes from './Input.css';

const input = ( props ) => {
    let inputElement = null;

    // Nếu để inputType nó sẽ báo error vì react 16
    switch ( props.inputtype ) {
        case ( 'input' ):
            inputElement = <input
                className={classes.InputElement}
                {...props} />;
            break;
        case ( 'textarea' ):
            inputElement = <textarea
                className={classes.InputElement}
                {...props}/>;
            break;
        default:
            inputElement = <input
                className={classes.InputElement}
                {...props} />;
    }

    return (
        <div className={classes.Input}>
            <label className={classes.Label}>{props.label}</label>
            {inputElement}
        </div>
    );

};

export default input;
```



![image-20200311222924383](./react-maximilan.assets/image-20200311222924383.png)

Input.css

```css
.Input {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
}

.Label {
    font-weight: bold;
    display: block;
    margin-bottom: 8px;
}

.InputElement {
    outline: none;
    border: 1px solid #ccc;
    background-color: white;
    font: inherit;
    padding: 6px 10px;
    display: block;
    width: 100%;
    box-sizing: border-box;
}

.InputElement:focus {
    outline: none;
    background-color: #ccc;
}
```

Contact.js

```js
let form = (
            <form>
                <Input inputtype="input" type="text" name="name" placeholder="Your Name" />
                <Input inputtype="input" type="email" name="email" placeholder="Your Mail" />
                <Input inputtype="input" type="text" name="street" placeholder="Street" />
                <Input inputtype="input" type="text" name="postal" placeholder="Postal Code" />
                <Button btnType="Success" clicked={this.orderHandler}>ORDER</Button>
            </form>
        );
```



### 3. Creating a Custom Dynamic Input Component

Create Input in folder UI, input.css

```js
import React from 'react';

import classes from './Input.css';

const input = ( props ) => {
    let inputElement = null;

    switch ( props.elementType ) {
        case ( 'input' ):
            inputElement = <input
                className={classes.InputElement}
                {...props.elementConfig}
                value={props.value}
                onChange={props.changed} />;
            break;
        case ( 'textarea' ):
            inputElement = <textarea
                className={classes.InputElement}
                {...props.elementConfig}
                value={props.value}
                onChange={props.changed} />;
            break;
        // add in part 6
        case ( 'select' ):
            inputElement = (
                <select
                    className={classes.InputElement}
                    value={props.value}
                    onChange={props.changed}>
                    {props.elementConfig.options.map(option => (
                        <option key={option.value} value={option.value}>
                            {option.displayValue}
                        </option>
                    ))}
                </select>
            );
            break;
        default:
            inputElement = <input
                className={classes.InputElement}
                {...props.elementConfig}
                value={props.value}
                onChange={props.changed} />;
    }

    return (
        <div className={classes.Input}>
            <label className={classes.Label}>{props.label}</label>
            {inputElement}
        </div>
    );

};

export default input;
```

container/ Checkout/ ContactData.js để tạm, ở trên cũng sẽ nhận inputtype vì react 16

```js
let form = (
            <form onSubmit={this.orderHandler}>
                 <Input inputtype="input" />
                <Button btnType="Success">ORDER</Button>
            </form>
```

ContactData.js

```js
class ContactData extends Component {
    // adđ
    state = {
        orderForm: {
            name: {
                elementType: 'input',
                elementConfig: {
                    type: 'text',
                    placeholder: 'Your Name'
                },
                value: ''
            },
            street: {
                elementType: 'input',
                elementConfig: {
                    type: 'text',
                    placeholder: 'Street'
                },
                value: ''
            },
            zipCode: {
                elementType: 'input',
                elementConfig: {
                    type: 'text',
                    placeholder: 'ZIP Code'
                },
                value: ''
            },
            country: {
                elementType: 'input',
                elementConfig: {
                    type: 'text',
                    placeholder: 'Country'
                },
                value: ''
            },
            email: {
                elementType: 'input',
                elementConfig: {
                    type: 'email',
                    placeholder: 'Your E-Mail'
                },
                value: ''
            },
            deliveryMethod: {
                elementType: 'select',
                elementConfig: {
                    options: [
                        {value: 'fastest', displayValue: 'Fastest'},
                        {value: 'cheapest', displayValue: 'Cheapest'}
                    ]
                },
                value: ''
            }
        },
        loading: false
    }

```



### 4. Setting Up a JS Config for the Form

Sửa lại Input.js

### 5. Dynamically Create Inputs based on JS Config

ContactData.js

```js
render () {
        const formElementsArray = [];
        for (let key in this.state.orderForm) {
            formElementsArray.push({
                id: key,
                config: this.state.orderForm[key]
            });
        }
    
		let form = (
            <form onSubmit={this.orderHandler}>
                {formElementsArray.map(formElement => (
                    <Input 
                        key={formElement.id}
                        elementType={formElement.config.elementType}
                        elementConfig={formElement.config.elementConfig}
                        value={formElement.config.value}
                        changed={(event) => this.inputChangedHandler(event, formElement.id)} />
                ))}
                <Button btnType="Success">ORDER</Button>
            </form>
        );
```



### 6. Adding a Dropdown Component

```js
case ( 'select' ):
            inputElement = (
                <select
                    className={classes.InputElement}
                    value={props.value}
                    onChange={props.changed}>
                    {props.elementConfig.options.map(option => (
                        <option key={option.value} value={option.value}>
                            {option.displayValue}
                        </option>
                    ))}
                </select>
            );
            break;
```



### 7. Handling User Input

ContactData thêm hàm onChange

```js
inputChangedHandler = (event, inputIdentifier) => {
        const updatedOrderForm = {
            ...this.state.orderForm
        };
        const updatedFormElement = { 
            ...updatedOrderForm[inputIdentifier]
        };
        updatedFormElement.value = event.target.value;
        updatedOrderForm[inputIdentifier] = updatedFormElement;
        this.setState({orderForm: updatedOrderForm});
    }

...
let form = (
            <form onSubmit={this.orderHandler}>
                {formElementsArray.map(formElement => (
                    <Input 
                        key={formElement.id}
                        elementType={formElement.config.elementType}
                        elementConfig={formElement.config.elementConfig}
                        value={formElement.config.value}
// add
                        changed={(event) => this.inputChangedHandler(event, formElement.id)} />
                ))}
                <Button btnType="Success">ORDER</Button>
            </form>
        );
```



### 8. Handling Form Submission

ContactData.js

```js
orderHandler = ( event ) => {
        event.preventDefault();
        this.setState( { loading: true } );
    // add
        const formData = {};
        for (let formElementIdentifier in this.state.orderForm) {
            formData[formElementIdentifier] = this.state.orderForm[formElementIdentifier].value;
        }
        const order = {
            ingredients: this.props.ingredients,
            price: this.props.price,
            // add
            orderData: formData
        }
        axios.post( '/orders.json', order )
            .then( response => {
                this.setState( { loading: false } );
                this.props.history.push( '/' );
            } )
            .catch( error => {
                this.setState( { loading: false } );
            } );
    }
```

![image-20200311233743058](./react-maximilan.assets/image-20200311233743058.png)

### 9. Adding Custom Form Validation

Contactdata.js

```js
state = {
        orderForm: {
            name: {
                elementType: 'input',
                elementConfig: {
                    type: 'text',
                    placeholder: 'Your Name'
                },
                value: '',
                // add
                validation: {
                    required: true
                },
                valid: false,
                touched: false
            },
            street: {
                elementType: 'input',
                elementConfig: {
                    type: 'text',
                    placeholder: 'Street'
                },
                value: '',
                validation: {
                    required: true
                },
                valid: false,
                touched: false
            },
            zipCode: {
                elementType: 'input',
                elementConfig: {
                    type: 'text',
                    placeholder: 'ZIP Code'
                },
                value: '',
                validation: {
                    required: true,
                    minLength: 5,
                    maxLength: 5
                },
                valid: false,
                touched: false
            },
            country: {
                elementType: 'input',
                elementConfig: {
                    type: 'text',
                    placeholder: 'Country'
                },
                value: '',
                validation: {
                    required: true
                },
                valid: false,
                touched: false
            },
            email: {
                elementType: 'input',
                elementConfig: {
                    type: 'email',
                    placeholder: 'Your E-Mail'
                },
                value: '',
                validation: {
                    required: true
                },
                valid: false,
                touched: false
            },
            deliveryMethod: {
                elementType: 'select',
                elementConfig: {
                    options: [
                        {value: 'fastest', displayValue: 'Fastest'},
                        {value: 'cheapest', displayValue: 'Cheapest'}
                    ]
                },
                value: '',
                valid: true
            }
        },
        formIsValid: false,
        loading: false
    }

checkValidity(value, rules) {
        let isValid = true;
        
        if (rules.required) {
            isValid = value.trim() !== '' && isValid;
        }

        if (rules.minLength) {
            isValid = value.length >= rules.minLength && isValid
        }

        if (rules.maxLength) {
            isValid = value.length <= rules.maxLength && isValid
        }

        return isValid;
    }

    inputChangedHandler = (event, inputIdentifier) => {
        const updatedOrderForm = {
            ...this.state.orderForm
        };
        const updatedFormElement = { 
            ...updatedOrderForm[inputIdentifier]
        };
        updatedFormElement.value = event.target.value;
        // add
        updatedFormElement.valid = this.checkValidity(updatedFormElement.value, updatedFormElement.validation);
        updatedFormElement.touched = true;
        updatedOrderForm[inputIdentifier] = updatedFormElement;
        
        let formIsValid = true;
        for (let inputIdentifier in updatedOrderForm) {
            formIsValid = updatedOrderForm[inputIdentifier].valid && formIsValid;
        }
        this.setState({orderForm: updatedOrderForm, formIsValid: formIsValid});
    }
```



### 10. Fixing a Common Validation Gotcha

### 11. Adding Validation Feedback

Input.js add class css

```js
const input = ( props ) => {
    let inputElement = null;
    const inputClasses = [classes.InputElement];
// add
    if (props.invalid && props.shouldValidate && props.touched) {
        inputClasses.push(classes.Invalid);
    }
```

props invalid truyền vào trong

ContactData.js

```js
 let form = (
            <form onSubmit={this.orderHandler}>
                {formElementsArray.map(formElement => (
                    <Input 
                        key={formElement.id}
                        elementType={formElement.config.elementType}
                        elementConfig={formElement.config.elementConfig}
                        value={formElement.config.value}
// add start
                        invalid={!formElement.config.valid}
                        shouldValidate={formElement.config.validation}
                        touched={formElement.config.touched}
// add end
                        changed={(event) => this.inputChangedHandler(event, formElement.id)} />
                ))}
                <Button btnType="Success" disabled={!this.state.formIsValid}>ORDER</Button>
            </form>
        );
```



### 12. Improving Visual Feedback

ContactData.js

```js
inputChangedHandler = (event, inputIdentifier) => {
        const updatedOrderForm = {
            ...this.state.orderForm
        };
        const updatedFormElement = { 
            ...updatedOrderForm[inputIdentifier]
        };
        updatedFormElement.value = event.target.value;
        updatedFormElement.valid = this.checkValidity(updatedFormElement.value, updatedFormElement.validation);
    // add start
        updatedFormElement.touched = true;
    // add end
        updatedOrderForm[inputIdentifier] = updatedFormElement;
        
        let formIsValid = true;
        for (let inputIdentifier in updatedOrderForm) {
            formIsValid = updatedOrderForm[inputIdentifier].valid && formIsValid;
        }
        this.setState({orderForm: updatedOrderForm, formIsValid: formIsValid});
    }
```



### 13. Showing Error Messages.html

We're not showing any error messages in our form, but you can of course easily add some.

The form inputs (`` component) already receives the information whether it's invalid or not. You could of course easily add some conditionally rendered element inside of that component.

For example (inside `` component function):

```js
// all the other code from the videos

let validationError = null;
if (props.invalid && props.touched) {
    validationError = <p>Please enter a valid value!</p>;
}

return (
     <div className={classes.Input}>
         <label className={classes.Label}>{props.label}</label>
         {inputElement}
         {validationError}
     </div>
 );
```

This could of course be finetuned. You could also pass the value type (e.g. `"email address"` ) as a prop:

```
validationError = Please enter a valid {props.valueType};
```

You could also receive the complete error message as a prop:

```
validationError = {props.errorMessage};
```

And of course, also don't forget to style the messages if you want to do that:

```
validationError = {props.errorMessage};
```

In your CSS file, you could have:

```css
.ValidationError {
    color: red;
    margin: 5px 0;
} 
```

### 14. Handling Overall Form Validity

ContactData thêm formIsValid: false,

```js
inputChangedHandler = (event, inputIdentifier) => {
        const updatedOrderForm = {
            ...this.state.orderForm
        };
        const updatedFormElement = { 
            ...updatedOrderForm[inputIdentifier]
        };
        updatedFormElement.value = event.target.value;
        updatedFormElement.valid = this.checkValidity(updatedFormElement.value, updatedFormElement.validation);
        updatedFormElement.touched = true;
        updatedOrderForm[inputIdentifier] = updatedFormElement;
        
    // Add
        let formIsValid = true;
        for (let inputIdentifier in updatedOrderForm) {
            formIsValid = updatedOrderForm[inputIdentifier].valid && formIsValid;
        }
        this.setState({orderForm: updatedOrderForm, formIsValid: formIsValid});
    }


....
<Button btnType="Success" disabled={!this.state.formIsValid}>ORDER</Button>

// Sửa json
,
            deliveryMethod: {
                elementType: 'select',
                elementConfig: {
                    options: [
                        {value: 'fastest', displayValue: 'Fastest'},
                        {value: 'cheapest', displayValue: 'Cheapest'}
                    ]
                },
               // add
                value: '', // # 16 có thể fix bằng thêm fastest
                valid: true
```

Sửa file button.js thêm tt disabled

### 15. Working on an Error

![image-20200312000728244](./react-maximilan.assets/image-20200312000728244.png)

```js

checkValidity(value, rules) {
        let isValid = true;
        // vì checkbox k có required nên access vào bị lỗi
        if (rules.required) {
            isValid = value.trim() !== '' && isValid;
        }
 // cách 1: chỉnh sửa obj có thêm tt validation: {}
```



Đối với combobox thêm validation: {} để tránh lỗi

Cách 2:

hay `if (!rules) return true;`

### 16. Fixing a Bug

deliveryMethod nên set value defauft cho combobox

- Validate.js (you may import its functionality into your React projects): https://validatejs.org/
- Get more ideas about potential validation approaches: https://react.rocks/tag/Validation

Alternatives to the manual approach taken in this course:

- react-validation package: https://www.npmjs.com/package/react-validation
- formsy-react package: https://github.com/christianalfoni/formsy-react

### 17. Useful Resources & Links.html

## 14. Redux

### 1. Module Introduction

### 2. Understanding State

State quyết định cái gì được hiển thị lên màn hình

### 3. The Complexity of Managing State

![image-20200223223919354](./react-maximilan.assets/image-20200223223919354.png)

### 4. Understanding the Redux Flow

![image-20200223224449104](./react-maximilan.assets/image-20200223224449104.png)

### 4.1 redux-learning-card.pdf.pdf

### 5. Setting Up Reducer and Store

Create file redux-basic.js

```js
const redux = require('redux');
const createStore = redux.createStore;

const initialState = {
    counter: 0
}

// Reducer
const rootReducer = (state = initialState, action) => {
    if (action.type === 'INC_COUNTER') {
        return {
            ...state,
            counter: state.counter + 1
        };
    }
    if (action.type === 'ADD_COUNTER') {
        return {
            ...state,
            counter: state.counter + action.value
        };
    }
    return state;
};

// Store
const store = createStore(rootReducer);
console.log(store.getState());

// Subscription
store.subscribe(() => {
    console.log('[Subscription]', store.getState());
});

// Dispatching Action
store.dispatch({type: 'INC_COUNTER'});
store.dispatch({type: 'ADD_COUNTER', value: 10});
console.log(store.getState());

```

Lưu ý : reducer chỉ có 1, test bằng node js

Lệnh node filename

### 6. Dispatching Actions



### 7. Adding Subscriptions

### 8. Connecting React to Redux

index.js

```js
import React from 'react';
import ReactDOM from 'react-dom';
import { createStore } from 'redux';
import { Provider } from 'react-redux';

import './index.css';
import App from './App';
import registerServiceWorker from './registerServiceWorker';
import reducer from './store/reducer';

const store = createStore(reducer);
// # 9 
ReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));
registerServiceWorker();

```

Create file store/reducer.js

```js
const initialState = {
    counter: 0
}

const reducer = (state = initialState, action) => {
    // # 10
    if (action.type === 'INCREMENT') {
        return {
            counter: state.counter + 1
        }
    }
    return state;
};

export default reducer;
```



### 9. Connecting the Store to React

`npm install --save react-redux`

Tại index.js thêm `ReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));`  

Provider is a component inject store to react component

### 10. Dispatching Actions from within the Component

connect is a func return HOC

Counter.js

```js
import React, { Component } from 'react';
import { connect } from 'react-redux';

import CounterControl from '../../components/CounterControl/CounterControl';
import CounterOutput from '../../components/CounterOutput/CounterOutput';

class Counter extends Component {
    state = {
        counter: 0
    }

    counterChangedHandler = ( action, value ) => {
        switch ( action ) {
            case 'inc':
                this.setState( ( prevState ) => { return { counter: prevState.counter + 1 } } )
                break;
            case 'dec':
                this.setState( ( prevState ) => { return { counter: prevState.counter - 1 } } )
                break;
            case 'add':
                this.setState( ( prevState ) => { return { counter: prevState.counter + value } } )
                break;
            case 'sub':
                this.setState( ( prevState ) => { return { counter: prevState.counter - value } } )
                break;
        }
    }

    render () {
        return (
            <div>
            // add
                <CounterOutput value={this.props.ctr} />

                <CounterControl label="Increment" clicked={this.props.onIncrementCounter} />
                <CounterControl label="Decrement" clicked={() => this.counterChangedHandler( 'dec' )}  />
                <CounterControl label="Add 5" clicked={() => this.counterChangedHandler( 'add', 5 )}  />
                <CounterControl label="Subtract 5" clicked={() => this.counterChangedHandler( 'sub', 5 )}  />
            </div>
        );
    }
}
// add
const mapStateToProps = state => {
    return {
        ctr: state.counter
    };
};

const mapDispatchToProps = dispatch => {
    return {
        onIncrementCounter: () => dispatch({type: 'INCREMENT'})
    };
};
// add
export default connect(mapStateToProps, mapDispatchToProps)(Counter);
```



### 11. Time to Practice - Dispatching Actions.html

### 12. Passing and Retrieving Data with Action

Counter.js

```js
class Counter extends Component {
    render () {
        return (
            <div>
                <CounterOutput value={this.props.ctr} />
                <CounterControl label="Increment" clicked={this.props.onIncrementCounter} />
                <CounterControl label="Decrement" clicked={this.props.onDecrementCounter}  />
                <CounterControl label="Add 10" clicked={this.props.onAddCounter}  />
                <CounterControl label="Subtract 15" clicked={this.props.onSubtractCounter}  />
                <hr />
                <button onClick={() => this.props.onStoreResult(this.props.ctr)}>Store Result</button>
                <ul>
                    {this.props.storedResults.map(strResult => (
                        <li key={strResult.id} onClick={() => this.props.onDeleteResult(strResult.id)}>{strResult.value}</li>
                    ))}
                </ul>
            </div>
        );
    }
}

const mapStateToProps = state => {
    return {

        ctr: state.ctr.counter,
        storedResults: state.res.results
    }
};

const mapDispatchToProps = dispatch => {
    return {
        onIncrementCounter: () => dispatch({type: actionTypes.INCREMENT}),
        onDecrementCounter: () => dispatch({type: actionTypes.DECREMENT}),
        // add start
        onAddCounter: () => dispatch({type: actionTypes.ADD, val: 10}),
        onSubtractCounter: () => dispatch({type: actionTypes.SUBTRACT, val: 15}),
        // add end
        onStoreResult: (result) => dispatch({type: actionTypes.STORE_RESULT, result: result}),
        onDeleteResult: (id) => dispatch({type: actionTypes.DELETE_RESULT, resultElId: id})
    }
};

export default connect(mapStateToProps, mapDispatchToProps)(Counter);
```

reducer.js

```js
const reducer = ( state = initialState, action ) => {
    switch ( action.type ) {
        case actionTypes.INCREMENT:
            const newState = Object.assign({}, state);
            newState.counter = state.counter + 1;
            return newState;
        case actionTypes.DECREMENT:
            return {
                ...state,
                counter: state.counter - 1
            }
        case actionTypes.ADD:
            return {
                ...state,
                counter: state.counter + action.val
            }
        case actionTypes.SUBTRACT:
            return {
                ...state,
                counter: state.counter - action.val
            }
    }
    return state;
};
```



### 13. Switch-Case in the Reducer

### 14. Updating State Immutably

Thêm button tại file Counter.js

```js
const mapStateToProps = state => {
    return {

        ctr: state.ctr.counter,
        storedResults: state.res.results
    }
};

<hr />
   <button onClick={() => this.props.onStoreResult(this.props.ctr)}>Store Result</button>
<ul>
    {this.props.storedResults.map(strResult => (
<li key={strResult.id} onClick={() => this.props.onDeleteResult(strResult.id)}>{strResult.value}</li>
     ))}
</ul>

const mapDispatchToProps = dispatch => {
    return {
        onIncrementCounter: () => dispatch({type: actionTypes.INCREMENT}),
        onDecrementCounter: () => dispatch({type: actionTypes.DECREMENT}),
        onAddCounter: () => dispatch({type: actionTypes.ADD, val: 10}),
        onSubtractCounter: () => dispatch({type: actionTypes.SUBTRACT, val: 15}),
        // add
        onStoreResult: (result) => dispatch({type: actionTypes.STORE_RESULT, result: result}),
        onDeleteResult: (id) => dispatch({type: actionTypes.DELETE_RESULT, resultElId: id})
    }
};
```

result.js

```js
import * as actionTypes from '../actions';

const initialState = {
    results: []
};

const reducer = ( state = initialState, action ) => {
    switch ( action.type ) {
        case actionTypes.STORE_RESULT:
            return {
                ...state,
                results: state.results.concat({id: new Date(), value: action.result})
            }
            // # 15
        case actionTypes.DELETE_RESULT:
            // const id = 2;
            // const newArray = [...state.results];
            // newArray.splice(id, 1)
            const updatedArray = state.results.filter(result => result.id !== action.resultElId);
            return {
                ...state,
                results: updatedArray
            }
    }
    return state;
};

export default reducer;
```

 ...state: để giữ lại state, copy state

### 15. Updating Arrays Immutably

Hàm filter return a new array, get các element khác id

### 16. Immutable Update Patterns.html

Immutable Update Patterns on reduxjs.org: http://redux.js.org/docs/recipes/reducers/ImmutableUpdatePatterns.html

## Updating Nested Objects

The key to updating nested data is **that \*every\* level of nesting must be copied and updated appropriately**. This is often a difficult concept for those learning Redux, and there are some specific problems that frequently occur when trying to update nested objects. These lead to accidental direct mutation, and should be avoided.

##### Common Mistake #1: New variables that point to the same objects

Defining a new variable does *not* create a new actual object - it only creates another reference to the same object. An example of this error would be:

```js
function updateNestedState(state, action) {
    let nestedState = state.nestedState;
    // ERROR: this directly modifies the existing object reference - don't do this!
    nestedState.nestedField = action.data;

    return {
        ...state,
        nestedState
    };
}
```

This function does correctly return a shallow copy of the top-level state object, but because the `nestedState` variable was still pointing at the existing object, the state was directly mutated.

##### Common Mistake #2: Only making a shallow copy of one level

Another common version of this error looks like this:

```js
function updateNestedState(state, action) {
    // Problem: this only does a shallow copy!
    let newState = {...state};

    // ERROR: nestedState is still the same object!
    newState.nestedState.nestedField = action.data;

    return newState;
}
```

Doing a shallow copy of the top level is *not* sufficient - the `nestedState` object should be copied as well.

##### Correct Approach: Copying All Levels of Nested Data

Unfortunately, the process of correctly applying immutable updates to deeply nested state can easily become verbose and hard to read. Here's what an example of updating `state.first.second[someId].fourth` might look like:

```js
function updateVeryNestedField(state, action) {
    return {
        ...state,
        first : {
            ...state.first,
            second : {
                ...state.first.second,
                [action.someId] : {
                    ...state.first.second[action.someId],
                    fourth : action.someValue
                }
            }
        }
    }
}
```

Obviously, each layer of nesting makes this harder to read, and gives more chances to make mistakes. This is one of several reasons why you are encouraged to keep your state flattened, and compose reducers as much as possible.

## Inserting and Removing Items in Arrays

Normally, a Javascript array's contents are modified using mutative functions like `push`, `unshift`, and `splice`. Since we don't want to mutate state directly in reducers, those should normally be avoided. Because of that, you might see "insert" or "remove" behavior written like this:

```js
function insertItem(array, action) {
    return [
        ...array.slice(0, action.index),
        action.item,
        ...array.slice(action.index)
    ]
}

function removeItem(array, action) {
    return [
        ...array.slice(0, action.index),
        ...array.slice(action.index + 1)
    ];
}
```

However, remember that the key is that the *original in-memory reference* is not modified. **As long as we make a copy first, we can safely mutate the copy**. Note that this is true for both arrays and objects, but nested values still must be updated using the same rules.

This means that we could also write the insert and remove functions like this:

```js
function insertItem(array, action) {
    let newArray = array.slice();
    newArray.splice(action.index, 0, action.item);
    return newArray;
}

function removeItem(array, action) {
    let newArray = array.slice();
    newArray.splice(action.index, 1);
    return newArray;
}
```

The remove function could also be implemented as:

```js
function removeItem(array, action) {
    return array.filter( (item, index) => index !== action.index);
}
```

## Updating an Item in an Array

Updating one item in an array can be accomplished by using `Array.map`, returning a new value for the item we want to update, and returning the existing values for all other items:

```js
function updateObjectInArray(array, action) {
    return array.map( (item, index) => {
        if(index !== action.index) {
            // This isn't the item we care about - keep it as-is
            return item;
        }

        // Otherwise, this is the one we want - return an updated value
        return {
            ...item,
            ...action.item
        };    
    });
}
```

## Immutable Update Utility Libraries

Because writing immutable update code can become tedious, there are a number of utility libraries that try to abstract out the process. These libraries vary in APIs and usage, but all try to provide a shorter and more succinct way of writing these updates. Some, like [dot-prop-immutable](https://github.com/debitoor/dot-prop-immutable), take string paths for commands:

```
state = dotProp.set(state, `todos.${index}.complete`, true)
```

Others, like [immutability-helper](https://github.com/kolodny/immutability-helper) (a fork of the now-deprecated React Immutability Helpers addon), use nested values and helper functions:

```js
var collection = [1, 2, {a: [12, 17, 15]}];
var newCollection = update(collection, {2: {a: {$splice: [[1, 1, 13, 14]]}}});
```

They can provide a useful alternative to writing manual immutable update logic.

[Immutable Data#Immutable Update Utilities](https://github.com/markerikson/redux-ecosystem-links/blob/master/immutable-data.md#immutable-update-utilities) section of the [Redux Addons Catalog](https://github.com/markerikson/redux-ecosystem-links).

### 17. Outsourcing Action Types

Create file actions.js

```js
export const INCREMENT = 'INCREMENT';
export const DECREMENT = 'DECREMENT';
export const ADD = 'ADD';
export const SUBTRACT = 'SUBTRACT';
export const STORE_RESULT = 'STORE_RESULT';
export const DELETE_RESULT = 'DELETE_RESULT';
```

Ở file khác import: `import * as actionTypes from '../actions';`

### 18. Combining Multiple Reducers

Tách file

index.js

```js
import React from 'react';
import ReactDOM from 'react-dom';
import { Provider } from 'react-redux';
import { createStore, combineReducers } from 'redux';

import counterReducer from './store/reducers/counter';
import resultReducer from './store/reducers/result';
import './index.css';
import App from './App';
import registerServiceWorker from './registerServiceWorker';

const rootReducer = combineReducers({
    ctr: counterReducer,
    res: resultReducer
});

const store = createStore(rootReducer);

ReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));
registerServiceWorker();

```

Sửa lại file Counter.js

```js
<button onClick={() => this.props.onStoreResult(this.props.ctr)}>Store Result</button>

...

const mapStateToProps = state => {
    return {

        ctr: state.ctr.counter,
        storedResults: state.res.results
    }
};
```



### 19. Understanding State Types

### 19.1 state-types.pdf.pdf

![image-20200224214536333](./react-maximilan.assets/image-20200224214536333.png)

### 20. Time to Practice - Redux Basics.html

### 21. [OPTIONAL] Assignment Solution

npm install --save redux react-redux

reducer.js

```js
import * as actionTypes from './actions';

const initialState = {
    persons: []
};

const reducer = ( state = initialState, action ) => {
    switch ( action.type ) {
        case actionTypes.ADD_PERSON:
            const newPerson = {
                id: Math.random(), // not really unique but good enough here!
                name: 'Max',
                age: Math.floor( Math.random() * 40 )
            }
            return {
                ...state,
                persons: state.persons.concat( newPerson )
            }
        case actionTypes.REMOVE_PERSON:
            return {
                ...state,
                persons: state.persons.filter(person => person.id !== action.personId)
            }
    }
    return state;
};

export default reducer;
```

index.js

```js
import React from 'react';
import ReactDOM from 'react-dom';
import { createStore } from 'redux';
import { Provider } from 'react-redux';

import './index.css';
import App from './App';
import registerServiceWorker from './registerServiceWorker';
import reducer from './store/reducer';

const store = createStore(reducer);

ReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));
registerServiceWorker();

```

Person.js

```js
import React, { Component } from 'react';
import { connect } from 'react-redux';

import Person from '../components/Person/Person';
import AddPerson from '../components/AddPerson/AddPerson';
import * as actionTypes from '../store/actions';

class Persons extends Component {
    // di chuyen cac ham add delete to reducer
    
    render () {
        return (
            <div>
                <AddPerson personAdded={this.props.onAddedPerson} />
                {this.props.prs.map(person => (
                    <Person 
                        key={person.id}
                        name={person.name} 
                        age={person.age} 
                        clicked={() => this.props.onRemovedPerson(person.id)}/>
                ))}
            </div>
        );
    }
}

const mapStateToProps = state => {
    return {
        prs: state.persons
    };
};

const mapDispatchToProps = dispatch => {
    return {
        onAddedPerson: () => dispatch({type: actionTypes.ADD_PERSON}),
        onRemovedPerson: (id) => dispatch({type: actionTypes.REMOVE_PERSON, personId: id})
    }
};

export default connect(mapStateToProps, mapDispatchToProps)(Persons);
```



### 22. Combining Local UI State and Redux

Sửa file addPerson.js

xem lại

### 23. Wrap Up

### 24. Useful Resources & Links.html



- Redux Docs: http://redux.js.org/
- Core Concepts: http://redux.js.org/docs/introduction/CoreConcepts.html
- Actions: http://redux.js.org/docs/basics/Actions.html
- Reducers: http://redux.js.org/docs/basics/Reducers.html
- Redux FAQs: http://redux.js.org/docs/FAQ.html

## 15. Adding Redux to our Project

### 1. Module Introduction

### 2. Installing Redux and React Redux

reducer.js

```js
import * as actionTypes from './actions';

const initialState = {
    ingredients: null,
    totalPrice: 4
};

const reducer = (state = initialState, action) => {

};

export default reducer;
```

index.js

```js
import React from 'react';
import ReactDOM from 'react-dom';
import { BrowserRouter } from 'react-router-dom';
import { Provider } from 'react-redux';
import { createStore } from 'redux';

import './index.css';
import App from './App';
import registerServiceWorker from './registerServiceWorker';
import reducer from './store/reducer';

const store = createStore(reducer);

const app = (
    <Provider store={store}>
        <BrowserRouter>
            <App />
        </BrowserRouter>
    </Provider>
);

ReactDOM.render( app, document.getElementById( 'root' ) );
registerServiceWorker();

```



### 3. Basic Redux Setup

### 4. Finishing the Reducer for Ingredients

reducer.js

```js
import * as actionTypes from './actions';

const initialState = {
    ingredients: {
        salad: 0,
        bacon: 0,
        cheese: 0,
        meat: 0
    },
    totalPrice: 4
};

const INGREDIENT_PRICES = {
    salad: 0.5,
    cheese: 0.4,
    meat: 1.3,
    bacon: 0.7
};

const reducer = ( state = initialState, action ) => {
    switch ( action.type ) {
        case actionTypes.ADD_INGREDIENT:
            return {
                ...state,
                ingredients: {
                    ...state.ingredients,
                    [action.ingredientName]: state.ingredients[action.ingredientName] + 1
                },
                totalPrice: state.totalPrice + INGREDIENT_PRICES[action.ingredientName]
            };
        case actionTypes.REMOVE_INGREDIENT:
            return {
                ...state,
                ingredients: {
                    ...state.ingredients,
                    [action.ingredientName]: state.ingredients[action.ingredientName] - 1
                },
                totalPrice: state.totalPrice - INGREDIENT_PRICES[action.ingredientName]
            };
        default:
            return state;
    }
};

export default reducer;
```

BurgerBuilder.js comment lại

```js
componentDidMount () {
        console.log(this.props);
        // axios.get( 'https://react-my-burger.firebaseio.com/ingredients.json' )
        //     .then( response => {
        //         this.setState( { ingredients: response.data } );
        //     } )
        //     .catch( error => {
        //         this.setState( { error: true } );
        //     } );
    }
```



### 5. Connecting the Burger Builder Container to our Store

BurgerBuilder.js

```js

// delete state k cần
state = {
        purchasing: false,
        loading: false,
        error:
    
// Thay hết this.state.ingredients => this.props.ings
const mapStateToProps = state => {
    return {
        ings: state.ingredients,
        price: state.totalPrice
    };
}

const mapDispatchToProps = dispatch => {
    return {
        onIngredientAdded: (ingName) => dispatch({type: actionTypes.ADD_INGREDIENT, ingredientName: ingName}),
        onIngredientRemoved: (ingName) => dispatch({type: actionTypes.REMOVE_INGREDIENT, ingredientName: ingName})
    }
}

export default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler( BurgerBuilder, axios ));
```

BuildControls

button ORDER k hoạt động

### 6. Working on the Total Price Calculation

reducer xử lý totalPrice

Xóa hàm add and remove in BurgerBuilder.js

```js
const mapStateToProps = state => {
    return {
        ings: state.ingredients,
        // add
        price: state.totalPrice
    };
}
// sau đố replace state
```



### 7. Redux & UI State

BurgerBuilder sẽ không quản lí state purchasable

```js
updatePurchaseState ( ingredients ) {
        const sum = Object.keys( ingredients )
            .map( igKey => {
                return ingredients[igKey];
            } )
            .reduce( ( sum, el ) => {
                return sum + el;
            }, 0 );
        return sum > 0;
    }

....
burger = (
                <Aux>
                    <Burger ingredients={this.props.ings} />
                    <BuildControls
                        ingredientAdded={this.props.onIngredientAdded}
                        ingredientRemoved={this.props.onIngredientRemoved}
                        disabled={disabledInfo}
/// add
                        purchasable={this.updatePurchaseState(this.props.ings)}
                        ordered={this.purchaseHandler}
                        price={this.props.price} />
                </Aux>
            );
```



### 8. Adjusting Checkout and Contact Data

remove purchaseContinueHandler in BurgerBuilder

```js
purchaseContinueHandler = () => {
        this.props.history.push('/checkout');
    }
```

Checkout.js

```js
// xóa componentWillMount and remove state
import React, { Component } from 'react';
import { Route } from 'react-router-dom';
import { connect } from 'react-redux';

import CheckoutSummary from '../../components/Order/CheckoutSummary/CheckoutSummary';
import ContactData from './ContactData/ContactData';

class Checkout extends Component {

    checkoutCancelledHandler = () => {
        this.props.history.goBack();
    }

    checkoutContinuedHandler = () => {
        this.props.history.replace( '/checkout/contact-data' );
    }

    render () {
        return (
            <div>
                <CheckoutSummary
            // chuyển state thành props
                    ingredients={this.props.ings}
                    checkoutCancelled={this.checkoutCancelledHandler}
                    checkoutContinued={this.checkoutContinuedHandler} />
                <Route 
                    path={this.props.match.path + '/contact-data'} 
// add
                    component={ContactData} />
            </div>
        );
    }
}

const mapStateToProps = state => {
    return {
        ings: state.ingredients
    }
};

export default connect(mapStateToProps)(Checkout);
```

ContactData.js

```js

const mapStateToProps = state => {
    return {
        ings: state.ingredients, // nhớ thay tên
        price: state.totalPrice
    }
};

export default connect(mapStateToProps)(ContactData);
```



### 9. Wrap Up

### 10. Useful Resources & Links.html

## 16. Redux Advanced

### 1. Module Introduction



### 2. Adding Middleware

Middleware is term used for function or the code general you hook into a process which then get executed as part of  that process without stopping it

![image-20200225203849602](./react-maximilan.assets/image-20200225203849602.png)  

index.js: connect middleware to store

```js

// add
const logger = store => {
    // next is a middleware
    return next => {
        return action => {
            console.log('[Middleware] Dispatching', action);
            const result = next(action);
            console.log('[Middleware] next state', store.getState());
            return result;
        }
    }
};

const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;

// add
const store = createStore(rootReducer, applyMiddleware(logger));

// sau đó run npm start

```

![image-20200225210018306](./react-maximilan.assets/image-20200225210018306.png)

### 3. Using the Redux Devtools

install redux dev tool 

https://github.com/zalmoxisus/redux-devtools-extension

index.js

```js
// add
import { createStore, combineReducers, applyMiddleware, compose } from 'redux';

const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;

const store = createStore(rootReducer, composeEnhancers(applyMiddleware(logger)));

```

Trong file READMe.md có HD

![image-20200225211147576](./react-maximilan.assets/image-20200225211147576.png)  



### 4. Executing Asynchronous Code - Introduction

### 5. Introducing Action Creators

create folder actions/ .  Sửa file action.js

```js
export const INCREMENT = 'INCREMENT';
export const DECREMENT = 'DECREMENT';
export const ADD = 'ADD';
export const SUBTRACT = 'SUBTRACT';
export const STORE_RESULT = 'STORE_RESULT';
export const DELETE_RESULT = 'DELETE_RESULT';

export const increment = () => {
    return {
        type: INCREMENT
    };
};

export const decrement = () => {
    return {
        type: DECREMENT
    };
};

export const add = (value) => {
    return {
        type: ADD,
        val: value
    };
};

export const subtract = (value) => {
    return {
        type: SUBTRACT,
        val: value
    };
};

export const storeResult = (res) => {
    return {
        type: STORE_RESULT,
        result: res
    };
};

export const deleteResult = (resElId) => {
    return {
        type: DELETE_RESULT,
        resultElId: resElId
    };
};
```

It is a func return an action or create an action

### 6. Action Creators & Async Code

Counter.js

```js
import * as actionCreators from '../../store/actions/actions';


const mapDispatchToProps = dispatch => {
    return {
        onIncrementCounter: () => dispatch(actionCreators.increment()),
        onDecrementCounter: () => dispatch(actionCreators.decrement()),
        onAddCounter: () => dispatch(actionCreators.add(10)),
        onSubtractCounter: () => dispatch(actionCreators.subtract(15)),
        onStoreResult: (result) => dispatch(actionCreators.storeResult(result)),
        onDeleteResult: (id) => dispatch(actionCreators.deleteResult(id))
    }
};

export default connect(mapStateToProps, mapDispatchToProps)(Counter);
```



### 7. Handling Asynchronous Code

redux-thunk: https://github.com/reduxjs/redux-thunk

Thunk là 1 function mà nó khác biệt những function bình thường là thay vì return trực tiếp kết quả thì **thunk** lại return ra 1 function và trong function đó làm tiếp một vài nhiệm vụ nữa sau đó mới return ra kết quả cuối cùng.

[https://insights.innovatube.com/redux-th%E1%BA%ADt-l%C3%A0-%C4%91%C6%A1n-gi%E1%BA%A3n-ph%E1%BA%A7n-cu%E1%BB%91i-4155b1cfed03](https://insights.innovatube.com/redux-thật-là-đơn-giản-phần-cuối-4155b1cfed03)

not return an action => return dispatch action

`npm install --save redux-thunk`

index.js

```js
import thunk from 'redux-thunk';


const store = createStore(rootReducer, composeEnhancers(applyMiddleware(logger, thunk)));

```

action.js

```js
export const saveResult = ( res ) => {
    return {
        type: STORE_RESULT,
        result: res
    };
}

export const storeResult = ( res ) => {
    return dispatch => {
        setTimeout( () => {
            dispatch(saveResult(res));
        }, 2000 );
    }
};
// sẽ loop vô tận nếu dispatch storeResult
```

npm start

### 8. Restructuring Actions

Sửa lại folder actions

actionTypes.js

```js
export const INCREMENT = 'INCREMENT';
export const DECREMENT = 'DECREMENT';
export const ADD = 'ADD';
export const SUBTRACT = 'SUBTRACT';
export const STORE_RESULT = 'STORE_RESULT';
export const DELETE_RESULT = 'DELETE_RESULT';

// tách ra 2 file nữa actions vs result 
```

index.js trong folder action

```js
export {
    add,
    subtract,
    increment,
    decrement
} from './counter';
export {
    storeResult,
    deleteResult
} from './result';
```

Sửa lại import counter.js, result.js, Counter.js

### 9. Where to Put Data Transforming Logic

result.js

```js
export const saveResult = ( res ) => {
    // chỉnh sửa nên đặt ở đây
    // const updatedResult = res * 2;
    return {
        type: actionTypes.STORE_RESULT,
        result: res
    };
}

export const storeResult = ( res ) => {
    return (dispatch, getState) => {
        setTimeout( () => {
            // const oldCounter = getState().ctr.counter;
            // console.log(oldCounter);
            dispatch(saveResult(res));
        }, 2000 );
    }
};
```

Nên update logic in reducer

result.js

```js

const initialState = {
    results: []
};

const reducer = ( state = initialState, action ) => {
    switch ( action.type ) {
        case actionTypes.STORE_RESULT:
            // Change here
            return {
                ...state,
                results: state.results.concat({id: new Date(), value: action.result})
            }
        case actionTypes.DELETE_RESULT:
            // const id = 2;
            // const newArray = [...state.results];
            // newArray.splice(id, 1)
            const updatedArray = state.results.filter(result => result.id !== action.resultElId);
            return {
                ...state,
                results: updatedArray
            }
    }
    return state;
};

export default reducer;
```



![image-20200225221753848](./react-maximilan.assets/image-20200225221753848.png)

### 10. Using Action Creators and Get State

result.js nhờ tham số thứ 2 trong redux-thunk getState current

```js

export const storeResult = ( res ) => {
    return (dispatch, getState) => {
        setTimeout( () => {
            // const oldCounter = getState().ctr.counter;
            // console.log(oldCounter);
            dispatch(saveResult(res));
        }, 2000 );
    }
};

```



### 11. Using Utility Functions

optional way

create file utility.js

```js
export const updateObject = (oldObject, updatedValues) => {
    return {
        ...oldObject,
        ...updatedValues
    }
};
```

counter.js

```js

import { updateObject } from '../utility';

const reducer = ( state = initialState, action ) => {
    switch ( action.type ) {
        case actionTypes.INCREMENT:
            return updateObject(state, {counter: state.counter + 1});
        case actionTypes.DECREMENT:
            return updateObject(state, {counter: state.counter - 1});
        case actionTypes.ADD:
            return updateObject(state, {counter: state.counter + action.val});
        case actionTypes.SUBTRACT:
            return updateObject(state, {counter: state.counter - action.val});
    }
    return state;
};

export default reducer;
```

result.js

```js
// 12
const deleteResult = ( state, action ) => {
    const updatedArray = state.results.filter( result => result.id !== action.resultElId );
    return updateObject( state, { results: updatedArray } );
};

const reducer = ( state = initialState, action ) => {
    switch ( action.type ) {
        case actionTypes.STORE_RESULT : return updateObject( state, { results: state.results.concat( { id: new Date(), value: action.result * 2 } ) } );
        case actionTypes.DELETE_RESULT : return deleteResult(state, action);
    }
    return state;
};

export default reducer;
```



### 12. A Leaner Switch Case Statement

### 13. An Alternative Folder Structure

create store in folder container

### 14. Diving Much Deeper

xem lại Immutable update patterns in trang chủ redux

### 15. Wrap Up

### 16. Useful Resources & Links.html

- Middleware: http://redux.js.org/docs/advanced/Middleware.html
- redux-thunk package: https://github.com/gaearon/redux-thunk
- Async Actions: https://redux.js.org/advanced/asyncactions

## 17. Redux Advanced Burger Project

### 1. Module Introduction



### 2. Installing the Redux Devtools

clean db

index.js

```js

const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;

const store = createStore(burgerBuilderReducer, composeEnhancers(
    applyMiddleware(thunk)
));
```



### 3. Preparing the Folder Structure

In store create actions and reducer folder and file in this

### 4. Creating Action Creators

BurgerBuilder.js in action

```js
import * as actionTypes from './actionTypes';
import axios from '../../axios-orders';

export const addIngredient = ( name ) => {
    return {
        type: actionTypes.ADD_INGREDIENT,
        ingredientName: name
    };
};

export const removeIngredient = ( name ) => {
    return {
        type: actionTypes.REMOVE_INGREDIENT,
        ingredientName: name
    };
};
// # 6
export const setIngredients = ( ingredients ) => {
    return {
        type: actionTypes.SET_INGREDIENTS,
        ingredients: ingredients
    };
};

/// # 6
export const fetchIngredientsFailed = () => {
    return {
        type: actionTypes.FETCH_INGREDIENTS_FAILED
    };
};

export const initIngredients = () => {
    return dispatch => {
        axios.get( 'https://react-my-burger.firebaseio.com/ingredients.json' )
            .then( response => {
               dispatch(setIngredients(response.data));
            } )
            .catch( error => {
                dispatch(fetchIngredientsFailed());
            } );
    };
};
```

container BurgerBuilder.js

```js
import * as burgerBuilderActions from '../../store/actions/index';

const mapDispatchToProps = dispatch => {
    return {
        onIngredientAdded: (ingName) => dispatch(burgerBuilderActions.addIngredient(ingName)),
        onIngredientRemoved: (ingName) => dispatch(burgerBuilderActions.removeIngredient(ingName)),
        onInitIngredients: () => dispatch(burgerBuilderActions.initIngredients())
    }
}
```

index.js

```js
export {
    addIngredient,
    removeIngredient,
    initIngredients
} from './burgerBuilder';
export { } from './order';
```



### 5. Executing Asynchronous Code

npm install redux-thunk

Xem lại chỗ index.js

```js

const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;

const store = createStore(burgerBuilderReducer, composeEnhancers(
    applyMiddleware(thunk)
));

```



### 6. Fetching Ingredients Asynchronously

Copy hàm trong BurgerBuilder componentDidMount và xóa state error

reducer/burgerBuilder.js

```js

const initialState = {
    ingredients: null,  // change
    totalPrice: 4,
    error: false
};
```

Thêm fetchIngredientsFailed

### 7. Initializing Ingredients in the BurgerBuilder

### 8. Changing the Order of our Ingredients Manually

### 9. Adding Order Actions



### 10. Connecting Contact Data Container & Actions

### 11. The Order Reducer

### 12. Working on Order Actions

### 13. Redirect to Improve UX

### 14. Combining Reducers

### 15. Handling Purchases & Updating the UI

### 16. Resetting the Price after Purchases

### 17. Fetching Orders (via Redux)

### 18. Checking our Implemented Functionalities

### 19. Refactoring Reducers

### 20. Refactoring Reducers Continued

### 21. Wrap Up

### 22. Useful Resources & Links.html

## 18. Adding Authentication to our Burger Project

### 1. Module Introduction

### 10. Logging Users Out

### 11. Accessing Protected Resources

### 12. Updating the UI Depending on Auth State

### 13. Adding a Logout Link

### 14. Forwarding Unauthenticated Users

### 15. Redirecting the User to the Checkout Page

### 16. Persistent Auth State with localStorage

### 17. Fixing Connect + Routing Errors

### 18. Ensuring App Security

### 19. Guarding Routes

### 2. Understanding Authentication in Single Page Applications

### 20. Displaying User Specific Orders

### 21. Wrap Up

### 22. Useful Resources & Links.html

### 3. Required App Adjustments

### 4. Adding an Auth Form

### 5. Adding Actions

### 6. Getting a Token from the Backend

### 7. Adding Sign-In

### 8. Storing the Token

### 9. Adding a Spinner

## 19. Improving our Burger Project

### 1. Module Introduction

### 2. Fixing the Redirect to the Frontpage

### 3. Using updateObject in the Entire App

### 4. Sharing the Validation Method

### 5. Using Environment Variables

### 6. Removing console.log()s

### 7. Adding Lazy Loading

### 8. Wrap Up

### 9. Useful Resources & Links.html

## 20. Testing

### 1. Module Introduction

### 10. How to Test Redux

### 11. Wrap Up

### 12. Useful Resources & Links.html

### 2. What is Testing

### 3. Required Testing Tools

### 4. What To Test

### 5. Writing our First Test

### 6. Testing Components Continued

### 7. Jest and Enzyme Documentations

### 8. Testing Components Correctly

### 9. Testing Containers

## 21. Deploying the App to the Web

### 1. Module Introduction

### 2. Deployment Steps

### 3. Building the Project

### 4. Example Deploying on Firebase

### 5. Wrap Up

### 6. Useful Resources & Links.html

## 22. Bonus Working with Webpack

### 1. Module Introduction

### 10. Setting Up the Basic Webpack Config

### 11. Adding File Rules

### 12. Introducing Babel

### 13. Adding CSS File Support

### 14. Creating Rules for Images

### 15. Lazy Loading

### 16. Injecting the Script into the index.html File

### 16. Injecting the Script into the index.html File.vtt

### 17. Creating the Production Workflow

### 18. Wrap Up

### 19. Adding babel-polyfill.html

### 2. Important Use Webpack 3.html

### 20. Useful Resources & Links.html

### 3. Introducing Webpack

### 4. How Webpack works

### 5. Basic Workflow Requirements

### 6. Project & npm Setup

### 7. Creating a Basic Folder & File Structure

### 8. Creating the Basic React Application

### 9. Installing Production Dependencies

## 23. Bonus Next.js

### 1. Module Introduction

### 10. Useful Resources & Links.html

### 2. Understanding Server Side Rendering

### 3. Setting Up a Project

### 4. Understanding the Basics

### 5. Next.js & Components & Pages

### 6. Styling our App in Next.js

### 7. Handling (404) Errors

### 8. A Special Lifecycle Hook

### 9. Deploying our App

## 24. Bonus Animations in React Apps

### 1. Module Introduction

### 10. Transition Events

### 11. The CSSTransition Component

### 12. Customizing CSS Classnames

### 13. Animating Lists

### 14. Alternative Animation Packages

### 15. Wrap Up

### 16. Useful Resources & Links.html

### 2. Preparing the Demo Project

### 3. Using CSS Transitions

### 4. Using CSS Animations

### 5. CSS Transition & Animations Limitations

### 6. Using ReactTransitionGroup

### 7. Using the Transition Component

### 8. Wrapping the Transition Component

### 9. Animation Timings

## 25. Bonus A Brief Introduction to Redux Saga

### 1. Module Introduction

### 10. Moving the Orders Side Effects into Sagas

### 11. Why Sagas can be Helpful

### 12. Diving Deeper into Sagas

### 13. Useful Resources & Links.html

### 2. Installing Redux Saga

### 3. Creating our First Saga

### 4. Hooking the Saga Up (to the Store and Actions)

### 5. Moving Logic from the Action Creator to a Saga

### 6. Moving More Logic Into Sagas

### 7. Handling Authentication with a Saga

### 8. Handling Auto-Sign-In with a Saga

### 9. Moving the BurgerBuilder Side Effects into a Saga

## 26. React Hooks

### 1. Introduction

### 10. The useEffect() Hook

### 11. Controlling Effect Execution

### 12. Effect Cleanup

### 13. Converting the App Component

### 14. The useContext() Hook

### 15. State and Effects Gotchas

### 16. The useReducer() Hook

### 17. useReducer() vs useState()

### 18. Working with References and useRef()

### 19. Preparing & Optimizing

### 2. What are Hooks

### 20. Avoiding Unnecessary Re-Rendering

### 21. How to think about Functional Components with Hooks

### 22. Creating a Custom Hook

### 23. Wrap Up

### 3. Enabling Hooks

### 4. The useState() Hook

### 5. Adding Array Destructuring

### 6. Using Multiple State

### 7. Using One State Instead

### 8. The Rules of Hooks

### 9. Sending Data via Http

## 27. Using Hooks in the Burger Builder

### 1. Introduction

### 10. Using React.memo() & More!

### 11. Adding a Custom Error Handling Hook

### 12. Wrap Up

### 13. Useful Resources & Links.html

### 2. Converting App

### 3. Routing with React.lazy()

### 4. Converting the Layout Component

### 5. Converting withErrorHandler HOC

### 6. Adjusting the Order & Checkout Containers

### 7. Add Hooks to ContactData

### 8. Converting the BurgerBuilder Container

### 9. Adjusting Auth & Logout Components

## 28. Bonus Building the Burger CSS

### 1. Building the Burger CSS Code

### 1.1 burger-css.pdf.pdf

## 29. Next Steps and Course Roundup

### 1. Module Introduction

### 10. Bonus More Content!.html

### 2. React Rocks! Where to find more Examples

### 3. More Inspiration Real-World Projects Built with React

### 4. Static React Apps with Gatsby.js

### 5. Introducing React Native

### 6. Component Libraries (Example Material UI)

### 7. Smaller Apps with Preact

### 8. Comparing React with Preact

### 9. Congratulations



Hook

https://viblo.asia/p/tim-hieu-ve-hooks-trong-react-Ljy5VzGG5ra

https://viblo.asia/p/tim-hieu-ve-hooks-trong-react-p2-GrLZDkyEKk0

https://viblo.asia/p/tim-hieu-ve-hooks-trong-react-p3-m68Z07g2KkG?fbclid=IwAR2zq7MEfttB7VsFS0LBY-gHG2JKPUYTm78mPzzGVDb3uIS0ZNg_EPxHad4

# Tìm hiểu về Hooks trong React

[ReactJS](https://viblo.asia/tags/reactjs)

## 1. Mở đầu

------

Xin chào tất cả các bạn mặc dù `Hooks` của `React` đã ra mắt được một thời gian rồi tuy nhiên gần đây mình mới có cơ hội sử dụng thử nó nhiều hơn trong project nên bài viết này mình xin chia sẻ lại với các bạn về một số điều mà mình tìm hiểu được về một số hàm `Hooks` mà mình tìm hiểu được

## 2. React Hook

------

### a. useState

Có lẽ đối với các bạn đã đọc qua về `Hook` trong `React` thì đây là 1 trong 2 `Hook` cơ bản nhất được giới thiệu trong số các `Hook`. `useState` như trong document của `React` giới thiệu thì nó có tính năng tương tự giống như `state` trong `class Component`. Đối với mình thì `Hook` này khá là hữu dụng vì từ khi dùng nó thì mình hầu như không còn cần tạo `class Component` nữa. Nếu trước kia bạn có một component sidebar như sau:

```js
const Sidebar = () => (
    <div>
        <ul>
            <li>Menu 1</li>
            <li>Menu 2</li>
        </ul>    
    </div>
)
```

Với mục đích bạn đầu là phần `Sidebar` này sẽ luôn hiển thị thì bạn chỉ cần viết như trên và import nó vào sử dụng. Tuy nhiên về sau bạn lại muốn có thể thu gọn `Sidebar` này lại để có nhiều diện tích màn hình hơn cho phần nội dung chính thì chúng ta sẽ cần cập nhật lại. Trước thời kì của `Hooks` thì chúng ta sẽ phải refactor lại component này về `class Component` như sau:

```js
class Sidebar extends Components {
    state = {
        isCollapsed: false
    }
    
    const handleToggleSidebar = () => {
        this.setState(prevState => ({
            isCollapsed: !prevState.isCollapsed
        }));
    }

    render() {
        const { isCollapsed } = this.state; 

        return (
            <div className={`${isCollapsed ? 'hide' : 'display'}`}>
                <button onClick={this.handleToggleSidebar}>Collapse</button>
                <ul>
                    <li>Menu 1</li>
                    <li>Menu 2</li>
                </ul>    
            </div>
        )
    }
}
```

Trước thời kì có `Hook` thì mình rất hay phải làm việc này vì mỗi khi code mình vẫn đi theo "lý tưởng" mà mình đọc được đâu đó trên mạng là luôn ưu tiên `function component` ![😂](react-maximilan.assets/1f602-1581757434118.png)![😂](react-maximilan.assets/1f602-1581757434118.png)![😂](react-maximilan.assets/1f602-1581757434118.png) . Tuy nhiên từ khi có `Hooks` thì thay vì phải sửa lại nhiều như trên thì mình chỉ cần đơn giản làm như sau:

```js
const Sidebar = () => {
    const [isCollapsed, setCollapse] = useState(false);

    function handleToggleSidebar() {
        handleToggleSidebar(!isCollapsed);
    }

    return (
        <div className={`${isCollapsed ? 'hide' : 'display'}`}>
            <button onClick={handleToggleSidebar}>Collapse</button>
            <ul>
                <li>Menu 1</li>
                <li>Menu 2</li>
            </ul>    
        </div>
    )
}
```

Như bạn có thể thấy nó ngắng gọn hơn rất nhiều so với phiên bản trước đó mà vẫn đạt được mục đích chúng ta mong muốn.

### b. useReducer

------

Nếu bạn đã từng sử dụng `Redux` thì cũng không còn lạ với khái niệm này. Một trong những người phát triển ra `Redux` là `Dan Abramov` hiện tại cùng là thành viên trong team phát triển `React` cho nên có thể `Dan` đã mang cái tên này vào trong `Hook` của `React`. `useReducer` hoạt động tương tự như `Reducer` mà bạn thấy trong `Redux`. `useReducer` cũng nhận vào 2 tham số đó là `state` hiện tại của chúng ta và một `action` để có thể quyết định state của chúng ta sẽ thay đổi ra sao. Để hiểu rõ hơn chúng ta sẽ xét ví dụ sau:

```js
const PostList = () => {
    const [posts, setPosts] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(false);

    function loadUser() {
        setLoading(true)
        axios.get('some-post-url')
            .then(response => {
                const { data } = response;
                setPosts(data);
                setError(false);
                setLoading(false);
            })
            .catch(error => {
                setLoading(false);
                setError(true);
            })
    }

    return (
        // Some UI
    )
}
```

Nói qua về kịch bản phía trên ta sẽ có một function mà khi gọi vào nó sẽ thự hiện việc gọi lên API lấy danh sách bài viết và hiển thị ra cho chúng ta. Và để có trải nghiệm tốt nhất thì trong khi đợi kết quả từ API chúng ta sẽ hiển thị một cái UI là đang loading được quyết định bằng `state loading` như bạn thấy ở trên. Trong trường hợp lấy được dữ liệu thành công thì `loading` sẽ trở lại `false` và ẩn cái UI loading đó đi để hiển thị danh sách bài viết cho bạn. Còn trong trường hợp có lỗi thì `error` sẽ thành `true` và bạn có thể hiển thị ra thông báo lỗi nào đó. Với kịch bạn như trên khi mà `state` của bạn có nhiều các thuộc tính và các thuộc tính sẽ cùng thay đổi theo một nhóm hành động như trên thì ta có thể dùng `useReducer` như sau:

```js
const postReducer = (state, action) => {
    switch (action.type) {
        case 'LOADING':
            return {posts: [], loading: true, error: false};
        case 'LOAD_SUCCESS':
            return {posts: action.posts, loading: false, error: false};
        case 'LOAD_ERROR':
            return {posts: [], loading: false, error: action.error};
    }
}

const PostList = () => {
    const [state, dispatch] = useReducer({
        posts: [],
        loading: false,
        error: false,
    });

    function loadUser() {
        dispatch({ type: "LOADING" });
        axios.get('some-post-url')
            .then(response => {
                const { data } = response;
                 dispatch({ type: "LOAD_SUCCESS", users: data });
            })
            .catch(error => {
                dispatch({ type: "LOAD_ERROR", error });
            })
    }

    return (
        // Some UI
    )
}
```

Với ví dụ trên thì bạn có thể thây tại sao nó có tên gọi là `useReducer` vì nó theo mình giống như là anh em họ với `Reducer` của `Redux`. Với ví dụ trên bạn có thể nghĩ là việc sử dụng `useReducer` có vẻ sẽ mất nhiều công code hơn so với `useState` như ban đầu. Tuy nhiên trong trường hợp `state` của bạn là một object phức tạp chứa nhiều tầng lớp và các action của bạn chỉ thay đổi một phần trong đó thì lúc ấy `useReducer` chính là thứ bạn cần thay cho việc tạo ra cả chục cái `useState`. Điều này cũng dễ hiểu vì đến `Redux` cũng sử dụng nó để thực hiện việc thay đổi `store` mà ![😄](react-maximilan.assets/1f604-1581757434143.png) ![😄](react-maximilan.assets/1f604-1581757434143.png) ![😄](react-maximilan.assets/1f604-1581757434143.png)

### c. useEffect

------

Khi mới đọc về những dùng mà `Hook` này có thể làm được thì mình thấy nó khá là "ma mị" vì nghe nói nó sẽ thay thế cho cả `componentDidMount`, `componentDidUpdate` lẫn `componentWillUnmount`. Nhưng trên thực tế khi làm việc bạn không nên nghĩ đến nó sẽ thay thế cho các hàm trên mà hãy hiểu đơn giản là hàm là "useEffect sẽ chạy sau mỗi lần component của bạn re-render nếu thỏa mãn điều kiện bạn đặt ra hoắc khi component bị unmount". Đó là tất cả những gì bạn cần nhớ đến chứ không phải việc thay thế cho các lifecycle nói trên. Xét ví dụ sau:

```js
const UserInfo = () => {
    const [user, setUser] = useState(null);
    
    useEffect(() => {
        axios.get(`user-info-${someUserId}`)
            .then(response => setUser(response.data));
    }, [someUserId]);
    
    return (
        // User info UI
    )
}
```

Với ví dụ trên ta thây bên trong `useEffect` sẽ có một function dùng để gọi lên API để lấy thông tin của user có id là `someUserId`. Ngoài ra `useEffect` còn nhận vào một mảng khác dưới tên gọi là `dependancy` hay bạn có nhiều bài viết gọi tắt là `deps`. Về cơ bản đúng như tên gọi của nó là cái function mà bạn truyền vào trong `useEffect` sẽ được gọi là nếu 1 trong các thành phần trong `deps` của bạn thay đổi. Đó chỉ đơn giản như vậy thôi. Tuy nhiên bạn cần chú ý nếu `deps` của bạn là một object thì rất có thể dẫn đến việc `useEffect` của bạn bị gọi liên tục vì với object nó sẽ so sánh tham chiếu chứ không phải giá trị. Thêm một tips nữa cho bạn khi sử dụng `useEffect` như sau. Giả sử ta sửa lại code trên thành:

```js
const SomeRemoteList = () => {
    const [data, setData] = useState(null);
    function fetchData() {
        // So something to fetch data
    }
    
    useEffect(() => {
           fetchData();
    });
    
    return (
        // User info UI
    )
}
```

Nếu bạn có ý định viết tách hẳn hàm gọi API ra khỏi `useEffect` và gọi lại nó trong `useEffect` thì mình khuyên là không nên. Những hàm bạn sử dụng trong `useEffect` thì bạn nên định nghĩa nó luôn trong đó như này:

```js
const SomeRemoteList = () => {
    const [data, setData] = useState(null);
    
    useEffect(() => {
            function fetchData() {
                // So something to fetch data
            }
           fetchData();
    });
    
    return (
        // User info UI
    )
}
```

Tại sao nên làm như trên vì thứ nhất trong trường hợp hàm của bạn có sử dụng hay phụ thuộc vào một tham số nào đó khác thì rất có thể bạn sẽ bị miss mất việc khai báo nó trong `deps` dẫn đến các bug khó hiểu. Thêm nữa việc di chuyển hàm vào trong `useEffect` như nói trên còn giúp cho bạn sau này khi nhìn vào `effect` này sẽ nhanh chóng nắm được toàn bộ những gì nó làm vì nó như viết được đóng gói toàn bộ thành một module nhỏ trong component của bạn vậy

